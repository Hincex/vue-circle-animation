{"remainingRequest":"/Users/vincehe/code/circle-animation/node_modules/babel-loader/lib/index.js!/Users/vincehe/code/circle-animation/node_modules/eslint-loader/index.js??ref--13-0!/Users/vincehe/code/circle-animation/src/components/u-charts.js","dependencies":[{"path":"/Users/vincehe/code/circle-animation/src/components/u-charts.js","mtime":1560778644000},{"path":"/Users/vincehe/code/circle-animation/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vincehe/code/circle-animation/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vincehe/code/circle-animation/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["/*\n * uCharts v1.7.0.8\n * uni-app平台高性能跨全端图表，支持H5、APP、小程序（微信/支付宝/百度/头条）\n * Copyright (c) 2019 QIUN秋云 https://www.ucharts.cn All rights reserved.\r\n * Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\r\n * \n * uCharts官方网站\n * https://www.uCharts.cn\n * \n * 开源地址:\n * https://gitee.com/uCharts/uCharts\n * \n * uni-app插件市场地址：\n * http://ext.dcloud.net.cn/plugin?id=271\n * \r\n * \n */\n'use strict';\n\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _typeof from \"/Users/vincehe/code/circle-animation/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.replace\";\nvar config = {\n  yAxisWidth: 15,\n  yAxisSplit: 5,\n  xAxisHeight: 15,\n  xAxisLineHeight: 15,\n  legendHeight: 15,\n  yAxisTitleWidth: 15,\n  padding: 12,\n  pixelRatio: 1,\n  //适配H5高分屏\n  rotate: false,\n  //横屏模式\n  columePadding: 3,\n  fontSize: 13,\n  //dataPointShape: ['diamond', 'circle', 'triangle', 'rect'],\n  dataPointShape: ['circle', 'circle', 'circle', 'circle'],\n  //仿F2图例样式改为圆点\n  colors: ['#1890ff', '#2fc25b', '#facc14', '#f04864', '#8543e0', '#90ed7d'],\n  pieChartLinePadding: 15,\n  pieChartTextPadding: 5,\n  xAxisTextPadding: 3,\n  titleColor: '#333333',\n  titleFontSize: 20,\n  subtitleColor: '#999999',\n  subtitleFontSize: 15,\n  toolTipPadding: 3,\n  toolTipBackground: '#000000',\n  toolTipOpacity: 0.7,\n  toolTipLineHeight: 20,\n  radarGridCount: 3,\n  radarLabelTextMargin: 15,\n  gaugeLabelTextMargin: 15\n}; // Object.assign polyfill\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\nfunction assign(target, varArgs) {\n  if (target == null) {\n    // TypeError if undefined or null\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  var to = Object(target);\n\n  for (var index = 1; index < arguments.length; index++) {\n    var nextSource = arguments[index];\n\n    if (nextSource != null) {\n      // Skip over if undefined or null\n      for (var nextKey in nextSource) {\n        // Avoid bugs when hasOwnProperty is shadowed\n        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n          to[nextKey] = nextSource[nextKey];\n        }\n      }\n    }\n  }\n\n  return to;\n}\n\nvar util = {\n  toFixed: function toFixed(num, limit) {\n    limit = limit || 2;\n\n    if (this.isFloat(num)) {\n      num = num.toFixed(limit);\n    }\n\n    return num;\n  },\n  isFloat: function isFloat(num) {\n    return num % 1 !== 0;\n  },\n  approximatelyEqual: function approximatelyEqual(num1, num2) {\n    return Math.abs(num1 - num2) < 1e-10;\n  },\n  isSameSign: function isSameSign(num1, num2) {\n    return Math.abs(num1) === num1 && Math.abs(num2) === num2 || Math.abs(num1) !== num1 && Math.abs(num2) !== num2;\n  },\n  isSameXCoordinateArea: function isSameXCoordinateArea(p1, p2) {\n    return this.isSameSign(p1.x, p2.x);\n  },\n  isCollision: function isCollision(obj1, obj2) {\n    obj1.end = {};\n    obj1.end.x = obj1.start.x + obj1.width;\n    obj1.end.y = obj1.start.y - obj1.height;\n    obj2.end = {};\n    obj2.end.x = obj2.start.x + obj2.width;\n    obj2.end.y = obj2.start.y - obj2.height;\n    var flag = obj2.start.x > obj1.end.x || obj2.end.x < obj1.start.x || obj2.end.y > obj1.start.y || obj2.start.y < obj1.end.y;\n    return !flag;\n  }\n}; // hex 转 rgba\n\nfunction hexToRgb(hexValue, opc) {\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  var hex = hexValue.replace(rgx, function (m, r, g, b) {\n    return r + r + g + g + b + b;\n  });\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + opc + ')';\n}\n\nfunction findRange(num, type, limit) {\n  if (isNaN(num)) {\n    throw new Error('[wxCharts] unvalid series data!');\n  }\n\n  limit = limit || 10;\n  type = type ? type : 'upper';\n  var multiple = 1;\n\n  while (limit < 1) {\n    limit *= 10;\n    multiple *= 10;\n  }\n\n  if (type === 'upper') {\n    num = Math.ceil(num * multiple);\n  } else {\n    num = Math.floor(num * multiple);\n  }\n\n  while (num % limit !== 0) {\n    if (type === 'upper') {\n      num++;\n    } else {\n      num--;\n    }\n  }\n\n  return num / multiple;\n}\n\nfunction calValidDistance(distance, chartData, config, opts) {\n  var dataChartAreaWidth = opts.width - config.padding - chartData.xAxisPoints[0];\n  var dataChartWidth = chartData.eachSpacing * opts.categories.length;\n  var validDistance = distance;\n\n  if (distance >= 0) {\n    validDistance = 0;\n  } else if (Math.abs(distance) >= dataChartWidth - dataChartAreaWidth) {\n    validDistance = dataChartAreaWidth - dataChartWidth;\n  }\n\n  return validDistance;\n}\n\nfunction isInAngleRange(angle, startAngle, endAngle) {\n  function adjust(angle) {\n    while (angle < 0) {\n      angle += 2 * Math.PI;\n    }\n\n    while (angle > 2 * Math.PI) {\n      angle -= 2 * Math.PI;\n    }\n\n    return angle;\n  }\n\n  angle = adjust(angle);\n  startAngle = adjust(startAngle);\n  endAngle = adjust(endAngle);\n\n  if (startAngle > endAngle) {\n    endAngle += 2 * Math.PI;\n\n    if (angle < startAngle) {\n      angle += 2 * Math.PI;\n    }\n  }\n\n  return angle >= startAngle && angle <= endAngle;\n}\n\nfunction calRotateTranslate(x, y, h) {\n  var xv = x;\n  var yv = h - y;\n  var transX = xv + (h - yv - xv) / Math.sqrt(2);\n  transX *= -1;\n  var transY = (h - yv) * (Math.sqrt(2) - 1) - (h - yv - xv) / Math.sqrt(2);\n  return {\n    transX: transX,\n    transY: transY\n  };\n}\n\nfunction createCurveControlPoints(points, i) {\n  function isNotMiddlePoint(points, i) {\n    if (points[i - 1] && points[i + 1]) {\n      return points[i].y >= Math.max(points[i - 1].y, points[i + 1].y) || points[i].y <= Math.min(points[i - 1].y, points[i + 1].y);\n    } else {\n      return false;\n    }\n  }\n\n  var a = 0.2;\n  var b = 0.2;\n  var pAx = null;\n  var pAy = null;\n  var pBx = null;\n  var pBy = null;\n\n  if (i < 1) {\n    pAx = points[0].x + (points[1].x - points[0].x) * a;\n    pAy = points[0].y + (points[1].y - points[0].y) * a;\n  } else {\n    pAx = points[i].x + (points[i + 1].x - points[i - 1].x) * a;\n    pAy = points[i].y + (points[i + 1].y - points[i - 1].y) * a;\n  }\n\n  if (i > points.length - 3) {\n    var last = points.length - 1;\n    pBx = points[last].x - (points[last].x - points[last - 1].x) * b;\n    pBy = points[last].y - (points[last].y - points[last - 1].y) * b;\n  } else {\n    pBx = points[i + 1].x - (points[i + 2].x - points[i].x) * b;\n    pBy = points[i + 1].y - (points[i + 2].y - points[i].y) * b;\n  } // fix issue https://github.com/xiaolin3303/wx-charts/issues/79\n\n\n  if (isNotMiddlePoint(points, i + 1)) {\n    pBy = points[i + 1].y;\n  }\n\n  if (isNotMiddlePoint(points, i)) {\n    pAy = points[i].y;\n  }\n\n  return {\n    ctrA: {\n      x: pAx,\n      y: pAy\n    },\n    ctrB: {\n      x: pBx,\n      y: pBy\n    }\n  };\n}\n\nfunction convertCoordinateOrigin(x, y, center) {\n  return {\n    x: center.x + x,\n    y: center.y - y\n  };\n}\n\nfunction avoidCollision(obj, target) {\n  if (target) {\n    // is collision test\n    while (util.isCollision(obj, target)) {\n      if (obj.start.x > 0) {\n        obj.start.y--;\n      } else if (obj.start.x < 0) {\n        obj.start.y++;\n      } else {\n        if (obj.start.y > 0) {\n          obj.start.y++;\n        } else {\n          obj.start.y--;\n        }\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction fillSeriesColor(series, config) {\n  var index = 0;\n  return series.map(function (item) {\n    if (!item.color) {\n      item.color = config.colors[index];\n      index = (index + 1) % config.colors.length;\n    }\n\n    return item;\n  });\n}\n\nfunction fillSeriesType(series, opts) {\n  return series.map(function (item) {\n    if (!item.type) {\n      item.type = opts.type;\n    }\n\n    return item;\n  });\n}\n\nfunction getDataRange(minData, maxData) {\n  var limit = 0;\n  var range = maxData - minData;\n\n  if (range >= 10000) {\n    limit = 1000;\n  } else if (range >= 1000) {\n    limit = 100;\n  } else if (range >= 100) {\n    limit = 10;\n  } else if (range >= 10) {\n    limit = 5;\n  } else if (range >= 1) {\n    limit = 1;\n  } else if (range >= 0.1) {\n    limit = 0.1;\n  } else {\n    limit = 0.01;\n  }\n\n  return {\n    minRange: findRange(minData, 'lower', limit),\n    maxRange: findRange(maxData, 'upper', limit)\n  };\n}\n\nfunction measureText(text) {\n  var fontSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : config.fontSize; // wx canvas 未实现measureText方法, 此处自行实现\n  // 适配修改初始字体10px为其他大小的方法\n\n  text = String(text);\n  var text = text.split('');\n  var width = 0;\n  text.forEach(function (item) {\n    if (/[a-zA-Z]/.test(item)) {\n      width += 7;\n    } else if (/[0-9]/.test(item)) {\n      width += 5.5;\n    } else if (/\\./.test(item)) {\n      width += 2.7;\n    } else if (/-/.test(item)) {\n      width += 3.25;\n    } else if (/[\\u4e00-\\u9fa5]/.test(item)) {\n      width += 10;\n    } else if (/\\(|\\)/.test(item)) {\n      width += 3.73;\n    } else if (/\\s/.test(item)) {\n      width += 2.5;\n    } else if (/%/.test(item)) {\n      width += 8;\n    } else {\n      width += 10;\n    }\n  });\n  return width * fontSize / 10;\n}\n\nfunction dataCombine(series) {\n  return series.reduce(function (a, b) {\n    return (a.data ? a.data : a).concat(b.data);\n  }, []);\n}\n\nfunction dataCombineStack(series) {\n  var sum = new Array(series[0].data.length);\n\n  for (var j = 0; j < sum.length; j++) {\n    sum[j] = 0;\n  }\n\n  for (var i = 0; i < series.length; i++) {\n    for (var j = 0; j < sum.length; j++) {\n      sum[j] += series[i].data[j];\n    }\n  }\n\n  return series.reduce(function (a, b) {\n    return (a.data ? a.data : a).concat(b.data).concat(sum);\n  }, []);\n}\n\nfunction getTouches(touches, opts, e) {\n  var x, y;\n\n  if (touches.clientX) {\n    if (opts.rotate) {\n      //适配横屏\n      y = opts.height - touches.clientX * opts.pixelRatio;\n      x = (touches.pageY - e.mp.currentTarget.offsetTop - opts.height / opts.pixelRatio / 2 * (opts.pixelRatio - 1)) * opts.pixelRatio;\n    } else {\n      x = touches.clientX * opts.pixelRatio;\n      y = (touches.pageY - e.mp.currentTarget.offsetTop - opts.height / opts.pixelRatio / 2 * (opts.pixelRatio - 1)) * opts.pixelRatio;\n    }\n  } else {\n    if (opts.rotate) {\n      //适配横屏\n      y = opts.height - touches.x * opts.pixelRatio;\n      x = touches.y * opts.pixelRatio;\n    } else {\n      x = touches.x * opts.pixelRatio;\n      y = touches.y * opts.pixelRatio;\n    }\n  }\n\n  return {\n    x: x,\n    y: y\n  };\n}\n\nfunction getSeriesDataItem(series, index) {\n  var data = [];\n  series.forEach(function (item) {\n    if (item.data[index] !== null && typeof item.data[index] !== 'undefined') {\n      var seriesItem = {};\n      seriesItem.color = item.color;\n      seriesItem.type = item.type;\n      seriesItem.style = item.style;\n      seriesItem.shape = item.shape;\n      seriesItem.disableLegend = item.disableLegend;\n      seriesItem.name = item.name;\n      seriesItem.data = item.format ? item.format(item.data[index]) : item.data[index];\n      data.push(seriesItem);\n    }\n  });\n  return data;\n}\n\nfunction getMaxTextListLength(list) {\n  var lengthList = list.map(function (item) {\n    return measureText(item);\n  });\n  return Math.max.apply(null, lengthList);\n}\n\nfunction getRadarCoordinateSeries(length) {\n  var eachAngle = 2 * Math.PI / length;\n  var CoordinateSeries = [];\n\n  for (var i = 0; i < length; i++) {\n    CoordinateSeries.push(eachAngle * i);\n  }\n\n  return CoordinateSeries.map(function (item) {\n    return -1 * item + Math.PI / 2;\n  });\n}\n\nfunction getToolTipData(seriesData, calPoints, index, categories) {\n  var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var textList = seriesData.map(function (item) {\n    return {\n      text: option.format ? option.format(item, categories[index]) : item.name + ': ' + item.data,\n      color: item.color\n    };\n  });\n  var validCalPoints = [];\n  var offset = {\n    x: 0,\n    y: 0\n  };\n  calPoints.forEach(function (points) {\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\n      validCalPoints.push(points[index]);\n    }\n  });\n  validCalPoints.forEach(function (item) {\n    offset.x = Math.round(item.x);\n    offset.y += item.y;\n  });\n  offset.y /= validCalPoints.length;\n  return {\n    textList: textList,\n    offset: offset\n  };\n}\n\nfunction getMixToolTipData(seriesData, calPoints, index, categories) {\n  var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var textList = seriesData.map(function (item) {\n    return {\n      text: option.format ? option.format(item, categories[index]) : item.name + ': ' + item.data,\n      color: item.color,\n      disableLegend: item.disableLegend ? true : false\n    };\n  });\n  textList = textList.filter(function (item) {\n    if (item.disableLegend !== true) {\n      return item;\n    }\n  });\n  var validCalPoints = [];\n  var offset = {\n    x: 0,\n    y: 0\n  };\n  calPoints.forEach(function (points) {\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\n      validCalPoints.push(points[index]);\n    }\n  });\n  validCalPoints.forEach(function (item) {\n    offset.x = Math.round(item.x);\n    offset.y += item.y;\n  });\n  offset.y /= validCalPoints.length;\n  return {\n    textList: textList,\n    offset: offset\n  };\n}\n\nfunction getCandleToolTipData(series, seriesData, calPoints, index, categories, extra) {\n  var option = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n  var upColor = extra.color.upFill;\n  var downColor = extra.color.downFill; //颜色顺序为开盘，收盘，最低，最高\n\n  var color = [upColor, upColor, downColor, upColor];\n  var textList = [];\n  var text0 = {\n    text: categories[index],\n    color: null\n  };\n  textList.push(text0);\n  seriesData.map(function (item) {\n    //console.log(color)\n    if (index == 0 && item.data[1] - item.data[0] < 0) {\n      color[1] = downColor;\n    } else {\n      if (item.data[0] < series[index - 1][1]) {\n        color[0] = downColor;\n      }\n\n      if (item.data[1] < item.data[0]) {\n        color[1] = downColor;\n      }\n\n      if (item.data[2] > series[index - 1][1]) {\n        color[2] = upColor;\n      }\n\n      if (item.data[3] < series[index - 1][1]) {\n        color[3] = downColor;\n      }\n    }\n\n    var text1 = {\n      text: '开盘：' + item.data[0],\n      color: color[0]\n    };\n    var text2 = {\n      text: '收盘：' + item.data[1],\n      color: color[1]\n    };\n    var text3 = {\n      text: '最低：' + item.data[2],\n      color: color[2]\n    };\n    var text4 = {\n      text: '最高：' + item.data[3],\n      color: color[3]\n    };\n    textList.push(text1, text2, text3, text4);\n  });\n  var validCalPoints = [];\n  var offset = {\n    x: 0,\n    y: 0\n  };\n  calPoints.forEach(function (points) {\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\n      validCalPoints.push(points[index]);\n    }\n  });\n  offset.x = Math.round(validCalPoints[0][0].x);\n  return {\n    textList: textList,\n    offset: offset\n  };\n}\n\nfunction findCurrentIndex(currentPoints, xAxisPoints, opts, config) {\n  var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var currentIndex = -1;\n\n  if (isInExactChartArea(currentPoints, opts, config)) {\n    xAxisPoints.forEach(function (item, index) {\n      if (currentPoints.x + offset > item) {\n        currentIndex = index;\n      }\n    });\n  }\n\n  return currentIndex;\n}\n\nfunction isInExactChartArea(currentPoints, opts, config) {\n  return currentPoints.x < opts.width - config.padding && currentPoints.x > config.padding + config.yAxisWidth + config.yAxisTitleWidth && currentPoints.y > config.padding && currentPoints.y < opts.height - config.legendHeight - config.xAxisHeight - config.padding;\n}\n\nfunction findRadarChartCurrentIndex(currentPoints, radarData, count) {\n  var eachAngleArea = 2 * Math.PI / count;\n  var currentIndex = -1;\n\n  if (isInExactPieChartArea(currentPoints, radarData.center, radarData.radius)) {\n    var fixAngle = function fixAngle(angle) {\n      if (angle < 0) {\n        angle += 2 * Math.PI;\n      }\n\n      if (angle > 2 * Math.PI) {\n        angle -= 2 * Math.PI;\n      }\n\n      return angle;\n    };\n\n    var angle = Math.atan2(radarData.center.y - currentPoints.y, currentPoints.x - radarData.center.x);\n    angle = -1 * angle;\n\n    if (angle < 0) {\n      angle += 2 * Math.PI;\n    }\n\n    var angleList = radarData.angleList.map(function (item) {\n      item = fixAngle(-1 * item);\n      return item;\n    });\n    angleList.forEach(function (item, index) {\n      var rangeStart = fixAngle(item - eachAngleArea / 2);\n      var rangeEnd = fixAngle(item + eachAngleArea / 2);\n\n      if (rangeEnd < rangeStart) {\n        rangeEnd += 2 * Math.PI;\n      }\n\n      if (angle >= rangeStart && angle <= rangeEnd || angle + 2 * Math.PI >= rangeStart && angle + 2 * Math.PI <= rangeEnd) {\n        currentIndex = index;\n      }\n    });\n  }\n\n  return currentIndex;\n}\n\nfunction findPieChartCurrentIndex(currentPoints, pieData) {\n  var currentIndex = -1;\n\n  if (isInExactPieChartArea(currentPoints, pieData.center, pieData.radius)) {\n    var angle = Math.atan2(pieData.center.y - currentPoints.y, currentPoints.x - pieData.center.x);\n    angle = -angle;\n\n    for (var i = 0, len = pieData.series.length; i < len; i++) {\n      var item = pieData.series[i];\n\n      if (isInAngleRange(angle, item._start_, item._start_ + item._proportion_ * 2 * Math.PI)) {\n        currentIndex = i;\n        break;\n      }\n    }\n  }\n\n  return currentIndex;\n}\n\nfunction isInExactPieChartArea(currentPoints, center, radius) {\n  return Math.pow(currentPoints.x - center.x, 2) + Math.pow(currentPoints.y - center.y, 2) <= Math.pow(radius, 2);\n}\n\nfunction splitPoints(points) {\n  var newPoints = [];\n  var items = [];\n  points.forEach(function (item, index) {\n    if (item !== null) {\n      items.push(item);\n    } else {\n      if (items.length) {\n        newPoints.push(items);\n      }\n\n      items = [];\n    }\n  });\n\n  if (items.length) {\n    newPoints.push(items);\n  }\n\n  return newPoints;\n}\n\nfunction calLegendData(series, opts, config) {\n  if (opts.legend === false) {\n    return {\n      legendList: [],\n      legendHeight: 0\n    };\n  } //适配H5高分屏\n\n\n  var padding = 5 * opts.pixelRatio;\n  var marginTop = 8 * opts.pixelRatio;\n  var shapeWidth = 15 * opts.pixelRatio;\n  var legendList = [];\n  var widthCount = 0;\n  var currentRow = [];\n  series.forEach(function (item) {\n    var itemWidth = 3 * padding + shapeWidth + measureText(item.name || 'undefined');\n\n    if (widthCount + itemWidth > opts.width) {\n      legendList.push(currentRow);\n      widthCount = itemWidth;\n      currentRow = [item];\n    } else {\n      widthCount += itemWidth;\n      currentRow.push(item);\n    }\n  });\n\n  if (currentRow.length) {\n    legendList.push(currentRow);\n  }\n\n  return {\n    legendList: legendList,\n    legendHeight: legendList.length * (config.fontSize + marginTop) + padding\n  };\n}\n\nfunction calCategoriesData(categories, opts, config) {\n  var result = {\n    angle: 0,\n    xAxisHeight: config.xAxisHeight\n  };\n\n  var _getXAxisPoints = getXAxisPoints(categories, opts, config),\n      eachSpacing = _getXAxisPoints.eachSpacing; // get max length of categories text\n\n\n  var categoriesTextLenth = categories.map(function (item) {\n    return measureText(item);\n  });\n  var maxTextLength = Math.max.apply(this, categoriesTextLenth);\n\n  if (opts.xAxis.rotateLabel == true && maxTextLength + 2 * config.xAxisTextPadding > eachSpacing) {\n    result.angle = 45 * Math.PI / 180;\n    result.xAxisHeight = 2 * config.xAxisTextPadding + maxTextLength * Math.sin(result.angle);\n  }\n\n  return result;\n}\n\nfunction getRadarDataPoints(angleList, center, radius, series, opts) {\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n  var radarOption = opts.extra.radar || {};\n  radarOption.max = radarOption.max || 0;\n  var maxData = Math.max(radarOption.max, Math.max.apply(null, dataCombine(series)));\n  var data = [];\n  series.forEach(function (each) {\n    var listItem = {};\n    listItem.color = each.color;\n    listItem.data = [];\n    each.data.forEach(function (item, index) {\n      var tmp = {};\n      tmp.angle = angleList[index];\n      tmp.proportion = item / maxData;\n      tmp.position = convertCoordinateOrigin(radius * tmp.proportion * process * Math.cos(tmp.angle), radius * tmp.proportion * process * Math.sin(tmp.angle), center);\n      listItem.data.push(tmp);\n    });\n    data.push(listItem);\n  });\n  return data;\n}\n\nfunction getPieDataPoints(series) {\n  var process = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var count = 0;\n  var _start_ = 0;\n  series.forEach(function (item) {\n    item.data = item.data === null ? 0 : item.data;\n    count += item.data;\n  });\n  series.forEach(function (item) {\n    item.data = item.data === null ? 0 : item.data;\n\n    if (count === 0) {\n      item._proportion_ = 1 / series.length;\n    } else {\n      item._proportion_ = item.data / count * process;\n    }\n  });\n  series.forEach(function (item) {\n    item._start_ = _start_;\n    _start_ += 2 * item._proportion_ * Math.PI;\n  });\n  return series;\n}\n\nfunction getArcbarDataPoints(series, arcbarOption) {\n  var process = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (process == 1) {\n    process = 0.999999;\n  }\n\n  series.forEach(function (item) {\n    item.data = item.data === null ? 0 : item.data;\n    var totalAngle;\n\n    if (arcbarOption.type == 'default') {\n      totalAngle = arcbarOption.startAngle - arcbarOption.endAngle + 1;\n    } else {\n      totalAngle = 2;\n    }\n\n    item._proportion_ = totalAngle * item.data * process + arcbarOption.startAngle;\n\n    if (item._proportion_ >= 2) {\n      item._proportion_ = item._proportion_ % 2;\n    }\n  });\n  return series;\n}\n\nfunction getGaugeAxisPoints(categories, startAngle, endAngle) {\n  var totalAngle = startAngle - endAngle + 1;\n  var tempStartAngle = startAngle;\n\n  for (var i = 0; i < categories.length; i++) {\n    categories[i].value = categories[i].value === null ? 0 : categories[i].value;\n    categories[i]._startAngle_ = tempStartAngle;\n    categories[i]._endAngle_ = totalAngle * categories[i].value + startAngle;\n\n    if (categories[i]._endAngle_ >= 2) {\n      categories[i]._endAngle_ = categories[i]._endAngle_ % 2;\n    }\n\n    tempStartAngle = categories[i]._endAngle_;\n  }\n\n  return categories;\n}\n\nfunction getGaugeDataPoints(series, categories, gaugeOption) {\n  var process = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  series.forEach(function (item) {\n    item.data = item.data === null ? 0 : item.data;\n\n    if (gaugeOption.pointer.color == 'auto') {\n      for (var i = 0; i < categories.length; i++) {\n        if (item.data <= categories[i].value) {\n          item.color = categories[i].color;\n          break;\n        }\n      }\n    } else {\n      item.color = gaugeOption.pointer.color;\n    }\n\n    var totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\n    item._endAngle_ = totalAngle * item.data + gaugeOption.startAngle;\n    item._oldAngle_ = gaugeOption.oldAngle;\n\n    if (gaugeOption.oldAngle < gaugeOption.endAngle) {\n      item._oldAngle_ += 2;\n    }\n\n    if (item.data >= gaugeOption.oldData) {\n      item._proportion_ = (item._endAngle_ - item._oldAngle_) * process + gaugeOption.oldAngle;\n    } else {\n      item._proportion_ = item._oldAngle_ - (item._oldAngle_ - item._endAngle_) * process;\n    }\n\n    if (item._proportion_ >= 2) {\n      item._proportion_ = item._proportion_ % 2;\n    }\n  });\n  return series;\n}\n\nfunction getPieTextMaxLength(series) {\n  series = getPieDataPoints(series);\n  var maxLength = 0;\n  series.forEach(function (item) {\n    var text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\n    maxLength = Math.max(maxLength, measureText(text));\n  });\n  return maxLength;\n}\n\nfunction fixColumeData(points, eachSpacing, columnLen, index, config, opts) {\n  return points.map(function (item) {\n    if (item === null) {\n      return null;\n    }\n\n    item.width = (eachSpacing - 2 * config.columePadding) / columnLen;\n\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\n      // customer column width\n      item.width = Math.min(item.width, +opts.extra.column.width);\n    } else {\n      // default width should less tran 25px\n      // don't ask me why, I don't know\n      item.width = Math.min(item.width, 25);\n    }\n\n    item.x += (index + 0.5 - columnLen / 2) * item.width;\n    return item;\n  });\n}\n\nfunction fixColumeMeterData(points, eachSpacing, columnLen, index, config, opts, border) {\n  return points.map(function (item) {\n    if (item === null) {\n      return null;\n    }\n\n    item.width = eachSpacing - 2 * config.columePadding;\n\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\n      item.width = Math.min(item.width, +opts.extra.column.width);\n    } else {\n      item.width = Math.min(item.width, 25);\n    }\n\n    if (index > 0) {\n      item.width -= 2 * border;\n    }\n\n    return item;\n  });\n}\n\nfunction fixColumeStackData(points, eachSpacing, columnLen, index, config, opts, series) {\n  return points.map(function (item, indexn) {\n    if (item === null) {\n      return null;\n    }\n\n    item.width = eachSpacing - 2 * config.columePadding;\n\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\n      item.width = Math.min(item.width, +opts.extra.column.width);\n    } else {\n      item.width = Math.min(item.width, 25);\n    }\n\n    return item;\n  });\n}\n\nfunction getXAxisPoints(categories, opts, config) {\n  var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n  var spacingValid = opts.width - 2 * config.padding - yAxisTotalWidth;\n  var dataCount = opts.enableScroll ? Math.min(opts.xAxis.itemCount, categories.length) : categories.length;\n  var eachSpacing = spacingValid / dataCount;\n  var xAxisPoints = [];\n  var startX = config.padding + yAxisTotalWidth;\n  var endX = opts.width - config.padding;\n  categories.forEach(function (item, index) {\n    xAxisPoints.push(startX + index * eachSpacing);\n  });\n\n  if (opts.enableScroll === true) {\n    xAxisPoints.push(startX + categories.length * eachSpacing);\n  } else {\n    xAxisPoints.push(endX);\n  }\n\n  return {\n    xAxisPoints: xAxisPoints,\n    startX: startX,\n    endX: endX,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\n  var points = [];\n  var validHeight = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  data.forEach(function (item, index) {\n    if (item === null) {\n      points.push(null);\n    } else {\n      var cPoints = [];\n      item.forEach(function (items, indexs) {\n        var point = {};\n        point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\n        var value = items.value || items;\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\n        height *= process;\n        point.y = opts.height - config.xAxisHeight - config.legendHeight - Math.round(height) - config.padding;\n        cPoints.push(point);\n      });\n      points.push(cPoints);\n    }\n  });\n  return points;\n}\n\nfunction getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\n  var points = [];\n  var validHeight = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  data.forEach(function (item, index) {\n    if (item === null) {\n      points.push(null);\n    } else {\n      var point = {};\n      point.color = item.color;\n      point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\n      var value = item;\n\n      if (_typeof(item) === 'object' && item !== null) {\n        value = item.value;\n      }\n\n      var height = validHeight * (value - minRange) / (maxRange - minRange);\n      height *= process;\n      point.y = opts.height - config.xAxisHeight - config.legendHeight - Math.round(height) - config.padding;\n      points.push(point);\n    }\n  });\n  return points;\n}\n\nfunction getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, stackSeries) {\n  var process = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 1;\n  var points = [];\n  var validHeight = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  data.forEach(function (item, index) {\n    if (item === null) {\n      points.push(null);\n    } else {\n      var point = {};\n      point.color = item.color;\n      point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\n\n      if (seriesIndex > 0) {\n        var value = 0;\n\n        for (var i = 0; i <= seriesIndex; i++) {\n          value += stackSeries[i].data[index];\n        }\n\n        var value0 = value - item;\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\n        var height0 = validHeight * (value0 - minRange) / (maxRange - minRange);\n      } else {\n        var value = item;\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\n        var height0 = 0;\n      }\n\n      var heightc = height0;\n      height *= process;\n      heightc *= process;\n      point.y = opts.height - config.xAxisHeight - config.legendHeight - Math.round(height) - config.padding;\n      point.y0 = opts.height - config.xAxisHeight - config.legendHeight - Math.round(heightc) - config.padding;\n      points.push(point);\n    }\n  });\n  return points;\n}\n\nfunction getYAxisTextList(series, opts, config, stack) {\n  var data;\n\n  if (stack == 'stack') {\n    //data = dataCombine(series);\n    data = dataCombineStack(series);\n  } else {\n    data = dataCombine(series);\n  }\n\n  var sorted = []; // remove null from data\n\n  data = data.filter(function (item) {\n    //return item !== null;\n    if (_typeof(item) === 'object' && item !== null) {\n      //判断是否为数组\n      if (item.constructor == Array) {\n        return item !== null;\n      } else {\n        return item.value !== null;\n      }\n    } else {\n      return item !== null;\n    }\n  }); //var minData = Math.min.apply(this, data);\n  //var maxData = Math.max.apply(this, data);\n\n  data.map(function (item) {\n    if (_typeof(item) === 'object') {\n      if (item.constructor == Array) {\n        item.map(function (subitem) {\n          sorted.push(subitem);\n        });\n      } else {\n        sorted.push(item.value);\n      }\n    } else {\n      sorted.push(item);\n    } //typeof item === 'object' ? sorted.push(item.value) : sorted.push(item)\n\n  });\n  var minData = 0;\n  var maxData = 0;\n\n  if (sorted.length > 0) {\n    minData = Math.min.apply(this, sorted);\n    maxData = Math.max.apply(this, sorted);\n  }\n\n  if (typeof opts.yAxis.min === 'number') {\n    minData = Math.min(opts.yAxis.min, minData);\n  }\n\n  if (typeof opts.yAxis.max === 'number') {\n    maxData = Math.max(opts.yAxis.max, maxData);\n  } // fix issue https://github.com/xiaolin3303/wx-charts/issues/9\n\n\n  if (minData === maxData) {\n    var rangeSpan = maxData || 10; //minData -= rangeSpan;\n\n    maxData += rangeSpan;\n  }\n\n  var dataRange = getDataRange(minData, maxData);\n  var minRange = dataRange.minRange;\n  var maxRange = dataRange.maxRange;\n  var range = [];\n  var eachRange = (maxRange - minRange) / config.yAxisSplit;\n\n  for (var i = 0; i <= config.yAxisSplit; i++) {\n    range.push(minRange + eachRange * i);\n  }\n\n  return range.reverse();\n}\n\nfunction calYAxisData(series, opts, config) {\n  //堆叠图重算Y轴\n  var columnstyle = assign({}, opts.extra.column || {\n    \"type\": \"\"\n  });\n  var ranges = getYAxisTextList(series, opts, config, columnstyle.type);\n  var yAxisWidth = config.yAxisWidth;\n  var rangesFormat = ranges.map(function (item) {\n    item = util.toFixed(item, 2);\n    item = opts.yAxis.format ? opts.yAxis.format(Number(item)) : item;\n    yAxisWidth = Math.max(yAxisWidth, measureText(item) + 5);\n    return item;\n  });\n\n  if (opts.yAxis.disabled === true) {\n    yAxisWidth = 0;\n  }\n\n  return {\n    rangesFormat: rangesFormat,\n    ranges: ranges,\n    yAxisWidth: yAxisWidth\n  };\n}\n\nfunction calTooltipYAxisData(point, series, opts, config, eachSpacing) {\n  var ranges = getYAxisTextList(series, opts, config);\n  var spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  var maxVal = ranges[0];\n  var minVal = ranges[ranges.length - 1];\n  var minAxis = config.padding;\n  var maxAxis = config.padding + spacingValid;\n  var item = maxVal - (maxVal - minVal) * (point - minAxis) / (maxAxis - minAxis);\n  item = opts.yAxis.format ? opts.yAxis.format(Number(item)) : item;\n  return item;\n}\n\nfunction contextRotate(context, opts) {\n  if (opts.rotateLock !== true) {\n    context.translate(opts.height, 0);\n    context.rotate(90 * Math.PI / 180);\n  } else if (opts._rotate_ !== true) {\n    context.translate(opts.height, 0);\n    context.rotate(90 * Math.PI / 180);\n    opts._rotate_ = true;\n  }\n}\n\nfunction drawPointShape(points, color, shape, context, opts) {\n  context.beginPath();\n  context.setStrokeStyle(\"#ffffff\");\n  context.setLineWidth(1 * opts.pixelRatio);\n  context.setFillStyle(color);\n\n  if (shape === 'diamond') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x, item.y - 4.5);\n        context.lineTo(item.x - 4.5, item.y);\n        context.lineTo(item.x, item.y + 4.5);\n        context.lineTo(item.x + 4.5, item.y);\n        context.lineTo(item.x, item.y - 4.5);\n      }\n    });\n  } else if (shape === 'circle') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x + 3.5 * opts.pixelRatio, item.y);\n        context.arc(item.x, item.y, 4 * opts.pixelRatio, 0, 2 * Math.PI, false);\n      }\n    });\n  } else if (shape === 'rect') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x - 3.5, item.y - 3.5);\n        context.rect(item.x - 3.5, item.y - 3.5, 7, 7);\n      }\n    });\n  } else if (shape === 'triangle') {\n    points.forEach(function (item, index) {\n      if (item !== null) {\n        context.moveTo(item.x, item.y - 4.5);\n        context.lineTo(item.x - 4.5, item.y + 4.5);\n        context.lineTo(item.x + 4.5, item.y + 4.5);\n        context.lineTo(item.x, item.y - 4.5);\n      }\n    });\n  }\n\n  context.closePath();\n  context.fill();\n  context.stroke();\n}\n\nfunction drawRingTitle(opts, config, context) {\n  var titlefontSize = opts.title.fontSize || config.titleFontSize;\n  var subtitlefontSize = opts.subtitle.fontSize || config.subtitleFontSize;\n  var title = opts.title.name || '';\n  var subtitle = opts.subtitle.name || '';\n  var titleFontColor = opts.title.color || config.titleColor;\n  var subtitleFontColor = opts.subtitle.color || config.subtitleColor;\n  var titleHeight = title ? titlefontSize : 0;\n  var subtitleHeight = subtitle ? subtitlefontSize : 0;\n  var margin = 5;\n\n  if (subtitle) {\n    var textWidth = measureText(subtitle, subtitlefontSize);\n    var startX = (opts.width - textWidth) / 2 + (opts.subtitle.offsetX || 0);\n    var startY = (opts.height - config.legendHeight + subtitlefontSize) / 2 + (opts.subtitle.offsetY || 0);\n\n    if (title) {\n      startY -= (titleHeight + margin) / 2;\n    }\n\n    context.beginPath();\n    context.setFontSize(subtitlefontSize);\n    context.setFillStyle(subtitleFontColor);\n    context.fillText(subtitle, startX, startY);\n    context.closePath();\n    context.stroke();\n  }\n\n  if (title) {\n    var _textWidth = measureText(title, titlefontSize);\n\n    var _startX = (opts.width - _textWidth) / 2 + (opts.title.offsetX || 0);\n\n    var _startY = (opts.height - config.legendHeight + titlefontSize) / 2 + (opts.title.offsetY || 0);\n\n    if (subtitle) {\n      _startY += (subtitleHeight + margin) / 2;\n    }\n\n    context.beginPath();\n    context.setFontSize(titlefontSize);\n    context.setFillStyle(titleFontColor);\n    context.fillText(title, _startX, _startY);\n    context.closePath();\n    context.stroke();\n  }\n}\n\nfunction drawPointText(points, series, config, context) {\n  // 绘制数据文案\n  var data = series.data;\n  points.forEach(function (item, index) {\n    if (item !== null) {\n      //var formatVal = series.format ? series.format(data[index]) : data[index];\n      context.beginPath();\n      context.setFontSize(config.fontSize);\n      context.setFillStyle('#666666');\n      var value = data[index];\n\n      if (_typeof(data[index]) === 'object' && data[index] !== null) {\n        value = data[index].value;\n      }\n\n      var formatVal = series.format ? series.format(value) : value;\n      context.fillText(formatVal, item.x - measureText(formatVal) / 2, item.y - 2);\n      context.closePath();\n      context.stroke();\n    }\n  });\n}\n\nfunction drawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context) {\n  radius -= gaugeOption.width / 2 + config.gaugeLabelTextMargin;\n  var totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\n  var splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\n  var totalNumber = gaugeOption.endNumber - gaugeOption.startNumber;\n  var splitNumber = totalNumber / gaugeOption.splitLine.splitNumber;\n  var nowAngle = gaugeOption.startAngle;\n  var nowNumber = gaugeOption.startNumber;\n\n  for (var i = 0; i < gaugeOption.splitLine.splitNumber + 1; i++) {\n    var pos = {\n      x: radius * Math.cos(nowAngle * Math.PI),\n      y: radius * Math.sin(nowAngle * Math.PI)\n    };\n    pos.x += centerPosition.x - measureText(nowNumber) / 2;\n    pos.y += centerPosition.y;\n    var startX = pos.x;\n    var startY = pos.y;\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(gaugeOption.labelColor || '#666666');\n    context.fillText(nowNumber, startX, startY + config.fontSize / 2);\n    context.closePath();\n    context.stroke();\n    nowAngle += splitAngle;\n\n    if (nowAngle >= 2) {\n      nowAngle = nowAngle % 2;\n    }\n\n    nowNumber += splitNumber;\n  }\n}\n\nfunction drawRadarLabel(angleList, radius, centerPosition, opts, config, context) {\n  var radarOption = opts.extra.radar || {};\n  radius += config.radarLabelTextMargin;\n  angleList.forEach(function (angle, index) {\n    var pos = {\n      x: radius * Math.cos(angle),\n      y: radius * Math.sin(angle)\n    };\n    var posRelativeCanvas = convertCoordinateOrigin(pos.x, pos.y, centerPosition);\n    var startX = posRelativeCanvas.x;\n    var startY = posRelativeCanvas.y;\n\n    if (util.approximatelyEqual(pos.x, 0)) {\n      startX -= measureText(opts.categories[index] || '') / 2;\n    } else if (pos.x < 0) {\n      startX -= measureText(opts.categories[index] || '');\n    }\n\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(radarOption.labelColor || '#666666');\n    context.fillText(opts.categories[index] || '', startX, startY + config.fontSize / 2);\n    context.closePath();\n    context.stroke();\n  });\n}\n\nfunction drawPieText(series, opts, config, context, radius, center) {\n  var lineRadius = radius + config.pieChartLinePadding;\n  var textObjectCollection = [];\n  var lastTextObject = null;\n  var seriesConvert = series.map(function (item) {\n    var arc = 2 * Math.PI - (item._start_ + 2 * Math.PI * item._proportion_ / 2);\n    var text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\n    var color = item.color;\n    return {\n      arc: arc,\n      text: text,\n      color: color\n    };\n  });\n  seriesConvert.forEach(function (item) {\n    // line end\n    var orginX1 = Math.cos(item.arc) * lineRadius;\n    var orginY1 = Math.sin(item.arc) * lineRadius; // line start\n\n    var orginX2 = Math.cos(item.arc) * radius;\n    var orginY2 = Math.sin(item.arc) * radius; // text start\n\n    var orginX3 = orginX1 >= 0 ? orginX1 + config.pieChartTextPadding : orginX1 - config.pieChartTextPadding;\n    var orginY3 = orginY1;\n    var textWidth = measureText(item.text);\n    var startY = orginY3;\n\n    if (lastTextObject && util.isSameXCoordinateArea(lastTextObject.start, {\n      x: orginX3\n    })) {\n      if (orginX3 > 0) {\n        startY = Math.min(orginY3, lastTextObject.start.y);\n      } else if (orginX1 < 0) {\n        startY = Math.max(orginY3, lastTextObject.start.y);\n      } else {\n        if (orginY3 > 0) {\n          startY = Math.max(orginY3, lastTextObject.start.y);\n        } else {\n          startY = Math.min(orginY3, lastTextObject.start.y);\n        }\n      }\n    }\n\n    if (orginX3 < 0) {\n      orginX3 -= textWidth;\n    }\n\n    var textObject = {\n      lineStart: {\n        x: orginX2,\n        y: orginY2\n      },\n      lineEnd: {\n        x: orginX1,\n        y: orginY1\n      },\n      start: {\n        x: orginX3,\n        y: startY\n      },\n      width: textWidth,\n      height: config.fontSize,\n      text: item.text,\n      color: item.color\n    };\n    lastTextObject = avoidCollision(textObject, lastTextObject);\n    textObjectCollection.push(lastTextObject);\n  });\n  textObjectCollection.forEach(function (item) {\n    var lineStartPoistion = convertCoordinateOrigin(item.lineStart.x, item.lineStart.y, center);\n    var lineEndPoistion = convertCoordinateOrigin(item.lineEnd.x, item.lineEnd.y, center);\n    var textPosition = convertCoordinateOrigin(item.start.x, item.start.y, center);\n    context.setLineWidth(1 * opts.pixelRatio);\n    context.setFontSize(config.fontSize);\n    context.beginPath();\n    context.setStrokeStyle(item.color);\n    context.setFillStyle(item.color);\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\n    var curveStartX = item.start.x < 0 ? textPosition.x + item.width : textPosition.x;\n    var textStartX = item.start.x < 0 ? textPosition.x - 5 : textPosition.x + 5;\n    context.quadraticCurveTo(lineEndPoistion.x, lineEndPoistion.y, curveStartX, textPosition.y);\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\n    context.stroke();\n    context.closePath();\n    context.beginPath();\n    context.moveTo(textPosition.x + item.width, textPosition.y);\n    context.arc(curveStartX, textPosition.y, 2, 0, 2 * Math.PI);\n    context.closePath();\n    context.fill();\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle('#666666');\n    context.fillText(item.text, textStartX, textPosition.y + 3);\n    context.closePath();\n    context.stroke();\n    context.closePath();\n  });\n}\n\nfunction drawToolTipSplitLine(offsetX, opts, config, context) {\n  var toolTipOption = opts.extra.tooltip || {};\n  toolTipOption.gridType = toolTipOption.gridType == undefined ? 'solid' : toolTipOption.gridType;\n  toolTipOption.dashLength = toolTipOption.dashLength == undefined ? 4 : toolTipOption.dashLength;\n  var startY = config.padding;\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n\n  if (toolTipOption.gridType == 'dash') {\n    context.setLineDash([toolTipOption.dashLength, toolTipOption.dashLength]);\n  }\n\n  context.beginPath();\n  context.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\n  context.setLineWidth(1 * opts.pixelRatio);\n  context.moveTo(offsetX, startY);\n  context.lineTo(offsetX, endY);\n  context.closePath();\n  context.stroke();\n  context.setLineDash([]);\n\n  if (toolTipOption.xAxisLabel) {\n    var lableText = opts.categories[opts.tooltip.index];\n    context.setFontSize(config.fontSize);\n    var textWidth = context.measureText(lableText).width;\n    var textX = offsetX - config.toolTipPadding - 0.5 * textWidth;\n    var textY = endY;\n    context.beginPath();\n    context.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\n    context.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\n    context.setLineWidth(1 * opts.pixelRatio);\n    context.rect(textX, textY, textWidth + 2 * config.toolTipPadding, config.fontSize + 2 * config.toolTipPadding);\n    context.closePath();\n    context.stroke();\n    context.fill();\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(toolTipOption.labelFontColor || config.fontColor);\n    context.fillText(lableText, textX + 2 * config.toolTipPadding, textY + config.toolTipPadding + config.fontSize);\n    context.closePath();\n    context.stroke();\n  }\n}\n\nfunction drawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints) {\n  var toolTipOption = opts.extra.tooltip || {};\n  toolTipOption.gridType = toolTipOption.gridType == undefined ? 'solid' : toolTipOption.gridType;\n  toolTipOption.dashLength = toolTipOption.dashLength == undefined ? 4 : toolTipOption.dashLength;\n  var startX = config.padding + config.yAxisWidth + config.yAxisTitleWidth;\n  var endX = opts.width - config.padding;\n\n  if (toolTipOption.gridType == 'dash') {\n    context.setLineDash([toolTipOption.dashLength, toolTipOption.dashLength]);\n  }\n\n  context.beginPath();\n  context.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\n  context.setLineWidth(1 * opts.pixelRatio);\n  context.moveTo(startX, opts.tooltip.offset.y);\n  context.lineTo(endX, opts.tooltip.offset.y);\n  context.closePath();\n  context.stroke();\n  context.setLineDash([]);\n\n  if (toolTipOption.yAxisLabel) {\n    var lableText = calTooltipYAxisData(opts.tooltip.offset.y, opts.series, opts, config, eachSpacing);\n    context.setFontSize(config.fontSize);\n    var textWidth = context.measureText(lableText).width;\n    var textX = startX - 2 * config.toolTipPadding - textWidth;\n    var textY = opts.tooltip.offset.y;\n    context.beginPath();\n    context.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\n    context.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\n    context.setLineWidth(1 * opts.pixelRatio);\n    context.rect(textX, textY - 0.5 * config.fontSize - config.toolTipPadding, textWidth + 2 * config.toolTipPadding, config.fontSize + 2 * config.toolTipPadding);\n    context.closePath();\n    context.stroke();\n    context.fill();\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(toolTipOption.labelFontColor || config.fontColor);\n    context.fillText(lableText, textX + config.toolTipPadding, textY + 0.5 * config.fontSize);\n    context.closePath();\n    context.stroke();\n  }\n}\n\nfunction drawToolTipSplitArea(offsetX, opts, config, context, eachSpacing) {\n  var toolTipOption = opts.extra.tooltip || {\n    activeBgColor: '#000000',\n    activeBgOpacity: 0.08\n  };\n  toolTipOption.activeBgColor = toolTipOption.activeBgColor ? toolTipOption.activeBgColor : '#000000';\n  toolTipOption.activeBgOpacity = toolTipOption.activeBgOpacity ? toolTipOption.activeBgOpacity : 0.08;\n  var startY = config.padding;\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n  context.beginPath();\n  context.setFillStyle(hexToRgb(toolTipOption.activeBgColor, toolTipOption.activeBgOpacity));\n  context.rect(offsetX - eachSpacing / 2, startY, eachSpacing, endY - startY);\n  context.closePath();\n  context.fill();\n}\n\nfunction drawToolTip(textList, offset, opts, config, context, eachSpacing, xAxisPoints) {\n  var toolTipOption = opts.extra.tooltip || {\n    bgColor: '#000000',\n    bgOpacity: 0.7,\n    fontColor: '#FFFFFF'\n  };\n  toolTipOption.bgColor = toolTipOption.bgColor ? toolTipOption.bgColor : '#000000';\n  toolTipOption.bgOpacity = toolTipOption.bgOpacity ? toolTipOption.bgOpacity : 0.7;\n  toolTipOption.fontColor = toolTipOption.fontColor ? toolTipOption.fontColor : '#FFFFFF';\n  var legendWidth = 4 * opts.pixelRatio;\n  var legendMarginRight = 5 * opts.pixelRatio;\n  var arrowWidth = 8 * opts.pixelRatio;\n  var isOverRightBorder = false;\n\n  if (opts.type == 'line' || opts.type == 'area' || opts.type == 'candle' || opts.type == 'mix') {\n    drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n  }\n\n  offset = assign({\n    x: 0,\n    y: 0\n  }, offset);\n  offset.y -= 8 * opts.pixelRatio;\n  var textWidth = textList.map(function (item) {\n    return measureText(item.text);\n  });\n  var toolTipWidth = legendWidth + legendMarginRight + 4 * config.toolTipPadding + Math.max.apply(null, textWidth);\n  var toolTipHeight = 2 * config.toolTipPadding + textList.length * config.toolTipLineHeight; // if beyond the right border\n\n  if (offset.x - Math.abs(opts._scrollDistance_) + arrowWidth + toolTipWidth > opts.width) {\n    isOverRightBorder = true;\n  } // draw background rect\n\n\n  context.beginPath();\n  context.setFillStyle(hexToRgb(toolTipOption.bgColor || config.toolTipBackground, toolTipOption.bgOpacity || config.toolTipOpacity));\n\n  if (isOverRightBorder) {\n    context.moveTo(offset.x, offset.y + 10 * opts.pixelRatio);\n    context.lineTo(offset.x - arrowWidth, offset.y + 10 * opts.pixelRatio - 5 * opts.pixelRatio);\n    context.lineTo(offset.x - arrowWidth, offset.y);\n    context.lineTo(offset.x - arrowWidth - Math.round(toolTipWidth), offset.y);\n    context.lineTo(offset.x - arrowWidth - Math.round(toolTipWidth), offset.y + toolTipHeight);\n    context.lineTo(offset.x - arrowWidth, offset.y + toolTipHeight);\n    context.lineTo(offset.x - arrowWidth, offset.y + 10 * opts.pixelRatio + 5 * opts.pixelRatio);\n    context.lineTo(offset.x, offset.y + 10 * opts.pixelRatio);\n  } else {\n    context.moveTo(offset.x, offset.y + 10 * opts.pixelRatio);\n    context.lineTo(offset.x + arrowWidth, offset.y + 10 * opts.pixelRatio - 5 * opts.pixelRatio);\n    context.lineTo(offset.x + arrowWidth, offset.y);\n    context.lineTo(offset.x + arrowWidth + Math.round(toolTipWidth), offset.y);\n    context.lineTo(offset.x + arrowWidth + Math.round(toolTipWidth), offset.y + toolTipHeight);\n    context.lineTo(offset.x + arrowWidth, offset.y + toolTipHeight);\n    context.lineTo(offset.x + arrowWidth, offset.y + 10 * opts.pixelRatio + 5 * opts.pixelRatio);\n    context.lineTo(offset.x, offset.y + 10 * opts.pixelRatio);\n  }\n\n  context.closePath();\n  context.fill(); // draw legend\n\n  textList.forEach(function (item, index) {\n    if (item.color !== null) {\n      context.beginPath();\n      context.setFillStyle(item.color);\n      var startX = offset.x + arrowWidth + 2 * config.toolTipPadding;\n      var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding + 1;\n\n      if (isOverRightBorder) {\n        startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding;\n      }\n\n      context.fillRect(startX, startY, legendWidth, config.fontSize);\n      context.closePath();\n    }\n  }); // draw text list\n\n  textList.forEach(function (item, index) {\n    var startX = offset.x + arrowWidth + 2 * config.toolTipPadding + legendWidth + legendMarginRight;\n\n    if (isOverRightBorder) {\n      startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding + +legendWidth + legendMarginRight;\n    }\n\n    var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding;\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(toolTipOption.fontColor);\n    context.fillText(item.text, startX, startY + config.fontSize);\n    context.closePath();\n    context.stroke();\n  });\n}\n\nfunction drawYAxisTitle(title, opts, config, context) {\n  var startX = config.xAxisHeight + (opts.height - config.xAxisHeight - measureText(title)) / 2;\n  context.save();\n  context.beginPath();\n  context.setFontSize(config.fontSize);\n  context.setFillStyle(opts.yAxis.titleFontColor || '#333333');\n  context.translate(0, opts.height);\n  context.rotate(-90 * Math.PI / 180);\n  context.fillText(title, startX, config.padding + 0.5 * config.fontSize);\n  context.closePath();\n  context.stroke();\n  context.restore();\n}\n\nfunction drawColumnDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var columnOption = opts.extra.column || {\n    type: {},\n    meter: {}\n  };\n  columnOption.type = columnOption.type == undefined ? 'group' : columnOption.type;\n  columnOption.meter = columnOption.meter || {};\n  columnOption.meter.border = columnOption.meter.border == undefined ? 4 : columnOption.meter.border;\n  columnOption.meter.fillColor = columnOption.meter.fillColor == undefined ? '#FFFFFF' : columnOption.meter.fillColor;\n\n  var _calYAxisData = calYAxisData(series, opts, config),\n      ranges = _calYAxisData.ranges;\n\n  var _getXAxisPoints = getXAxisPoints(opts.categories, opts, config),\n      xAxisPoints = _getXAxisPoints.xAxisPoints,\n      eachSpacing = _getXAxisPoints.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  var calPoints = [];\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTipSplitArea(opts.tooltip.offset.x, opts, config, context, eachSpacing);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n\n    switch (columnOption.type) {\n      case 'group':\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n        var tooltipPoints = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\n        calPoints.push(tooltipPoints);\n        points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\n        points.forEach(function (item, index) {\n          if (item !== null) {\n            context.beginPath();\n            context.setFillStyle(item.color || eachSeries.color);\n            var startX = item.x - item.width / 2 + 1;\n            var height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\n            context.moveTo(startX, item.y);\n            context.fillRect(startX, item.y, item.width - 2, height);\n            context.closePath();\n            context.fill();\n          }\n        });\n        break;\n\n      case 'stack':\n        // 绘制堆叠数据图\n        var points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\n        calPoints.push(points);\n        points = fixColumeStackData(points, eachSpacing, series.length, seriesIndex, config, opts, series);\n        points.forEach(function (item, index) {\n          if (item !== null) {\n            context.beginPath();\n            context.setFillStyle(item.color || eachSeries.color);\n            var startX = item.x - item.width / 2 + 1;\n            var height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\n            var height0 = opts.height - item.y0 - config.padding - config.xAxisHeight - config.legendHeight;\n\n            if (seriesIndex > 0) {\n              height -= height0;\n            }\n\n            context.moveTo(startX, item.y);\n            context.fillRect(startX, item.y, item.width - 2, height);\n            context.closePath();\n            context.fill();\n          }\n        });\n        break;\n\n      case 'meter':\n        // 绘制温度计数据图\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n        calPoints.push(points);\n        points = fixColumeMeterData(points, eachSpacing, series.length, seriesIndex, config, opts, columnOption.meter.border);\n\n        if (seriesIndex == 0) {\n          points.forEach(function (item, index) {\n            if (item !== null) {\n              //画背景颜色\n              context.beginPath();\n              context.setFillStyle(columnOption.meter.fillColor);\n              var startX = item.x - item.width / 2 + 1;\n              var height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\n              context.moveTo(startX, item.y);\n              context.fillRect(startX, item.y, item.width - 2, height);\n              context.closePath();\n              context.fill(); //画边框线\n\n              context.beginPath();\n              context.setStrokeStyle(eachSeries.color);\n              context.setLineWidth(columnOption.meter.border * opts.pixelRatio);\n              context.moveTo(startX + columnOption.meter.border * 0.5, item.y + height);\n              context.lineTo(startX + columnOption.meter.border * 0.5, item.y + columnOption.meter.border * 0.5);\n              context.lineTo(startX + item.width - columnOption.meter.border, item.y + columnOption.meter.border * 0.5);\n              context.lineTo(startX + item.width - columnOption.meter.border, item.y + height);\n              context.stroke();\n            }\n          });\n        } else {\n          points.forEach(function (item, index) {\n            if (item !== null) {\n              context.beginPath();\n              context.setFillStyle(item.color || eachSeries.color);\n              var startX = item.x - item.width / 2 + 1;\n              var height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\n              context.moveTo(startX, item.y);\n              context.rect(startX, item.y, item.width - 2, height);\n              context.closePath();\n              context.fill();\n            }\n          });\n        }\n\n        break;\n    }\n  });\n\n  if (opts.dataLabel !== false && process === 1) {\n    series.forEach(function (eachSeries, seriesIndex) {\n      var data = eachSeries.data;\n\n      switch (columnOption.type) {\n        case 'group':\n          var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n          points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\n          drawPointText(points, eachSeries, config, context);\n          break;\n\n        case 'stack':\n          var points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\n          drawPointText(points, eachSeries, config, context);\n          break;\n\n        case 'meter':\n          var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n          drawPointText(points, eachSeries, config, context);\n          break;\n      }\n    });\n  }\n\n  context.restore();\n  return {\n    xAxisPoints: xAxisPoints,\n    calPoints: calPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawCandleDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var candleOption = opts.extra.candle || {\n    color: {},\n    average: {}\n  };\n  candleOption.color.upLine = candleOption.color.upLine ? candleOption.color.upLine : '#f04864';\n  candleOption.color.upFill = candleOption.color.upFill ? candleOption.color.upFill : '#f04864';\n  candleOption.color.downLine = candleOption.color.downLine ? candleOption.color.downLine : '#2fc25b';\n  candleOption.color.downFill = candleOption.color.downFill ? candleOption.color.downFill : '#2fc25b';\n  candleOption.average.show = candleOption.average.show === true ? true : false;\n  candleOption.average.name = candleOption.average.name ? candleOption.average.name : [];\n  candleOption.average.day = candleOption.average.day ? candleOption.average.day : [];\n  candleOption.average.color = candleOption.average.color ? candleOption.average.color : ['#1890ff', '#2fc25b', '#facc14', '#f04864', '#8543e0', '#90ed7d'];\n  opts.extra.candle = candleOption;\n\n  var _calYAxisData5 = calYAxisData(series, opts, config),\n      ranges = _calYAxisData5.ranges;\n\n  var _getXAxisPoints5 = getXAxisPoints(opts.categories, opts, config),\n      xAxisPoints = _getXAxisPoints5.xAxisPoints,\n      eachSpacing = _getXAxisPoints5.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  var calPoints = [];\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    calPoints.push(points);\n    var splitPointList = splitPoints(points);\n    splitPointList = splitPointList[0];\n    splitPointList.forEach(function (points, index) {\n      context.beginPath(); //如果上涨\n\n      if (data[index][1] - data[index][0] > 0) {\n        context.setStrokeStyle(candleOption.color.upLine);\n        context.setFillStyle(candleOption.color.upFill);\n        context.setLineWidth(1 * opts.pixelRatio);\n        context.moveTo(points[3].x, points[3].y); //顶点\n\n        context.lineTo(points[1].x, points[1].y); //收盘中间点\n\n        context.lineTo(points[1].x - eachSpacing / 4, points[1].y); //收盘左侧点\n\n        context.lineTo(points[0].x - eachSpacing / 4, points[0].y); //开盘左侧点\n\n        context.lineTo(points[0].x, points[0].y); //开盘中间点\n\n        context.lineTo(points[2].x, points[2].y); //底点\n\n        context.lineTo(points[0].x, points[0].y); //开盘中间点\n\n        context.lineTo(points[0].x + eachSpacing / 4, points[0].y); //开盘右侧点\n\n        context.lineTo(points[1].x + eachSpacing / 4, points[1].y); //收盘右侧点\n\n        context.lineTo(points[1].x, points[1].y); //收盘中间点\n\n        context.moveTo(points[3].x, points[3].y); //顶点\n      } else {\n        context.setStrokeStyle(candleOption.color.downLine);\n        context.setFillStyle(candleOption.color.downFill);\n        context.setLineWidth(1 * opts.pixelRatio);\n        context.moveTo(points[3].x, points[3].y); //顶点\n\n        context.lineTo(points[0].x, points[0].y); //开盘中间点\n\n        context.lineTo(points[0].x - eachSpacing / 4, points[0].y); //开盘左侧点\n\n        context.lineTo(points[1].x - eachSpacing / 4, points[1].y); //收盘左侧点\n\n        context.lineTo(points[1].x, points[1].y); //收盘中间点\n\n        context.lineTo(points[2].x, points[2].y); //底点\n\n        context.lineTo(points[1].x, points[1].y); //收盘中间点\n\n        context.lineTo(points[1].x + eachSpacing / 4, points[1].y); //收盘右侧点\n\n        context.lineTo(points[0].x + eachSpacing / 4, points[0].y); //开盘右侧点\n\n        context.lineTo(points[0].x, points[0].y); //开盘中间点\n\n        context.moveTo(points[3].x, points[3].y); //顶点\n      }\n\n      context.closePath();\n      context.fill();\n      context.stroke();\n    });\n  });\n  context.restore(); //画均线\n\n  if (candleOption.average.show) {}\n\n  return {\n    xAxisPoints: xAxisPoints,\n    calPoints: calPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawAreaDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var areaOption = opts.extra.area || {\n    type: 'straight',\n    opacity: 0.5,\n    addLine: false,\n    width: 2\n  };\n  areaOption.type = areaOption.type ? areaOption.type : 'straight';\n  areaOption.opacity = areaOption.opacity ? areaOption.opacity : 0.2;\n  areaOption.addLine = areaOption.addLine == true ? true : false;\n  areaOption.width = areaOption.width ? areaOption.width : 2;\n\n  var _calYAxisData2 = calYAxisData(series, opts, config),\n      ranges = _calYAxisData2.ranges;\n\n  var _getXAxisPoints2 = getXAxisPoints(opts.categories, opts, config),\n      xAxisPoints = _getXAxisPoints2.xAxisPoints,\n      eachSpacing = _getXAxisPoints2.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n  var calPoints = [];\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    calPoints.push(points);\n    var splitPointList = splitPoints(points);\n    splitPointList.forEach(function (points) {\n      // 绘制区域数据\n      context.beginPath();\n      context.setStrokeStyle(hexToRgb(eachSeries.color, areaOption.opacity));\n      context.setFillStyle(hexToRgb(eachSeries.color, areaOption.opacity));\n      context.setLineWidth(areaOption.width * opts.pixelRatio);\n\n      if (points.length > 1) {\n        var firstPoint = points[0];\n        var lastPoint = points[points.length - 1];\n        context.moveTo(firstPoint.x, firstPoint.y);\n\n        if (areaOption.type === 'curve') {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              var ctrlPoint = createCurveControlPoints(points, index - 1);\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n            }\n          });\n        } else {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              context.lineTo(item.x, item.y);\n            }\n          });\n        }\n\n        context.lineTo(lastPoint.x, endY);\n        context.lineTo(firstPoint.x, endY);\n        context.lineTo(firstPoint.x, firstPoint.y);\n      } else {\n        var item = points[0];\n        context.moveTo(item.x - eachSpacing / 2, item.y);\n        context.lineTo(item.x + eachSpacing / 2, item.y);\n        context.lineTo(item.x + eachSpacing / 2, endY);\n        context.lineTo(item.x - eachSpacing / 2, endY);\n        context.moveTo(item.x - eachSpacing / 2, item.y);\n      }\n\n      context.closePath();\n      context.fill(); //画连线\n\n      if (areaOption.addLine) {\n        context.beginPath();\n        context.setStrokeStyle(eachSeries.color);\n        context.setLineWidth(areaOption.width * opts.pixelRatio);\n\n        if (points.length === 1) {\n          context.moveTo(points[0].x, points[0].y);\n          context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\n        } else {\n          context.moveTo(points[0].x, points[0].y);\n\n          if (areaOption.type === 'curve') {\n            points.forEach(function (item, index) {\n              if (index > 0) {\n                var ctrlPoint = createCurveControlPoints(points, index - 1);\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n              }\n            });\n          } else {\n            points.forEach(function (item, index) {\n              if (index > 0) {\n                context.lineTo(item.x, item.y);\n              }\n            });\n          }\n\n          context.moveTo(points[0].x, points[0].y);\n        }\n\n        context.closePath();\n        context.stroke();\n      }\n    }); //画点\n\n    if (opts.dataPointShape !== false) {\n      var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n      drawPointShape(points, eachSeries.color, shape, context, opts);\n    }\n  });\n\n  if (opts.dataLabel !== false && process === 1) {\n    series.forEach(function (eachSeries, seriesIndex) {\n      var data = eachSeries.data;\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n      drawPointText(points, eachSeries, config, context);\n    });\n  }\n\n  context.restore();\n  return {\n    xAxisPoints: xAxisPoints,\n    calPoints: calPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawLineDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var lineOption = opts.extra.line || {\n    type: 'straight',\n    width: 2\n  };\n  lineOption.type = lineOption.type ? lineOption.type : 'straight';\n  lineOption.width = lineOption.width ? lineOption.width : 2;\n\n  var _calYAxisData3 = calYAxisData(series, opts, config),\n      ranges = _calYAxisData3.ranges;\n\n  var _getXAxisPoints3 = getXAxisPoints(opts.categories, opts, config),\n      xAxisPoints = _getXAxisPoints3.xAxisPoints,\n      eachSpacing = _getXAxisPoints3.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  var calPoints = [];\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    calPoints.push(points);\n    var splitPointList = splitPoints(points);\n    splitPointList.forEach(function (points, index) {\n      context.beginPath();\n      context.setStrokeStyle(eachSeries.color);\n      context.setLineWidth(lineOption.width * opts.pixelRatio);\n\n      if (points.length === 1) {\n        context.moveTo(points[0].x, points[0].y);\n        context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\n      } else {\n        context.moveTo(points[0].x, points[0].y);\n\n        if (lineOption.type === 'curve') {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              var ctrlPoint = createCurveControlPoints(points, index - 1);\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n            }\n          });\n        } else {\n          points.forEach(function (item, index) {\n            if (index > 0) {\n              context.lineTo(item.x, item.y);\n            }\n          });\n        }\n\n        context.moveTo(points[0].x, points[0].y);\n      }\n\n      context.closePath();\n      context.stroke();\n    });\n\n    if (opts.dataPointShape !== false) {\n      var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n      drawPointShape(points, eachSeries.color, shape, context, opts);\n    }\n  });\n\n  if (opts.dataLabel !== false && process === 1) {\n    series.forEach(function (eachSeries, seriesIndex) {\n      var data = eachSeries.data;\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n      drawPointText(points, eachSeries, config, context);\n    });\n  }\n\n  context.restore();\n  return {\n    xAxisPoints: xAxisPoints,\n    calPoints: calPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawMixDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n  var _calYAxisData6 = calYAxisData(series, opts, config),\n      ranges = _calYAxisData6.ranges;\n\n  var _getXAxisPoints6 = getXAxisPoints(opts.categories, opts, config),\n      xAxisPoints = _getXAxisPoints6.xAxisPoints,\n      eachSpacing = _getXAxisPoints6.eachSpacing;\n\n  var minRange = ranges.pop();\n  var maxRange = ranges.shift();\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n  var calPoints = [];\n  var columnIndex = 0;\n  var columnLength = 0;\n  series.forEach(function (eachSeries, seriesIndex) {\n    if (eachSeries.type == 'column') {\n      columnLength += 1;\n    }\n  });\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n  }\n\n  series.forEach(function (eachSeries, seriesIndex) {\n    var data = eachSeries.data;\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n    calPoints.push(points); // 绘制柱状数据图\n\n    if (eachSeries.type == 'column') {\n      points = fixColumeData(points, eachSpacing, columnLength, columnIndex, config, opts);\n      points.forEach(function (item, index) {\n        if (item !== null) {\n          context.beginPath();\n          context.setFillStyle(item.color || eachSeries.color);\n          var startX = item.x - item.width / 2 + 1;\n          var height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\n          context.moveTo(startX, item.y);\n          context.rect(startX, item.y, item.width - 2, height);\n          context.closePath();\n          context.fill();\n        }\n      });\n      columnIndex += 1;\n    } //绘制区域图数据\n\n\n    if (eachSeries.type == 'area') {\n      var splitPointList = splitPoints(points);\n      splitPointList.forEach(function (points) {\n        // 绘制区域数据\n        context.beginPath();\n        context.setStrokeStyle(eachSeries.color);\n        context.setFillStyle(eachSeries.color);\n        context.setGlobalAlpha(0.2);\n        context.setLineWidth(2 * opts.pixelRatio);\n\n        if (points.length > 1) {\n          var firstPoint = points[0];\n          var lastPoint = points[points.length - 1];\n          context.moveTo(firstPoint.x, firstPoint.y);\n\n          if (eachSeries.style === 'curve') {\n            points.forEach(function (item, index) {\n              if (index > 0) {\n                var ctrlPoint = createCurveControlPoints(points, index - 1);\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n              }\n            });\n          } else {\n            points.forEach(function (item, index) {\n              if (index > 0) {\n                context.lineTo(item.x, item.y);\n              }\n            });\n          }\n\n          context.lineTo(lastPoint.x, endY);\n          context.lineTo(firstPoint.x, endY);\n          context.lineTo(firstPoint.x, firstPoint.y);\n        } else {\n          var item = points[0];\n          context.moveTo(item.x - eachSpacing / 2, item.y);\n          context.lineTo(item.x + eachSpacing / 2, item.y);\n          context.lineTo(item.x + eachSpacing / 2, endY);\n          context.lineTo(item.x - eachSpacing / 2, endY);\n          context.moveTo(item.x - eachSpacing / 2, item.y);\n        }\n\n        context.closePath();\n        context.fill();\n        context.setGlobalAlpha(1);\n      });\n    } // 绘制折线数据图\n\n\n    if (eachSeries.type == 'line') {\n      var splitPointList = splitPoints(points);\n      splitPointList.forEach(function (points, index) {\n        context.beginPath();\n        context.setStrokeStyle(eachSeries.color);\n        context.setLineWidth(2 * opts.pixelRatio);\n\n        if (points.length === 1) {\n          context.moveTo(points[0].x, points[0].y);\n          context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\n        } else {\n          context.moveTo(points[0].x, points[0].y);\n\n          if (eachSeries.style == 'curve') {\n            points.forEach(function (item, index) {\n              if (index > 0) {\n                var ctrlPoint = createCurveControlPoints(points, index - 1);\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n              }\n            });\n          } else {\n            points.forEach(function (item, index) {\n              if (index > 0) {\n                context.lineTo(item.x, item.y);\n              }\n            });\n          }\n\n          context.moveTo(points[0].x, points[0].y);\n        }\n\n        context.closePath();\n        context.stroke();\n      });\n    } // 绘制点数据图\n\n\n    if (eachSeries.type == 'point') {\n      var splitPointList = splitPoints(points);\n      splitPointList.forEach(function (points, index) {\n        context.beginPath();\n        context.setStrokeStyle(eachSeries.color);\n        context.setLineWidth(2 * opts.pixelRatio);\n        context.moveTo(points[0].x, points[0].y);\n        context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\n        context.closePath();\n        context.stroke();\n      });\n    }\n\n    if (opts.dataPointShape !== false && eachSeries.type !== 'column') {\n      var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n      drawPointShape(points, eachSeries.color, shape, context, opts);\n    }\n  });\n\n  if (opts.dataLabel !== false && process === 1) {\n    var columnIndex = 0;\n    series.forEach(function (eachSeries, seriesIndex) {\n      var data = eachSeries.data;\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n\n      if (eachSeries.type !== 'column') {\n        drawPointText(points, eachSeries, config, context);\n      } else {\n        points = fixColumeData(points, eachSpacing, columnLength, columnIndex, config, opts);\n        drawPointText(points, eachSeries, config, context);\n        columnIndex += 1;\n      }\n    });\n  }\n\n  context.restore();\n  return {\n    xAxisPoints: xAxisPoints,\n    calPoints: calPoints,\n    eachSpacing: eachSpacing\n  };\n}\n\nfunction drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints) {\n  var toolTipOption = opts.extra.tooltip || {};\n\n  if (toolTipOption.horizentalLine && opts.tooltip && process === 1 && (opts.type == 'line' || opts.type == 'area' || opts.type == 'column' || opts.type == 'candle' || opts.type == 'mix')) {\n    drawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints);\n  }\n\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n    drawToolTip(opts.tooltip.textList, opts.tooltip.offset, opts, config, context, eachSpacing, xAxisPoints);\n  }\n\n  context.restore();\n}\n\nfunction drawXAxis(categories, opts, config, context) {\n  var _getXAxisPoints4 = getXAxisPoints(categories, opts, config),\n      xAxisPoints = _getXAxisPoints4.xAxisPoints,\n      startX = _getXAxisPoints4.startX,\n      endX = _getXAxisPoints4.endX,\n      eachSpacing = _getXAxisPoints4.eachSpacing;\n\n  var startY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n  var endY = config.padding; //绘制滚动条\n\n  if (opts.enableScroll && opts.xAxis.scrollShow) {\n    var scrollY = opts.height - config.padding - config.legendHeight + 6 * opts.pixelRatio;\n    var scrollScreenWidth = endX - startX;\n    var scrollTotalWidth = eachSpacing * (xAxisPoints.length - 1);\n    var scrollWidth = scrollScreenWidth * scrollScreenWidth / scrollTotalWidth;\n    var scrollLeft = 0;\n\n    if (opts._scrollDistance_) {\n      scrollLeft = -opts._scrollDistance_ * scrollScreenWidth / scrollTotalWidth;\n    }\n\n    context.beginPath();\n    context.setLineCap('round');\n    context.setLineWidth(6 * opts.pixelRatio);\n    context.setStrokeStyle(opts.xAxis.scrollBackgroundColor || \"#EFEBEF\");\n    context.moveTo(startX, scrollY);\n    context.lineTo(endX, scrollY);\n    context.stroke();\n    context.closePath();\n    context.beginPath();\n    context.setLineCap('round');\n    context.setLineWidth(6 * opts.pixelRatio);\n    context.setStrokeStyle(opts.xAxis.scrollColor || \"#A6A6A6\");\n    context.moveTo(startX + scrollLeft, scrollY);\n    context.lineTo(startX + scrollLeft + scrollWidth, scrollY);\n    context.stroke();\n    context.setLineCap('butt');\n    context.closePath();\n  }\n\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  context.beginPath();\n  context.setStrokeStyle(opts.xAxis.gridColor || \"#cccccc\");\n  context.setLineCap('butt');\n  context.setLineWidth(1 * opts.pixelRatio);\n\n  if (opts.xAxis.gridType == 'dash') {\n    context.setLineDash([opts.xAxis.dashLength, opts.xAxis.dashLength]);\n  }\n\n  if (opts.xAxis.disableGrid !== true) {\n    if (opts.xAxis.type === 'calibration') {\n      xAxisPoints.forEach(function (item, index) {\n        if (index > 0) {\n          context.moveTo(item - eachSpacing / 2, startY);\n          context.lineTo(item - eachSpacing / 2, startY + 4 * opts.pixelRatio);\n        }\n      });\n    } else {\n      xAxisPoints.forEach(function (item, index) {\n        context.moveTo(item, startY);\n        context.lineTo(item, endY);\n      });\n    }\n  }\n\n  context.closePath();\n  context.stroke();\n  context.setLineDash([]); //不绘制X轴\n\n  if (opts.xAxis.disabled !== true) {\n    // 对X轴列表做抽稀处理\n    var validWidth = opts.width - 2 * config.padding - config.yAxisWidth - config.yAxisTitleWidth;\n    var maxXAxisListLength = Math.min(categories.length, Math.ceil(validWidth / config.fontSize / 1.5));\n    var ratio = Math.ceil(categories.length / maxXAxisListLength);\n    categories = categories.map(function (item, index) {\n      return index % ratio !== 0 ? '' : item;\n    });\n\n    if (config._xAxisTextAngle_ === 0) {\n      categories.forEach(function (item, index) {\n        var offset = eachSpacing / 2 - measureText(item) / 2;\n        context.beginPath();\n        context.setFontSize(config.fontSize);\n        context.setFillStyle(opts.xAxis.fontColor || '#666666');\n        context.fillText(item, xAxisPoints[index] + offset, startY + config.fontSize + 5);\n        context.closePath();\n        context.stroke();\n      });\n    } else {\n      categories.forEach(function (item, index) {\n        context.save();\n        context.beginPath();\n        context.setFontSize(config.fontSize);\n        context.setFillStyle(opts.xAxis.fontColor || '#666666');\n        var textWidth = measureText(item);\n        var offset = eachSpacing / 2 - textWidth;\n\n        var _calRotateTranslate = calRotateTranslate(xAxisPoints[index] + eachSpacing / 2, startY + config.fontSize / 2 + 5, opts.height),\n            transX = _calRotateTranslate.transX,\n            transY = _calRotateTranslate.transY;\n\n        context.rotate(-1 * config._xAxisTextAngle_);\n        context.translate(transX, transY);\n        context.fillText(item, xAxisPoints[index] + offset, startY + config.fontSize + 5);\n        context.closePath();\n        context.stroke();\n        context.restore();\n      });\n    }\n  }\n\n  context.restore();\n}\n\nfunction drawYAxisGrid(categories, opts, config, context) {\n  if (opts.yAxis.disableGrid === true) {\n    return;\n  }\n\n  var spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  var eachSpacing = Math.floor(spacingValid / config.yAxisSplit);\n  var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n  var startX = config.padding + yAxisTotalWidth;\n\n  var _getXAxisPoints4 = getXAxisPoints(categories, opts, config),\n      xAxisPoints = _getXAxisPoints4.xAxisPoints,\n      xAxiseachSpacing = _getXAxisPoints4.eachSpacing;\n\n  var TotalWidth = xAxiseachSpacing * (xAxisPoints.length - 1);\n  var endX = startX + TotalWidth;\n  var points = [];\n\n  for (var i = 0; i < config.yAxisSplit; i++) {\n    points.push(config.padding + eachSpacing * i);\n  }\n\n  points.push(config.padding + eachSpacing * config.yAxisSplit + 2);\n  context.save();\n\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\n    context.translate(opts._scrollDistance_, 0);\n  }\n\n  if (opts.yAxis.gridType == 'dash') {\n    context.setLineDash([opts.yAxis.dashLength, opts.yAxis.dashLength]);\n  }\n\n  context.beginPath();\n  context.setStrokeStyle(opts.yAxis.gridColor || \"#cccccc\");\n  context.setLineWidth(1 * opts.pixelRatio);\n  points.forEach(function (item, index) {\n    context.moveTo(startX, item);\n    context.lineTo(endX, item);\n  });\n  context.closePath();\n  context.stroke();\n  context.setLineDash([]);\n  context.restore();\n}\n\nfunction drawYAxis(series, opts, config, context) {\n  if (opts.yAxis.disabled === true) {\n    return;\n  }\n\n  var _calYAxisData4 = calYAxisData(series, opts, config),\n      rangesFormat = _calYAxisData4.rangesFormat;\n\n  var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n  var spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n  var eachSpacing = Math.floor(spacingValid / config.yAxisSplit);\n  var startX = config.padding + yAxisTotalWidth;\n  var endX = opts.width - config.padding;\n  var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight + config.xAxisTextPadding; // set YAxis background\n\n  context.beginPath();\n  context.setFillStyle(opts.background || '#ffffff');\n\n  if (opts._scrollDistance_ < 0) {\n    context.fillRect(0, 0, startX, endY + config.xAxisHeight);\n  }\n\n  context.fillRect(endX, 0, opts.width, endY + config.xAxisHeight);\n  context.closePath();\n  context.stroke();\n  var points = [];\n\n  for (var i = 0; i <= config.yAxisSplit; i++) {\n    points.push(config.padding + eachSpacing * i);\n  }\n\n  rangesFormat.forEach(function (item, index) {\n    var pos = points[index] ? points[index] : endY;\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(opts.yAxis.fontColor || '#666666');\n    context.fillText(item, config.padding + config.yAxisTitleWidth, pos + config.fontSize / 2);\n    context.closePath();\n    context.stroke();\n  });\n\n  if (opts.yAxis.title) {\n    drawYAxisTitle(opts.yAxis.title, opts, config, context);\n  }\n}\n\nfunction drawLegend(series, opts, config, context) {\n  if (opts.legend === false) {\n    return;\n  } // each legend shape width 15px\n  // the spacing between shape and text in each legend is the `padding`\n  // each legend spacing is the `padding`\n  // legend margin top `config.padding`\n\n\n  var _calLegendData = calLegendData(series, opts, config),\n      legendList = _calLegendData.legendList;\n\n  var padding = 5 * opts.pixelRatio;\n  var marginTop = 10 * opts.pixelRatio;\n  var shapeWidth = 15 * opts.pixelRatio;\n  legendList.forEach(function (itemList, listIndex) {\n    var width = 0;\n    itemList.forEach(function (item) {\n      item.name = item.name || 'undefined';\n      width += 3 * padding + measureText(item.name) + shapeWidth;\n    });\n    var startX = (opts.width - width) / 2 + padding;\n    var startY = opts.height - config.padding - config.legendHeight + listIndex * (config.fontSize + marginTop) + padding + marginTop;\n    context.setFontSize(config.fontSize);\n    itemList.forEach(function (item) {\n      switch (opts.type) {\n        case 'line':\n          context.beginPath();\n          context.setLineWidth(1 * opts.pixelRatio);\n          context.setStrokeStyle(item.color);\n          context.setFillStyle(item.color);\n          context.moveTo(startX + 7.5 * opts.pixelRatio, startY + 5 * opts.pixelRatio);\n          context.arc(startX + 7.5 * opts.pixelRatio, startY + 5 * opts.pixelRatio, 6 * opts.pixelRatio, 0, 2 * Math.PI);\n          context.closePath();\n          context.fill();\n          context.stroke();\n          break;\n\n        case 'pie':\n          context.beginPath();\n          context.setLineWidth(1 * opts.pixelRatio);\n          context.setStrokeStyle(item.color);\n          context.setFillStyle(item.color);\n          context.moveTo(startX + 7.5 * opts.pixelRatio, startY + 5 * opts.pixelRatio);\n          context.arc(startX + 7.5 * opts.pixelRatio, startY + 5 * opts.pixelRatio, 6 * opts.pixelRatio, 0, 2 * Math.PI);\n          context.closePath();\n          context.fill();\n          context.stroke();\n          break;\n\n        case 'ring':\n          context.beginPath();\n          context.setLineWidth(1 * opts.pixelRatio);\n          context.setStrokeStyle(item.color);\n          context.setFillStyle(item.color);\n          context.moveTo(startX + 7.5 * opts.pixelRatio, startY + 5 * opts.pixelRatio);\n          context.arc(startX + 7.5 * opts.pixelRatio, startY + 5 * opts.pixelRatio, 6 * opts.pixelRatio, 0, 2 * Math.PI);\n          context.closePath();\n          context.fill();\n          context.stroke();\n          break;\n        //圆弧进度图不显示图例\n\n        case 'gauge':\n          break;\n\n        case 'arcbar':\n          break;\n\n        default:\n          context.beginPath();\n          context.setLineWidth(1 * opts.pixelRatio);\n          context.setStrokeStyle(item.color);\n          context.setFillStyle(item.color);\n          context.moveTo(startX, startY);\n          context.fillRect(startX, startY, 15 * opts.pixelRatio, 10 * opts.pixelRatio);\n          context.closePath();\n          context.fill();\n          context.stroke();\n      }\n\n      startX += padding + shapeWidth;\n      context.beginPath();\n      context.setFontSize(config.fontSize);\n      context.setFillStyle(opts.extra.legendTextColor || '#333333');\n      context.fillText(item.name, startX, startY + 6 * opts.pixelRatio + 3 * opts.pixelRatio);\n      context.closePath();\n      context.stroke();\n      startX += measureText(item.name) + 2 * padding;\n    });\n  });\n}\n\nfunction drawPieDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var pieOption = opts.extra.pie || {};\n  series = getPieDataPoints(series, process);\n  var centerPosition = {\n    x: opts.width / 2,\n    y: (opts.height - config.legendHeight) / 2\n  };\n  var radius = Math.min(centerPosition.x - config.pieChartLinePadding - config.pieChartTextPadding - config._pieTextMaxLength_, centerPosition.y - config.pieChartLinePadding - config.pieChartTextPadding);\n\n  if (opts.dataLabel) {\n    radius -= 10;\n  } else {\n    radius -= 2 * config.padding;\n  }\n\n  var activeRadius = radius + config.pieChartLinePadding / 2;\n  series = series.map(function (eachSeries) {\n    eachSeries._start_ += (pieOption.offsetAngle || 0) * Math.PI / 180;\n    return eachSeries;\n  });\n  series.forEach(function (eachSeries, seriesIndex) {\n    if (opts.tooltip) {\n      if (opts.tooltip.index == seriesIndex) {\n        context.beginPath();\n        context.setFillStyle(hexToRgb(eachSeries.color, opts.extra.pie.activeOpacity || 0.5));\n        context.moveTo(centerPosition.x, centerPosition.y);\n        context.arc(centerPosition.x, centerPosition.y, activeRadius, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\n        context.closePath();\n        context.fill();\n      }\n    }\n\n    context.beginPath();\n    context.setLineWidth(2 * opts.pixelRatio);\n    context.lineJoin = \"round\";\n    context.setStrokeStyle('#ffffff');\n    context.setFillStyle(eachSeries.color);\n    context.moveTo(centerPosition.x, centerPosition.y);\n    context.arc(centerPosition.x, centerPosition.y, radius, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\n    context.closePath();\n    context.fill();\n\n    if (opts.disablePieStroke !== true) {\n      context.stroke();\n    }\n  });\n\n  if (opts.type === 'ring') {\n    var innerPieWidth = radius * 0.6;\n\n    if (typeof opts.extra.pie.ringWidth === 'number' && opts.extra.pie.ringWidth > 0) {\n      innerPieWidth = Math.max(0, radius - opts.extra.pie.ringWidth);\n    }\n\n    context.beginPath();\n    context.setFillStyle(opts.background || '#ffffff');\n    context.moveTo(centerPosition.x, centerPosition.y);\n    context.arc(centerPosition.x, centerPosition.y, innerPieWidth, 0, 2 * Math.PI);\n    context.closePath();\n    context.fill();\n  }\n\n  if (opts.dataLabel !== false && process === 1) {\n    // fix https://github.com/xiaolin3303/wx-charts/issues/132\n    var valid = false;\n\n    for (var i = 0, len = series.length; i < len; i++) {\n      if (series[i].data > 0) {\n        valid = true;\n        break;\n      }\n    }\n\n    if (valid) {\n      drawPieText(series, opts, config, context, radius, centerPosition);\n    }\n  }\n\n  if (process === 1 && opts.type === 'ring') {\n    drawRingTitle(opts, config, context);\n  }\n\n  return {\n    center: centerPosition,\n    radius: radius,\n    series: series\n  };\n}\n\nfunction drawArcbarDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var arcbarOption = opts.extra.arcbar || {};\n  arcbarOption.startAngle = arcbarOption.startAngle ? arcbarOption.startAngle : 0.75;\n  arcbarOption.endAngle = arcbarOption.endAngle ? arcbarOption.endAngle : 0.25;\n  arcbarOption.type = arcbarOption.type ? arcbarOption.type : 'default';\n  series = getArcbarDataPoints(series, arcbarOption, process);\n  var centerPosition = {\n    x: opts.width / 2,\n    y: opts.height / 2\n  };\n  var radius = Math.min(centerPosition.x, centerPosition.y);\n\n  if (typeof arcbarOption.width === 'number' && arcbarOption.width > 0) {\n    arcbarOption.width = arcbarOption.width;\n  } else {\n    arcbarOption.width = 12 * opts.pixelRatio;\n  }\n\n  radius -= config.padding + arcbarOption.width / 2; //背景颜色\n\n  context.setLineWidth(arcbarOption.width); // 设置圆环的宽度\n\n  context.setStrokeStyle(arcbarOption.backgroundColor || '#E9E9E9'); // 设置圆环的颜色\n\n  context.setLineCap('round'); // 设置圆环端点的形状\n\n  context.beginPath(); //开始一个新的路径\n\n  if (arcbarOption.type == 'default') {\n    context.arc(centerPosition.x, centerPosition.y, radius, arcbarOption.startAngle * Math.PI, arcbarOption.endAngle * Math.PI, false);\n  } else {\n    context.arc(centerPosition.x, centerPosition.y, radius, 0, 2 * Math.PI, false);\n  }\n\n  context.stroke(); //对当前路径进行描边\n\n  series.forEach(function (eachSeries) {\n    context.setLineWidth(arcbarOption.width);\n    context.setStrokeStyle(eachSeries.color);\n    context.setLineCap('round');\n    context.beginPath();\n    context.arc(centerPosition.x, centerPosition.y, radius, arcbarOption.startAngle * Math.PI, eachSeries._proportion_ * Math.PI, false);\n    context.stroke();\n  });\n  drawRingTitle(opts, config, context);\n  return {\n    center: centerPosition,\n    radius: radius,\n    series: series\n  };\n}\n\nfunction drawGaugeDataPoints(categories, series, opts, config, context) {\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n  var gaugeOption = opts.extra.gauge || {};\n  gaugeOption.startAngle = gaugeOption.startAngle ? gaugeOption.startAngle : 0.75;\n\n  if (gaugeOption.oldAngle == undefined) {\n    gaugeOption.oldAngle = gaugeOption.startAngle;\n  }\n\n  if (gaugeOption.oldData == undefined) {\n    gaugeOption.oldData = 0;\n  }\n\n  gaugeOption.endAngle = gaugeOption.endAngle ? gaugeOption.endAngle : 0.25;\n  categories = getGaugeAxisPoints(categories, gaugeOption.startAngle, gaugeOption.endAngle);\n  var centerPosition = {\n    x: opts.width / 2,\n    y: opts.height / 2\n  };\n  var radius = Math.min(centerPosition.x, centerPosition.y);\n\n  if (typeof gaugeOption.width === 'number' && gaugeOption.width > 0) {\n    gaugeOption.width = gaugeOption.width;\n  } else {\n    gaugeOption.width = 15 * opts.pixelRatio;\n  }\n\n  radius -= config.padding + gaugeOption.width / 2;\n  var innerRadius = radius - gaugeOption.width; //画背景\n\n  context.setLineWidth(gaugeOption.width);\n  context.setLineCap('butt');\n  categories.forEach(function (eachCategories) {\n    context.beginPath();\n    context.setStrokeStyle(eachCategories.color);\n    context.arc(centerPosition.x, centerPosition.y, radius, eachCategories._startAngle_ * Math.PI, eachCategories._endAngle_ * Math.PI, false);\n    context.stroke();\n  });\n  context.save(); //画刻度线\n\n  var totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\n  gaugeOption.splitLine.fixRadius = gaugeOption.splitLine.fixRadius ? gaugeOption.splitLine.fixRadius : 0;\n  gaugeOption.splitLine.splitNumber = gaugeOption.splitLine.splitNumber ? gaugeOption.splitLine.splitNumber : 10;\n  gaugeOption.splitLine.width = gaugeOption.splitLine.width ? gaugeOption.splitLine.width : 15 * opts.pixelRatio;\n  gaugeOption.splitLine.color = gaugeOption.splitLine.color ? gaugeOption.splitLine.color : '#FFFFFF';\n  gaugeOption.splitLine.childNumber = gaugeOption.splitLine.childNumber ? gaugeOption.splitLine.childNumber : 5;\n  gaugeOption.splitLine.childWidth = gaugeOption.splitLine.childWidth ? gaugeOption.splitLine.childWidth : 5 * opts.pixelRatio;\n  var splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\n  var childAngle = totalAngle / gaugeOption.splitLine.splitNumber / gaugeOption.splitLine.childNumber;\n  var startX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius;\n  var endX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.width;\n  var childendX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.childWidth;\n  context.translate(centerPosition.x, centerPosition.y);\n  context.rotate((gaugeOption.startAngle - 1) * Math.PI);\n\n  for (var i = 0; i < gaugeOption.splitLine.splitNumber + 1; i++) {\n    context.beginPath();\n    context.setStrokeStyle(gaugeOption.splitLine.color);\n    context.setLineWidth(2 * opts.pixelRatio);\n    context.moveTo(startX, 0);\n    context.lineTo(endX, 0);\n    context.stroke();\n    context.rotate(splitAngle * Math.PI);\n  }\n\n  context.restore();\n  context.save();\n  context.translate(centerPosition.x, centerPosition.y);\n  context.rotate((gaugeOption.startAngle - 1) * Math.PI);\n\n  for (var _i = 0; _i < gaugeOption.splitLine.splitNumber * gaugeOption.splitLine.childNumber + 1; _i++) {\n    context.beginPath();\n    context.setStrokeStyle(gaugeOption.splitLine.color);\n    context.setLineWidth(1 * opts.pixelRatio);\n    context.moveTo(startX, 0);\n    context.lineTo(childendX, 0);\n    context.stroke();\n    context.rotate(childAngle * Math.PI);\n  }\n\n  context.restore(); //画指针\n\n  gaugeOption.pointer.width = gaugeOption.pointer.width ? gaugeOption.pointer.width : 15 * opts.pixelRatio;\n\n  if (gaugeOption.pointer.color == undefined || gaugeOption.pointer.color == 'auto') {\n    gaugeOption.pointer.color == 'auto';\n  } else {\n    gaugeOption.pointer.color == gaugeOption.pointer.color;\n  }\n\n  series = getGaugeDataPoints(series, categories, gaugeOption, process);\n  series.forEach(function (eachSeries) {\n    context.save();\n    context.translate(centerPosition.x, centerPosition.y);\n    context.rotate((eachSeries._proportion_ - 1) * Math.PI);\n    context.beginPath();\n    context.setFillStyle(eachSeries.color);\n    context.moveTo(gaugeOption.pointer.width, 0);\n    context.lineTo(0, -gaugeOption.pointer.width / 2);\n    context.lineTo(-innerRadius, 0);\n    context.lineTo(0, gaugeOption.pointer.width / 2);\n    context.lineTo(gaugeOption.pointer.width, 0);\n    context.closePath();\n    context.fill();\n    context.beginPath();\n    context.setFillStyle('#FFFFFF');\n    context.arc(0, 0, gaugeOption.pointer.width / 6, 0, 2 * Math.PI, false);\n    context.fill();\n    context.restore();\n  });\n\n  if (opts.dataLabel !== false) {\n    drawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context);\n  }\n\n  drawRingTitle(opts, config, context);\n\n  if (process === 1 && opts.type === 'gauge') {\n    gaugeOption.oldAngle = series[0]._proportion_;\n    gaugeOption.oldData = series[0].data;\n  }\n\n  return {\n    center: centerPosition,\n    radius: radius,\n    innerRadius: innerRadius,\n    categories: categories,\n    totalAngle: totalAngle\n  };\n}\n\nfunction drawRadarDataPoints(series, opts, config, context) {\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n  var radarOption = opts.extra.radar || {};\n  var coordinateAngle = getRadarCoordinateSeries(opts.categories.length);\n  var centerPosition = {\n    x: opts.width / 2,\n    y: (opts.height - config.legendHeight) / 2\n  };\n  var radius = Math.min(centerPosition.x - (getMaxTextListLength(opts.categories) + config.radarLabelTextMargin), centerPosition.y - config.radarLabelTextMargin);\n  radius -= config.padding; // draw grid\n\n  context.beginPath();\n  context.setLineWidth(1 * opts.pixelRatio);\n  context.setStrokeStyle(radarOption.gridColor || \"#cccccc\");\n  coordinateAngle.forEach(function (angle) {\n    var pos = convertCoordinateOrigin(radius * Math.cos(angle), radius * Math.sin(angle), centerPosition);\n    context.moveTo(centerPosition.x, centerPosition.y);\n    context.lineTo(pos.x, pos.y);\n  });\n  context.stroke();\n  context.closePath(); // draw split line grid\n\n  var _loop = function _loop(i) {\n    var startPos = {};\n    context.beginPath();\n    context.setLineWidth(1 * opts.pixelRatio);\n    context.setStrokeStyle(radarOption.gridColor || \"#cccccc\");\n    coordinateAngle.forEach(function (angle, index) {\n      var pos = convertCoordinateOrigin(radius / config.radarGridCount * i * Math.cos(angle), radius / config.radarGridCount * i * Math.sin(angle), centerPosition);\n\n      if (index === 0) {\n        startPos = pos;\n        context.moveTo(pos.x, pos.y);\n      } else {\n        context.lineTo(pos.x, pos.y);\n      }\n    });\n    context.lineTo(startPos.x, startPos.y);\n    context.stroke();\n    context.closePath();\n  };\n\n  for (var i = 1; i <= config.radarGridCount; i++) {\n    _loop(i);\n  }\n\n  var radarDataPoints = getRadarDataPoints(coordinateAngle, centerPosition, radius, series, opts, process);\n  radarDataPoints.forEach(function (eachSeries, seriesIndex) {\n    // 绘制区域数据\n    context.beginPath();\n    context.setFillStyle(eachSeries.color);\n    context.setGlobalAlpha(0.3);\n    eachSeries.data.forEach(function (item, index) {\n      if (index === 0) {\n        context.moveTo(item.position.x, item.position.y);\n      } else {\n        context.lineTo(item.position.x, item.position.y);\n      }\n    });\n    context.closePath();\n    context.fill();\n    context.setGlobalAlpha(1);\n\n    if (opts.dataPointShape !== false) {\n      var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n      var points = eachSeries.data.map(function (item) {\n        return item.position;\n      });\n      drawPointShape(points, eachSeries.color, shape, context, opts);\n    }\n  }); // draw label text\n\n  drawRadarLabel(coordinateAngle, radius, centerPosition, opts, config, context);\n  return {\n    center: centerPosition,\n    radius: radius,\n    angleList: coordinateAngle\n  };\n}\n\nfunction drawCanvas(opts, context) {\n  context.draw();\n}\n\nvar Timing = {\n  easeIn: function easeIn(pos) {\n    return Math.pow(pos, 3);\n  },\n  easeOut: function easeOut(pos) {\n    return Math.pow(pos - 1, 3) + 1;\n  },\n  easeInOut: function easeInOut(pos) {\n    if ((pos /= 0.5) < 1) {\n      return 0.5 * Math.pow(pos, 3);\n    } else {\n      return 0.5 * (Math.pow(pos - 2, 3) + 2);\n    }\n  },\n  linear: function linear(pos) {\n    return pos;\n  }\n};\n\nfunction Animation(opts) {\n  this.isStop = false;\n  opts.duration = typeof opts.duration === 'undefined' ? 1000 : opts.duration;\n  opts.timing = opts.timing || 'linear';\n  var delay = 17;\n\n  var createAnimationFrame = function createAnimationFrame() {\n    if (typeof requestAnimationFrame !== 'undefined') {\n      return requestAnimationFrame;\n    } else if (typeof setTimeout !== 'undefined') {\n      return function (step, delay) {\n        setTimeout(function () {\n          var timeStamp = +new Date();\n          step(timeStamp);\n        }, delay);\n      };\n    } else {\n      return function (step) {\n        step(null);\n      };\n    }\n  };\n\n  var animationFrame = createAnimationFrame();\n  var startTimeStamp = null;\n\n  var _step = function step(timestamp) {\n    if (timestamp === null || this.isStop === true) {\n      opts.onProcess && opts.onProcess(1);\n      opts.onAnimationFinish && opts.onAnimationFinish();\n      return;\n    }\n\n    if (startTimeStamp === null) {\n      startTimeStamp = timestamp;\n    }\n\n    if (timestamp - startTimeStamp < opts.duration) {\n      var process = (timestamp - startTimeStamp) / opts.duration;\n      var timingFunction = Timing[opts.timing];\n      process = timingFunction(process);\n      opts.onProcess && opts.onProcess(process);\n      animationFrame(_step, delay);\n    } else {\n      opts.onProcess && opts.onProcess(1);\n      opts.onAnimationFinish && opts.onAnimationFinish();\n    }\n  };\n\n  _step = _step.bind(this);\n  animationFrame(_step, delay);\n} // stop animation immediately\n// and tigger onAnimationFinish\n\n\nAnimation.prototype.stop = function () {\n  this.isStop = true;\n};\n\nfunction drawCharts(type, opts, config, context) {\n  var _this = this;\n\n  var series = opts.series;\n  var categories = opts.categories;\n  series = fillSeriesColor(series, config);\n  series = fillSeriesType(series, opts);\n\n  var _calLegendData = calLegendData(series, opts, config),\n      legendHeight = _calLegendData.legendHeight;\n\n  config.legendHeight = legendHeight;\n\n  var _calYAxisData = calYAxisData(series, opts, config),\n      yAxisWidth = _calYAxisData.yAxisWidth;\n\n  config.yAxisWidth = yAxisWidth;\n\n  if (categories && categories.length) {\n    var _calCategoriesData = calCategoriesData(categories, opts, config),\n        xAxisHeight = _calCategoriesData.xAxisHeight,\n        angle = _calCategoriesData.angle;\n\n    config.xAxisHeight = xAxisHeight;\n    config._xAxisTextAngle_ = angle;\n  }\n\n  if (type === 'pie' || type === 'ring') {\n    config._pieTextMaxLength_ = opts.dataLabel === false ? 0 : getPieTextMaxLength(series);\n  }\n\n  var duration = opts.animation ? 1000 : 0;\n  this.animationInstance && this.animationInstance.stop(); //先清空画布,不然百度和支付宝ToolTip有重影\n\n  context.clearRect(0, 0, opts.width, opts.height);\n\n  switch (type) {\n    case 'line':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          drawYAxisGrid(categories, opts, config, context);\n          drawXAxis(categories, opts, config, context);\n\n          var _drawLineDataPoints = drawLineDataPoints(series, opts, config, context, process),\n              xAxisPoints = _drawLineDataPoints.xAxisPoints,\n              calPoints = _drawLineDataPoints.calPoints,\n              eachSpacing = _drawLineDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.calPoints = calPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'mix':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          drawYAxisGrid(categories, opts, config, context);\n          drawXAxis(categories, opts, config, context);\n\n          var _drawMixDataPoints = drawMixDataPoints(series, opts, config, context, process),\n              xAxisPoints = _drawMixDataPoints.xAxisPoints,\n              calPoints = _drawMixDataPoints.calPoints,\n              eachSpacing = _drawMixDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.calPoints = calPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'column':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          drawYAxisGrid(categories, opts, config, context);\n          drawXAxis(categories, opts, config, context);\n\n          var _drawColumnDataPoints = drawColumnDataPoints(series, opts, config, context, process),\n              xAxisPoints = _drawColumnDataPoints.xAxisPoints,\n              calPoints = _drawColumnDataPoints.calPoints,\n              eachSpacing = _drawColumnDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.calPoints = calPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'area':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          drawYAxisGrid(categories, opts, config, context);\n          drawXAxis(categories, opts, config, context);\n\n          var _drawAreaDataPoints = drawAreaDataPoints(series, opts, config, context, process),\n              xAxisPoints = _drawAreaDataPoints.xAxisPoints,\n              calPoints = _drawAreaDataPoints.calPoints,\n              eachSpacing = _drawAreaDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.calPoints = calPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'ring':\n    case 'pie':\n      this.animationInstance = new Animation({\n        timing: 'easeInOut',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          _this.chartData.pieData = drawPieDataPoints(series, opts, config, context, process);\n          drawLegend(opts.series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'radar':\n      this.animationInstance = new Animation({\n        timing: 'easeInOut',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          _this.chartData.radarData = drawRadarDataPoints(series, opts, config, context, process);\n          drawLegend(opts.series, opts, config, context);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'arcbar':\n      this.animationInstance = new Animation({\n        timing: 'easeInOut',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          _this.chartData.arcbarData = drawArcbarDataPoints(series, opts, config, context, process);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'gauge':\n      this.animationInstance = new Animation({\n        timing: 'easeInOut',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          _this.chartData.gaugeData = drawGaugeDataPoints(categories, series, opts, config, context, process);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n\n    case 'candle':\n      this.animationInstance = new Animation({\n        timing: 'easeIn',\n        duration: duration,\n        onProcess: function onProcess(process) {\n          if (opts.rotate) {\n            contextRotate(context, opts);\n          }\n\n          drawYAxisGrid(categories, opts, config, context);\n          drawXAxis(categories, opts, config, context);\n\n          var _drawCandleDataPoints = drawCandleDataPoints(series, opts, config, context, process),\n              xAxisPoints = _drawCandleDataPoints.xAxisPoints,\n              calPoints = _drawCandleDataPoints.calPoints,\n              eachSpacing = _drawCandleDataPoints.eachSpacing;\n\n          _this.chartData.xAxisPoints = xAxisPoints;\n          _this.chartData.calPoints = calPoints;\n          _this.chartData.eachSpacing = eachSpacing;\n          drawLegend(opts.series, opts, config, context);\n          drawYAxis(series, opts, config, context);\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n          drawCanvas(opts, context);\n        },\n        onAnimationFinish: function onAnimationFinish() {\n          _this.event.trigger('renderComplete');\n        }\n      });\n      break;\n  }\n} // simple event implement\n\n\nfunction Event() {\n  this.events = {};\n}\n\nEvent.prototype.addEventListener = function (type, listener) {\n  this.events[type] = this.events[type] || [];\n  this.events[type].push(listener);\n};\n\nEvent.prototype.trigger = function () {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var type = args[0];\n  var params = args.slice(1);\n\n  if (!!this.events[type]) {\n    this.events[type].forEach(function (listener) {\n      try {\n        listener.apply(null, params);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n};\n\nvar Charts = function Charts(opts) {\n  opts.fontSize = opts.fontSize ? opts.fontSize * opts.pixelRatio : 13 * opts.pixelRatio;\n  opts.title = opts.title || {};\n  opts.subtitle = opts.subtitle || {};\n  opts.yAxis = opts.yAxis || {};\n  opts.yAxis.gridType = opts.yAxis.gridType ? opts.yAxis.gridType : 'solid';\n  opts.yAxis.dashLength = opts.yAxis.dashLength ? opts.yAxis.dashLength : 4 * opts.pixelRatio;\n  opts.xAxis = opts.xAxis || {};\n  opts.xAxis.rotateLabel = opts.xAxis.rotateLabel ? true : false;\n  opts.xAxis.type = opts.xAxis.type ? opts.xAxis.type : 'calibration';\n  opts.xAxis.gridType = opts.xAxis.gridType ? opts.xAxis.gridType : 'solid';\n  opts.xAxis.dashLength = opts.xAxis.dashLength ? opts.xAxis.dashLength : 4 * opts.pixelRatio;\n  opts.xAxis.itemCount = opts.xAxis.itemCount ? opts.xAxis.itemCount : 5;\n  opts.xAxis.scrollAlign = opts.xAxis.scrollAlign ? opts.xAxis.scrollAlign : 'left';\n  opts.extra = opts.extra || {};\n  opts.legend = opts.legend === false ? false : true;\n  opts.rotate = opts.rotate ? true : false;\n  opts.animation = opts.animation === false ? false : true;\n  var config$$1 = assign({}, config);\n  config$$1.yAxisTitleWidth = opts.yAxis.disabled !== true && opts.yAxis.title ? config$$1.yAxisTitleWidth : 0;\n\n  if (opts.type == 'pie' || opts.type == 'ring') {\n    config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : opts.extra.pie.lableWidth || config$$1.pieChartLinePadding * opts.pixelRatio;\n  }\n\n  config$$1.pieChartTextPadding = opts.dataLabel === false ? 0 : config$$1.pieChartTextPadding * opts.pixelRatio;\n  config$$1.yAxisSplit = opts.yAxis.splitNumber ? opts.yAxis.splitNumber : config.yAxisSplit; //屏幕旋转\n\n  config$$1.rotate = opts.rotate;\n\n  if (opts.rotate) {\n    var tempWidth = opts.width;\n    var tempHeight = opts.height;\n    opts.width = tempHeight;\n    opts.height = tempWidth;\n  } //适配H5高分屏\n\n\n  config$$1.yAxisWidth = config.yAxisWidth * opts.pixelRatio;\n  config$$1.xAxisHeight = config.xAxisHeight * opts.pixelRatio;\n\n  if (opts.enableScroll && opts.xAxis.scrollShow) {\n    config$$1.xAxisHeight += 6 * opts.pixelRatio;\n  }\n\n  config$$1.xAxisLineHeight = config.xAxisLineHeight * opts.pixelRatio;\n  config$$1.legendHeight = config.legendHeight * opts.pixelRatio; //config$$1.yAxisTitleWidth=config.yAxisTitleWidth*opts.pixelRatio;\n\n  config$$1.padding = config.padding * opts.pixelRatio;\n  config$$1.fontSize = opts.fontSize;\n  config$$1.titleFontSize = config.titleFontSize * opts.pixelRatio;\n  config$$1.subtitleFontSize = config.subtitleFontSize * opts.pixelRatio;\n  config$$1.toolTipPadding = config.toolTipPadding * opts.pixelRatio;\n  config$$1.toolTipLineHeight = config.toolTipLineHeight * opts.pixelRatio;\n  config$$1.columePadding = config.columePadding * opts.pixelRatio; //config$$1.xAxisTextPadding=config.xAxisTextPadding*opts.pixelRatio;\n  //向配置中传入当前pixelRatio及字体大小\n\n  config.pixelRatio = opts.pixelRatio;\n  config.fontSize = opts.fontSize;\n  config.rotate = opts.rotate;\n  this.opts = opts;\n  this.config = config$$1;\n  opts.$this = opts.$this ? opts.$this : this;\n  this.context = uni.createCanvasContext(opts.canvasId, opts.$this); // store calcuated chart data\n  // such as chart point coordinate\n\n  this.chartData = {};\n  this.event = new Event();\n  this.scrollOption = {\n    currentOffset: 0,\n    startTouchX: 0,\n    distance: 0\n  }; //计算右对齐偏移距离\n\n  if (opts.enableScroll && opts.xAxis.scrollAlign == 'right') {\n    var _calYAxisData = calYAxisData(opts.series, opts, config$$1),\n        yAxisWidth = _calYAxisData.yAxisWidth;\n\n    config$$1.yAxisWidth = yAxisWidth;\n    var offsetLeft = 0;\n\n    var _getXAxisPoints0 = getXAxisPoints(opts.categories, opts, config$$1),\n        xAxisPoints = _getXAxisPoints0.xAxisPoints,\n        startX = _getXAxisPoints0.startX,\n        endX = _getXAxisPoints0.endX,\n        eachSpacing = _getXAxisPoints0.eachSpacing;\n\n    var totalWidth = eachSpacing * (xAxisPoints.length - 1);\n    var screenWidth = endX - startX;\n    offsetLeft = screenWidth - totalWidth;\n    this.scrollOption = {\n      currentOffset: offsetLeft,\n      startTouchX: offsetLeft,\n      distance: 0\n    };\n    opts._scrollDistance_ = offsetLeft;\n  }\n\n  drawCharts.call(this, opts.type, opts, config$$1, this.context);\n};\n\nCharts.prototype.updateData = function () {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  this.opts.series = data.series || this.opts.series;\n  this.opts.categories = data.categories || this.opts.categories;\n  var scrollPosition = data.scrollPosition || 'current';\n\n  switch (scrollPosition) {\n    case 'current':\n      this.opts._scrollDistance_ = this.scrollOption.currentOffset;\n      break;\n\n    case 'left':\n      this.opts._scrollDistance_ = 0;\n      this.scrollOption = {\n        currentOffset: 0,\n        startTouchX: 0,\n        distance: 0\n      };\n      break;\n\n    case 'right':\n      var _calYAxisData = calYAxisData(this.opts.series, this.opts, this.config),\n          yAxisWidth = _calYAxisData.yAxisWidth;\n\n      this.config.yAxisWidth = yAxisWidth;\n      var offsetLeft = 0;\n\n      var _getXAxisPoints0 = getXAxisPoints(this.opts.categories, this.opts, this.config),\n          xAxisPoints = _getXAxisPoints0.xAxisPoints,\n          startX = _getXAxisPoints0.startX,\n          endX = _getXAxisPoints0.endX,\n          eachSpacing = _getXAxisPoints0.eachSpacing;\n\n      var totalWidth = eachSpacing * (xAxisPoints.length - 1);\n      var screenWidth = endX - startX;\n      offsetLeft = screenWidth - totalWidth;\n      this.scrollOption = {\n        currentOffset: offsetLeft,\n        startTouchX: offsetLeft,\n        distance: 0\n      };\n      this.opts._scrollDistance_ = offsetLeft;\n      break;\n  }\n\n  var animation = data.animation == undefined ? this.opts.animation : data.animation;\n  this.opts.animation = animation;\n  this.opts.title = assign({}, this.opts.title, data.title || {});\n  this.opts.subtitle = assign({}, this.opts.subtitle, data.subtitle || {});\n  drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\n};\n\nCharts.prototype.zoom = function () {\n  var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.opts.xAxis.itemCount;\n\n  if (this.opts.enableScroll !== true) {\n    console.log('请启用滚动条后使用！');\n    return;\n  }\n\n  this.opts.animation = false;\n  this.opts.xAxis.itemCount = val.itemCount;\n  drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\n};\n\nCharts.prototype.stopAnimation = function () {\n  this.animationInstance && this.animationInstance.stop();\n};\n\nCharts.prototype.addEventListener = function (type, listener) {\n  this.event.addEventListener(type, listener);\n};\n\nCharts.prototype.getCurrentDataIndex = function (e) {\n  var touches = e.mp.changedTouches[0];\n\n  if (touches) {\n    var _touches$ = getTouches(touches, this.opts, e);\n\n    if (this.opts.type === 'pie' || this.opts.type === 'ring') {\n      return findPieChartCurrentIndex({\n        x: _touches$.x,\n        y: _touches$.y\n      }, this.chartData.pieData);\n    } else if (this.opts.type === 'radar') {\n      return findRadarChartCurrentIndex({\n        x: _touches$.x,\n        y: _touches$.y\n      }, this.chartData.radarData, this.opts.categories.length);\n    } else {\n      return findCurrentIndex({\n        x: _touches$.x,\n        y: _touches$.y\n      }, this.chartData.xAxisPoints, this.opts, this.config, Math.abs(this.scrollOption.currentOffset));\n    }\n  }\n\n  return -1;\n};\n\nCharts.prototype.showToolTip = function (e) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var touches = e.mp.changedTouches[0];\n\n  var _touches$ = getTouches(touches, this.opts, e);\n\n  if (this.opts.type === 'line' || this.opts.type === 'area' || this.opts.type === 'column') {\n    var index = this.getCurrentDataIndex(e);\n    var currentOffset = this.scrollOption.currentOffset;\n    var opts = assign({}, this.opts, {\n      _scrollDistance_: currentOffset,\n      animation: false\n    });\n\n    if (index > -1) {\n      var seriesData = getSeriesDataItem(this.opts.series, index);\n\n      if (seriesData.length !== 0) {\n        var _getToolTipData = getToolTipData(seriesData, this.chartData.calPoints, index, this.opts.categories, option),\n            textList = _getToolTipData.textList,\n            offset = _getToolTipData.offset;\n\n        offset.y = _touches$.y;\n        opts.tooltip = {\n          textList: textList,\n          offset: offset,\n          option: option,\n          index: index\n        };\n      }\n    }\n\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\n  }\n\n  if (this.opts.type === 'mix') {\n    var index = this.getCurrentDataIndex(e);\n    var currentOffset = this.scrollOption.currentOffset;\n    var opts = assign({}, this.opts, {\n      _scrollDistance_: currentOffset,\n      animation: false\n    });\n\n    if (index > -1) {\n      var seriesData = getSeriesDataItem(this.opts.series, index);\n\n      if (seriesData.length !== 0) {\n        var _getMixToolTipData = getMixToolTipData(seriesData, this.chartData.calPoints, index, this.opts.categories, option),\n            textList = _getMixToolTipData.textList,\n            offset = _getMixToolTipData.offset;\n\n        offset.y = _touches$.y;\n        opts.tooltip = {\n          textList: textList,\n          offset: offset,\n          option: option,\n          index: index\n        };\n      }\n    }\n\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\n  }\n\n  if (this.opts.type === 'candle') {\n    var index = this.getCurrentDataIndex(e);\n    var currentOffset = this.scrollOption.currentOffset;\n    var opts = assign({}, this.opts, {\n      _scrollDistance_: currentOffset,\n      animation: false\n    });\n\n    if (index > -1) {\n      var seriesData = getSeriesDataItem(this.opts.series, index);\n\n      if (seriesData.length !== 0) {\n        var _getToolTipData = getCandleToolTipData(this.opts.series[0].data, seriesData, this.chartData.calPoints, index, this.opts.categories, this.opts.extra.candle, option),\n            textList = _getToolTipData.textList,\n            offset = _getToolTipData.offset;\n\n        offset.y = _touches$.y;\n        opts.tooltip = {\n          textList: textList,\n          offset: offset,\n          option: option,\n          index: index\n        };\n      }\n    }\n\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\n  }\n\n  if (this.opts.type === 'pie' || this.opts.type === 'ring') {\n    var index = this.getCurrentDataIndex(e);\n    var currentOffset = this.scrollOption.currentOffset;\n    var opts = assign({}, this.opts, {\n      _scrollDistance_: currentOffset,\n      animation: false\n    });\n\n    if (index > -1) {\n      var seriesData = this.opts.series[index];\n      var textList = [{\n        text: option.format ? option.format(seriesData) : seriesData.name + ': ' + seriesData.data,\n        color: seriesData.color\n      }];\n      var offset = {\n        x: _touches$.x,\n        y: _touches$.y\n      };\n      opts.tooltip = {\n        textList: textList,\n        offset: offset,\n        option: option,\n        index: index\n      };\n    }\n\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\n  }\n};\n\nCharts.prototype.scrollStart = function (e) {\n  var touches = e.mp.changedTouches[0];\n\n  var _touches$ = getTouches(touches, this.opts, e);\n\n  if (touches && this.opts.enableScroll === true) {\n    if (touches.x) {\n      this.scrollOption.startTouchX = _touches$.x;\n    } else {\n      this.scrollOption.startTouchX = _touches$.clientX;\n    }\n  }\n};\n\nCharts.prototype.scroll = function (e) {\n  // TODO throtting...\n  var disableTouch = this.disableTouch,\n      throttleTouch = this.throttleTouch,\n      lastMoveTime = this.lastMoveTime;\n  if (disableTouch || !e.mp.changedTouches[0]) return;\n\n  if (throttleTouch) {\n    var currMoveTime = Date.now();\n    if (currMoveTime - lastMoveTime < 240) return;\n    this.lastMoveTime = currMoveTime;\n  }\n\n  var touches = e.mp.changedTouches[0];\n\n  var _touches$ = getTouches(touches, this.opts, e);\n\n  if (touches && this.opts.enableScroll === true) {\n    var _distance;\n\n    if (touches.x) {\n      _distance = _touches$.x - this.scrollOption.startTouchX;\n    } else {\n      _distance = _touches$.clientX - this.scrollOption.startTouchX;\n    }\n\n    var currentOffset = this.scrollOption.currentOffset;\n    var validDistance = calValidDistance(currentOffset + _distance, this.chartData, this.config, this.opts);\n    this.scrollOption.distance = _distance = validDistance - currentOffset;\n    var opts = assign({}, this.opts, {\n      _scrollDistance_: currentOffset + _distance,\n      animation: false\n    });\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\n  }\n};\n\nCharts.prototype.scrollEnd = function (e) {\n  if (this.opts.enableScroll === true) {\n    var _scrollOption = this.scrollOption,\n        currentOffset = _scrollOption.currentOffset,\n        distance = _scrollOption.distance;\n    this.scrollOption.currentOffset = currentOffset + distance;\n    this.scrollOption.distance = 0;\n  }\n};\n\nmodule.exports = Charts;",{"version":3,"sources":["/Users/vincehe/code/circle-animation/src/components/u-charts.js"],"names":["config","yAxisWidth","yAxisSplit","xAxisHeight","xAxisLineHeight","legendHeight","yAxisTitleWidth","padding","pixelRatio","rotate","columePadding","fontSize","dataPointShape","colors","pieChartLinePadding","pieChartTextPadding","xAxisTextPadding","titleColor","titleFontSize","subtitleColor","subtitleFontSize","toolTipPadding","toolTipBackground","toolTipOpacity","toolTipLineHeight","radarGridCount","radarLabelTextMargin","gaugeLabelTextMargin","assign","target","varArgs","TypeError","to","Object","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","util","toFixed","num","limit","isFloat","approximatelyEqual","num1","num2","Math","abs","isSameSign","isSameXCoordinateArea","p1","p2","x","isCollision","obj1","obj2","end","start","width","y","height","flag","hexToRgb","hexValue","opc","rgx","hex","replace","m","r","g","b","rgb","exec","parseInt","findRange","type","isNaN","Error","multiple","ceil","floor","calValidDistance","distance","chartData","opts","dataChartAreaWidth","xAxisPoints","dataChartWidth","eachSpacing","categories","validDistance","isInAngleRange","angle","startAngle","endAngle","adjust","PI","calRotateTranslate","h","xv","yv","transX","sqrt","transY","createCurveControlPoints","points","i","isNotMiddlePoint","max","min","a","pAx","pAy","pBx","pBy","last","ctrA","ctrB","convertCoordinateOrigin","center","avoidCollision","obj","fillSeriesColor","series","map","item","color","fillSeriesType","getDataRange","minData","maxData","range","minRange","maxRange","measureText","text","undefined","String","split","forEach","test","dataCombine","reduce","data","concat","dataCombineStack","sum","Array","j","getTouches","touches","e","clientX","pageY","mp","currentTarget","offsetTop","getSeriesDataItem","seriesItem","style","shape","disableLegend","name","format","push","getMaxTextListLength","list","lengthList","apply","getRadarCoordinateSeries","eachAngle","CoordinateSeries","getToolTipData","seriesData","calPoints","option","textList","validCalPoints","offset","round","getMixToolTipData","filter","getCandleToolTipData","extra","upColor","upFill","downColor","downFill","text0","text1","text2","text3","text4","findCurrentIndex","currentPoints","currentIndex","isInExactChartArea","findRadarChartCurrentIndex","radarData","count","eachAngleArea","isInExactPieChartArea","radius","fixAngle","atan2","angleList","rangeStart","rangeEnd","findPieChartCurrentIndex","pieData","len","_start_","_proportion_","pow","splitPoints","newPoints","items","calLegendData","legend","legendList","marginTop","shapeWidth","widthCount","currentRow","itemWidth","calCategoriesData","result","_getXAxisPoints","getXAxisPoints","categoriesTextLenth","maxTextLength","xAxis","rotateLabel","sin","getRadarDataPoints","process","radarOption","radar","each","listItem","tmp","proportion","position","cos","getPieDataPoints","getArcbarDataPoints","arcbarOption","totalAngle","getGaugeAxisPoints","tempStartAngle","value","_startAngle_","_endAngle_","getGaugeDataPoints","gaugeOption","pointer","_oldAngle_","oldAngle","oldData","getPieTextMaxLength","maxLength","fixColumeData","columnLen","column","fixColumeMeterData","border","fixColumeStackData","indexn","yAxisTotalWidth","spacingValid","dataCount","enableScroll","itemCount","startX","endX","getCandleDataPoints","validHeight","cPoints","indexs","point","getDataPoints","getStackDataPoints","seriesIndex","stackSeries","value0","height0","heightc","y0","getYAxisTextList","stack","sorted","constructor","subitem","yAxis","rangeSpan","dataRange","eachRange","reverse","calYAxisData","columnstyle","ranges","rangesFormat","Number","disabled","calTooltipYAxisData","maxVal","minVal","minAxis","maxAxis","contextRotate","context","rotateLock","translate","_rotate_","drawPointShape","beginPath","setStrokeStyle","setLineWidth","setFillStyle","moveTo","lineTo","arc","rect","closePath","fill","stroke","drawRingTitle","titlefontSize","title","subtitlefontSize","subtitle","titleFontColor","subtitleFontColor","titleHeight","subtitleHeight","margin","textWidth","offsetX","startY","offsetY","setFontSize","fillText","_textWidth","_startX","_startY","drawPointText","formatVal","drawGaugeLabel","centerPosition","splitAngle","splitLine","splitNumber","totalNumber","endNumber","startNumber","nowAngle","nowNumber","pos","labelColor","drawRadarLabel","posRelativeCanvas","drawPieText","lineRadius","textObjectCollection","lastTextObject","seriesConvert","orginX1","orginY1","orginX2","orginY2","orginX3","orginY3","textObject","lineStart","lineEnd","lineStartPoistion","lineEndPoistion","textPosition","curveStartX","textStartX","quadraticCurveTo","drawToolTipSplitLine","toolTipOption","tooltip","gridType","dashLength","endY","setLineDash","gridColor","xAxisLabel","lableText","textX","textY","labelBgColor","labelBgOpacity","labelFontColor","fontColor","drawToolTipHorizentalLine","yAxisLabel","drawToolTipSplitArea","activeBgColor","activeBgOpacity","drawToolTip","bgColor","bgOpacity","legendWidth","legendMarginRight","arrowWidth","isOverRightBorder","toolTipWidth","toolTipHeight","_scrollDistance_","fillRect","drawYAxisTitle","save","restore","drawColumnDataPoints","columnOption","meter","fillColor","_calYAxisData","pop","shift","eachSeries","tooltipPoints","dataLabel","drawCandleDataPoints","candleOption","candle","average","upLine","downLine","show","day","_calYAxisData5","_getXAxisPoints5","splitPointList","drawAreaDataPoints","areaOption","area","opacity","addLine","_calYAxisData2","_getXAxisPoints2","firstPoint","lastPoint","ctrlPoint","bezierCurveTo","drawLineDataPoints","lineOption","line","_calYAxisData3","_getXAxisPoints3","drawMixDataPoints","_calYAxisData6","_getXAxisPoints6","columnIndex","columnLength","setGlobalAlpha","drawToolTipBridge","horizentalLine","drawXAxis","_getXAxisPoints4","scrollShow","scrollY","scrollScreenWidth","scrollTotalWidth","scrollWidth","scrollLeft","setLineCap","scrollBackgroundColor","scrollColor","disableGrid","validWidth","maxXAxisListLength","ratio","_xAxisTextAngle_","_calRotateTranslate","drawYAxisGrid","xAxiseachSpacing","TotalWidth","drawYAxis","_calYAxisData4","background","drawLegend","_calLegendData","itemList","listIndex","legendTextColor","drawPieDataPoints","pieOption","pie","_pieTextMaxLength_","activeRadius","offsetAngle","activeOpacity","lineJoin","disablePieStroke","innerPieWidth","ringWidth","valid","drawArcbarDataPoints","arcbar","backgroundColor","drawGaugeDataPoints","gauge","innerRadius","eachCategories","fixRadius","childNumber","childWidth","childAngle","childendX","drawRadarDataPoints","coordinateAngle","_loop","startPos","radarDataPoints","drawCanvas","draw","Timing","easeIn","easeOut","easeInOut","linear","Animation","isStop","duration","timing","delay","createAnimationFrame","requestAnimationFrame","setTimeout","step","timeStamp","Date","animationFrame","startTimeStamp","_step","timestamp","onProcess","onAnimationFinish","timingFunction","bind","stop","drawCharts","_this","_calCategoriesData","animation","animationInstance","clearRect","_drawLineDataPoints","event","trigger","_drawMixDataPoints","_drawColumnDataPoints","_drawAreaDataPoints","arcbarData","gaugeData","_drawCandleDataPoints","Event","events","addEventListener","listener","_len","args","_key","params","slice","console","error","Charts","scrollAlign","config$$1","lableWidth","tempWidth","tempHeight","$this","uni","createCanvasContext","canvasId","scrollOption","currentOffset","startTouchX","offsetLeft","_getXAxisPoints0","totalWidth","screenWidth","updateData","scrollPosition","zoom","val","log","stopAnimation","getCurrentDataIndex","changedTouches","_touches$","showToolTip","_getToolTipData","_getMixToolTipData","scrollStart","scroll","disableTouch","throttleTouch","lastMoveTime","currMoveTime","now","_distance","scrollEnd","_scrollOption","module","exports"],"mappings":"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","sourcesContent":["/*\n * uCharts v1.7.0.8\n * uni-app平台高性能跨全端图表，支持H5、APP、小程序（微信/支付宝/百度/头条）\n * Copyright (c) 2019 QIUN秋云 https://www.ucharts.cn All rights reserved.\r\n * Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\r\n * \n * uCharts官方网站\n * https://www.uCharts.cn\n * \n * 开源地址:\n * https://gitee.com/uCharts/uCharts\n * \n * uni-app插件市场地址：\n * http://ext.dcloud.net.cn/plugin?id=271\n * \r\n * \n */\n\n'use strict';\n\nvar config = {\n    yAxisWidth: 15,\n    yAxisSplit: 5,\n    xAxisHeight: 15,\n    xAxisLineHeight: 15,\n    legendHeight: 15,\n    yAxisTitleWidth: 15,\n    padding: 12,\n\tpixelRatio:1,//适配H5高分屏\n\trotate:false,//横屏模式\n    columePadding: 3,\n    fontSize: 13,\n    //dataPointShape: ['diamond', 'circle', 'triangle', 'rect'],\n\tdataPointShape: ['circle', 'circle', 'circle', 'circle'],//仿F2图例样式改为圆点\n    colors: ['#1890ff', '#2fc25b', '#facc14', '#f04864', '#8543e0', '#90ed7d'],\n    pieChartLinePadding: 15,\n    pieChartTextPadding: 5,\n    xAxisTextPadding: 3,\n    titleColor: '#333333',\n    titleFontSize: 20,\n    subtitleColor: '#999999',\n    subtitleFontSize: 15,\n    toolTipPadding: 3,\n    toolTipBackground: '#000000',\n    toolTipOpacity: 0.7,\n    toolTipLineHeight: 20,\n    radarGridCount: 3,\n    radarLabelTextMargin: 15,\n\tgaugeLabelTextMargin:15\n};\n\n// Object.assign polyfill\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nfunction assign(target, varArgs) {\n    if (target == null) {\n        // TypeError if undefined or null\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    var to = Object(target);\n\n    for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) {\n            // Skip over if undefined or null\n            for (var nextKey in nextSource) {\n                // Avoid bugs when hasOwnProperty is shadowed\n                if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                    to[nextKey] = nextSource[nextKey];\n                }\n            }\n        }\n    }\n    return to;\n}\n\nvar util = {\n    toFixed: function toFixed(num, limit) {\n        limit = limit || 2;\n        if (this.isFloat(num)) {\n            num = num.toFixed(limit);\n        }\n        return num;\n    },\n    isFloat: function isFloat(num) {\n        return num % 1 !== 0;\n    },\n    approximatelyEqual: function approximatelyEqual(num1, num2) {\n        return Math.abs(num1 - num2) < 1e-10;\n    },\n    isSameSign: function isSameSign(num1, num2) {\n        return Math.abs(num1) === num1 && Math.abs(num2) === num2 || Math.abs(num1) !== num1 && Math.abs(num2) !== num2;\n    },\n    isSameXCoordinateArea: function isSameXCoordinateArea(p1, p2) {\n        return this.isSameSign(p1.x, p2.x);\n    },\n    isCollision: function isCollision(obj1, obj2) {\n        obj1.end = {};\n        obj1.end.x = obj1.start.x + obj1.width;\n        obj1.end.y = obj1.start.y - obj1.height;\n        obj2.end = {};\n        obj2.end.x = obj2.start.x + obj2.width;\n        obj2.end.y = obj2.start.y - obj2.height;\n        var flag = obj2.start.x > obj1.end.x || obj2.end.x < obj1.start.x || obj2.end.y > obj1.start.y || obj2.start.y < obj1.end.y;\n\n        return !flag;\n    }\n};\n\n// hex 转 rgba\nfunction hexToRgb(hexValue, opc) {\n    var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var hex = hexValue.replace(rgx, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n    });\n    var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    var r = parseInt(rgb[1], 16);\n    var g = parseInt(rgb[2], 16);\n    var b = parseInt(rgb[3], 16);\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + opc + ')';\n}\n\nfunction findRange(num, type, limit) {\n    if (isNaN(num)) {\n        throw new Error('[wxCharts] unvalid series data!');\n    }\n    limit = limit || 10;\n    type = type ? type : 'upper';\n    var multiple = 1;\n    while (limit < 1) {\n        limit *= 10;\n        multiple *= 10;\n    }\n    if (type === 'upper') {\n        num = Math.ceil(num * multiple);\n    } else {\n        num = Math.floor(num * multiple);\n    }\n    while (num % limit !== 0) {\n        if (type === 'upper') {\n            num++;\n        } else {\n            num--;\n        }\n    }\n\n    return num / multiple;\n}\n\nfunction calValidDistance(distance, chartData, config, opts) {\n\n    var dataChartAreaWidth = opts.width - config.padding - chartData.xAxisPoints[0];\n    var dataChartWidth = chartData.eachSpacing * opts.categories.length;\n    var validDistance = distance;\n    if (distance >= 0) {\n        validDistance = 0;\n    } else if (Math.abs(distance) >= dataChartWidth - dataChartAreaWidth) {\n        validDistance = dataChartAreaWidth - dataChartWidth;\n    }\n    return validDistance;\n}\n\nfunction isInAngleRange(angle, startAngle, endAngle) {\n    function adjust(angle) {\n        while (angle < 0) {\n            angle += 2 * Math.PI;\n        }\n        while (angle > 2 * Math.PI) {\n            angle -= 2 * Math.PI;\n        }\n\n        return angle;\n    }\n\n    angle = adjust(angle);\n    startAngle = adjust(startAngle);\n    endAngle = adjust(endAngle);\n    if (startAngle > endAngle) {\n        endAngle += 2 * Math.PI;\n        if (angle < startAngle) {\n            angle += 2 * Math.PI;\n        }\n    }\n\n    return angle >= startAngle && angle <= endAngle;\n}\n\nfunction calRotateTranslate(x, y, h) {\n    var xv = x;\n    var yv = h - y;\n\n    var transX = xv + (h - yv - xv) / Math.sqrt(2);\n    transX *= -1;\n\n    var transY = (h - yv) * (Math.sqrt(2) - 1) - (h - yv - xv) / Math.sqrt(2);\n\n    return {\n        transX: transX,\n        transY: transY\n    };\n}\n\nfunction createCurveControlPoints(points, i) {\n\n    function isNotMiddlePoint(points, i) {\n        if (points[i - 1] && points[i + 1]) {\n            return points[i].y >= Math.max(points[i - 1].y, points[i + 1].y) || points[i].y <= Math.min(points[i - 1].y, points[i + 1].y);\n        } else {\n            return false;\n        }\n    }\n\n    var a = 0.2;\n    var b = 0.2;\n    var pAx = null;\n    var pAy = null;\n    var pBx = null;\n    var pBy = null;\n    if (i < 1) {\n        pAx = points[0].x + (points[1].x - points[0].x) * a;\n        pAy = points[0].y + (points[1].y - points[0].y) * a;\n    } else {\n        pAx = points[i].x + (points[i + 1].x - points[i - 1].x) * a;\n        pAy = points[i].y + (points[i + 1].y - points[i - 1].y) * a;\n    }\n\n    if (i > points.length - 3) {\n        var last = points.length - 1;\n        pBx = points[last].x - (points[last].x - points[last - 1].x) * b;\n        pBy = points[last].y - (points[last].y - points[last - 1].y) * b;\n    } else {\n        pBx = points[i + 1].x - (points[i + 2].x - points[i].x) * b;\n        pBy = points[i + 1].y - (points[i + 2].y - points[i].y) * b;\n    }\n\n    // fix issue https://github.com/xiaolin3303/wx-charts/issues/79\n    if (isNotMiddlePoint(points, i + 1)) {\n        pBy = points[i + 1].y;\n    }\n    if (isNotMiddlePoint(points, i)) {\n        pAy = points[i].y;\n    }\n\n    return {\n        ctrA: { x: pAx, y: pAy },\n        ctrB: { x: pBx, y: pBy }\n    };\n}\n\nfunction convertCoordinateOrigin(x, y, center) {\n    return {\n        x: center.x + x,\n        y: center.y - y\n    };\n}\n\nfunction avoidCollision(obj, target) {\n    if (target) {\n        // is collision test\n        while (util.isCollision(obj, target)) {\n            if (obj.start.x > 0) {\n                obj.start.y--;\n            } else if (obj.start.x < 0) {\n                obj.start.y++;\n            } else {\n                if (obj.start.y > 0) {\n                    obj.start.y++;\n                } else {\n                    obj.start.y--;\n                }\n            }\n        }\n    }\n    return obj;\n}\n\nfunction fillSeriesColor(series, config) {\n    var index = 0;\n    return series.map(function (item) {\n        if (!item.color) {\n            item.color = config.colors[index];\n            index = (index + 1) % config.colors.length;\n        }\n        return item;\n    });\n}\r\n\r\nfunction fillSeriesType(series, opts) {\n    return series.map(function (item) {\n        if (!item.type) {\n            item.type = opts.type;\n        }\n        return item;\n    });\n}\n\nfunction getDataRange(minData, maxData) {\n    var limit = 0;\n    var range = maxData - minData;\n    if (range >= 10000) {\n        limit = 1000;\n    } else if (range >= 1000) {\n        limit = 100;\n    } else if (range >= 100) {\n        limit = 10;\n    } else if (range >= 10) {\n        limit = 5;\n    } else if (range >= 1) {\n        limit = 1;\n    } else if (range >= 0.1) {\n        limit = 0.1;\n    } else {\n        limit = 0.01;\n    }\n    return {\n        minRange: findRange(minData, 'lower', limit),\n        maxRange: findRange(maxData, 'upper', limit)\n    };\n}\n\nfunction measureText(text) {\n    var fontSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : config.fontSize;\n\n    // wx canvas 未实现measureText方法, 此处自行实现\n\t// 适配修改初始字体10px为其他大小的方法\n    text = String(text);\n    var text = text.split('');\n    var width = 0;\n    text.forEach(function (item) {\n        if (/[a-zA-Z]/.test(item)) {\n            width += 7;\n        } else if (/[0-9]/.test(item)) {\n            width += 5.5;\n        } else if (/\\./.test(item)) {\n            width += 2.7;\n        } else if (/-/.test(item)) {\n            width += 3.25;\n        } else if (/[\\u4e00-\\u9fa5]/.test(item)) {\n            width += 10;\n        } else if (/\\(|\\)/.test(item)) {\n            width += 3.73;\n        } else if (/\\s/.test(item)) {\n            width += 2.5;\n        } else if (/%/.test(item)) {\n            width += 8;\n        } else {\n            width += 10;\n        }\n    });\n    return width * fontSize / 10 ;\n}\n\nfunction dataCombine(series) {\n    return series.reduce(function (a, b) {\n        return (a.data ? a.data : a).concat(b.data);\n    }, []);\n}\r\n\r\nfunction dataCombineStack(series) {\r\n\tvar sum = new Array(series[0].data.length);\r\n\tfor(var j = 0; j < sum.length; j++) {\r\n\t\t\tsum[j] =0;\r\n\t}\r\n\tfor(var i = 0; i < series.length; i++) {\r\n\t  for(var j = 0; j < sum.length; j++) {\r\n\t\tsum[j] += series[i].data[j];\r\n\t  }\r\n\t}\r\n\treturn series.reduce(function (a, b) {\r\n\t    return (a.data ? a.data : a).concat(b.data).concat(sum);\r\n\t}, []);\n}\n\nfunction getTouches(touches, opts, e){\n\tlet x,y;\n\tif(touches.clientX){\n\t\tif(opts.rotate){//适配横屏\n\t\t\ty = opts.height-touches.clientX*opts.pixelRatio;\n\t\t\tx = (touches.pageY-e.mp.currentTarget.offsetTop-(opts.height/opts.pixelRatio/2)*(opts.pixelRatio-1))*opts.pixelRatio;\n\t\t}else{\n\t\t\tx = touches.clientX*opts.pixelRatio;\n\t\t\ty = (touches.pageY-e.mp.currentTarget.offsetTop-(opts.height/opts.pixelRatio/2)*(opts.pixelRatio-1))*opts.pixelRatio;\n\t\t}\n\t}else{\n\t\tif(opts.rotate){//适配横屏\n\t\t\ty = opts.height-touches.x*opts.pixelRatio;\n\t\t\tx = touches.y*opts.pixelRatio;\n\t\t}else{\n\t\t\tx = touches.x*opts.pixelRatio;\n\t\t\ty = touches.y*opts.pixelRatio;\n\t\t}\n\t}\n\treturn{x:x,y:y}\n}\n\nfunction getSeriesDataItem(series, index) {\n    var data = [];\n    series.forEach(function (item) {\n        if (item.data[index] !== null && typeof item.data[index] !== 'undefined') {\n            var seriesItem = {};\n            seriesItem.color = item.color;\r\n\t\t\tseriesItem.type = item.type;\r\n\t\t\tseriesItem.style = item.style;\r\n\t\t\tseriesItem.shape = item.shape;\r\n\t\t\tseriesItem.disableLegend = item.disableLegend;\n            seriesItem.name = item.name;\n            seriesItem.data = item.format ? item.format(item.data[index]) : item.data[index];\n            data.push(seriesItem);\n        }\n    });\n\n    return data;\n}\n\nfunction getMaxTextListLength(list) {\n    var lengthList = list.map(function (item) {\n        return measureText(item);\n    });\n    return Math.max.apply(null, lengthList);\n}\n\nfunction getRadarCoordinateSeries(length) {\n    var eachAngle = 2 * Math.PI / length;\n    var CoordinateSeries = [];\n    for (var i = 0; i < length; i++) {\n        CoordinateSeries.push(eachAngle * i);\n    }\n\n    return CoordinateSeries.map(function (item) {\n        return -1 * item + Math.PI / 2;\n    });\n}\n\nfunction getToolTipData(seriesData, calPoints, index, categories) {\n    var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n    var textList = seriesData.map(function (item) {\n        return {\n            text: option.format ? option.format(item, categories[index]) : item.name + ': ' + item.data,\n            color: item.color\n        };\n    });\n    var validCalPoints = [];\n    var offset = {\n        x: 0,\n        y: 0\n    };\n    calPoints.forEach(function (points) {\n        if (typeof points[index] !== 'undefined' && points[index] !== null) {\n            validCalPoints.push(points[index]);\n        }\n    });\n    validCalPoints.forEach(function (item) {\n        offset.x = Math.round(item.x);\n        offset.y += item.y;\n    });\n\n    offset.y /= validCalPoints.length;\n    return { textList: textList, offset: offset };\n}\n\r\nfunction getMixToolTipData(seriesData, calPoints, index, categories) {\n    var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    var textList = seriesData.map(function (item) {\r\n\t\treturn {\r\n\t\t\ttext: option.format ? option.format(item, categories[index]) : item.name + ': ' + item.data,\r\n\t\t\tcolor: item.color,\r\n\t\t\tdisableLegend: item.disableLegend? true:false\r\n\t\t};\n    });\r\n\ttextList=textList.filter(function (item) {\r\n\t\tif(item.disableLegend!==true){\r\n\t\t\treturn item;\r\n\t\t}\r\n\t});\n    var validCalPoints = [];\n    var offset = {\n        x: 0,\n        y: 0\n    };\n    calPoints.forEach(function (points) {\n        if (typeof points[index] !== 'undefined' && points[index] !== null) {\n            validCalPoints.push(points[index]);\n        }\n    });\n    validCalPoints.forEach(function (item) {\n        offset.x = Math.round(item.x);\n        offset.y += item.y;\n    });\n\n    offset.y /= validCalPoints.length;\n    return { textList: textList, offset: offset };\n}\r\n\nfunction getCandleToolTipData(series,seriesData, calPoints, index, categories,extra) {\n    var option = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n\tlet upColor = extra.color.upFill;\n\tlet downColor = extra.color.downFill;\n\t//颜色顺序为开盘，收盘，最低，最高\n\tlet color=[upColor,upColor,downColor,upColor];\n    var textList = [];\r\n\tlet text0={\r\n\t\ttext: categories[index],\r\n\t\tcolor: null\r\n\t};\r\n\ttextList.push(text0);\n\tseriesData.map(function (item) {\n\t\t//console.log(color)\n\t\tif(index==0 && item.data[1]-item.data[0]<0){\n\t\t\tcolor[1]=downColor;\n\t\t}else{\n\t\t\tif(item.data[0]<series[index-1][1]){\n\t\t\t\tcolor[0]=downColor;\n\t\t\t}\n\t\t\tif(item.data[1]<item.data[0]){\n\t\t\t\tcolor[1]=downColor;\n\t\t\t}\n\t\t\tif(item.data[2]>series[index-1][1]){\n\t\t\t\tcolor[2]=upColor;\n\t\t\t}\n\t\t\tif(item.data[3]<series[index-1][1]){\n\t\t\t\tcolor[3]=downColor;\n\t\t\t}\n\t\t}\n\t\t\n\t\tlet text1={\n\t\t\ttext: '开盘：'+item.data[0],\n\t\t\tcolor: color[0]\n\t\t};\n\t\tlet text2={\n\t\t\ttext: '收盘：'+item.data[1],\n\t\t\tcolor: color[1]\n\t\t};\n\t\tlet text3={\n\t\t\ttext: '最低：'+item.data[2],\n\t\t\tcolor: color[2]\n\t\t};\n\t\tlet text4={\n\t\t\ttext: '最高：'+item.data[3],\n\t\t\tcolor: color[3]\n\t\t};\n\t\ttextList.push(text1,text2,text3,text4);\n    });\n    var validCalPoints = [];\n    var offset = {\n        x: 0,\n        y: 0\n    };\n    calPoints.forEach(function (points) {\n        if (typeof points[index] !== 'undefined' && points[index] !== null) {\n            validCalPoints.push(points[index]);\n        }\n    });\n\toffset.x=Math.round(validCalPoints[0][0].x);\n    return { textList: textList, offset: offset };\n}\n\nfunction findCurrentIndex(currentPoints, xAxisPoints, opts, config) {\n    var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var currentIndex = -1;\n    if (isInExactChartArea(currentPoints, opts, config)) {\n        xAxisPoints.forEach(function (item, index) {\n            if (currentPoints.x + offset > item) {\n                currentIndex = index;\n            }\n        });\n    }\n\n    return currentIndex;\n}\n\nfunction isInExactChartArea(currentPoints, opts, config) {\n    return currentPoints.x < opts.width - config.padding && currentPoints.x > config.padding + config.yAxisWidth + config.yAxisTitleWidth && currentPoints.y > config.padding && currentPoints.y < opts.height - config.legendHeight - config.xAxisHeight - config.padding;\n}\n\nfunction findRadarChartCurrentIndex(currentPoints, radarData, count) {\n    var eachAngleArea = 2 * Math.PI / count;\n    var currentIndex = -1;\n    if (isInExactPieChartArea(currentPoints, radarData.center, radarData.radius)) {\n        var fixAngle = function fixAngle(angle) {\n            if (angle < 0) {\n                angle += 2 * Math.PI;\n            }\n            if (angle > 2 * Math.PI) {\n                angle -= 2 * Math.PI;\n            }\n            return angle;\n        };\n\n        var angle = Math.atan2(radarData.center.y - currentPoints.y, currentPoints.x - radarData.center.x);\n        angle = -1 * angle;\n        if (angle < 0) {\n            angle += 2 * Math.PI;\n        }\n\n        var angleList = radarData.angleList.map(function (item) {\n            item = fixAngle(-1 * item);\n\n            return item;\n        });\n\n        angleList.forEach(function (item, index) {\n            var rangeStart = fixAngle(item - eachAngleArea / 2);\n            var rangeEnd = fixAngle(item + eachAngleArea / 2);\n            if (rangeEnd < rangeStart) {\n                rangeEnd += 2 * Math.PI;\n            }\n            if (angle >= rangeStart && angle <= rangeEnd || angle + 2 * Math.PI >= rangeStart && angle + 2 * Math.PI <= rangeEnd) {\n                currentIndex = index;\n            }\n        });\n    }\n\n    return currentIndex;\n}\n\nfunction findPieChartCurrentIndex(currentPoints, pieData) {\n    var currentIndex = -1;\n    if (isInExactPieChartArea(currentPoints, pieData.center, pieData.radius)) {\n        var angle = Math.atan2(pieData.center.y - currentPoints.y, currentPoints.x - pieData.center.x);\n        angle = -angle;\n        for (var i = 0, len = pieData.series.length; i < len; i++) {\n            var item = pieData.series[i];\n            if (isInAngleRange(angle, item._start_, item._start_ + item._proportion_ * 2 * Math.PI)) {\n                currentIndex = i;\n                break;\n            }\n        }\n    }\n\n    return currentIndex;\n}\n\nfunction isInExactPieChartArea(currentPoints, center, radius) {\n    return Math.pow(currentPoints.x - center.x, 2) + Math.pow(currentPoints.y - center.y, 2) <= Math.pow(radius, 2);\n}\n\nfunction splitPoints(points) {\n    var newPoints = [];\n    var items = [];\n    points.forEach(function (item, index) {\n        if (item !== null) {\n            items.push(item);\n        } else {\n            if (items.length) {\n                newPoints.push(items);\n            }\n            items = [];\n        }\n    });\n    if (items.length) {\n        newPoints.push(items);\n    }\n\n    return newPoints;\n}\n\nfunction calLegendData(series, opts, config) {\n    if (opts.legend === false) {\n        return {\n            legendList: [],\n            legendHeight: 0\n        };\n    }\n\t//适配H5高分屏\n    var padding = 5*opts.pixelRatio;\n    var marginTop = 8*opts.pixelRatio;\n    var shapeWidth = 15*opts.pixelRatio;\n    var legendList = [];\n    var widthCount = 0;\n    var currentRow = [];\n    series.forEach(function (item) {\n        var itemWidth = 3 * padding + shapeWidth + measureText(item.name || 'undefined');\n        if (widthCount + itemWidth > opts.width) {\n            legendList.push(currentRow);\n            widthCount = itemWidth;\n            currentRow = [item];\n        } else {\n            widthCount += itemWidth;\n            currentRow.push(item);\n        }\n    });\n    if (currentRow.length) {\n        legendList.push(currentRow);\n    }\n\n    return {\n        legendList: legendList,\n        legendHeight: legendList.length * (config.fontSize + marginTop) + padding\n    };\n}\n\nfunction calCategoriesData(categories, opts, config) {\n    var result = {\n        angle: 0,\n        xAxisHeight: config.xAxisHeight\n    };\n\n    var _getXAxisPoints = getXAxisPoints(categories, opts, config),\n        eachSpacing = _getXAxisPoints.eachSpacing;\n\n    // get max length of categories text\n\n\n    var categoriesTextLenth = categories.map(function (item) {\n        return measureText(item);\n    });\n\t\n    var maxTextLength = Math.max.apply(this, categoriesTextLenth);\n\n    if (opts.xAxis.rotateLabel==true && maxTextLength + 2 * config.xAxisTextPadding > eachSpacing) {\n        result.angle = 45 * Math.PI / 180;\n        result.xAxisHeight = 2 * config.xAxisTextPadding + maxTextLength * Math.sin(result.angle);\n    }\n\t\n    return result;\n}\n\nfunction getRadarDataPoints(angleList, center, radius, series, opts) {\n    var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n\n    var radarOption = opts.extra.radar || {};\n    radarOption.max = radarOption.max || 0;\n    var maxData = Math.max(radarOption.max, Math.max.apply(null, dataCombine(series)));\n\n    var data = [];\n    series.forEach(function (each) {\n        var listItem = {};\n        listItem.color = each.color;\n        listItem.data = [];\n        each.data.forEach(function (item, index) {\n            var tmp = {};\n            tmp.angle = angleList[index];\n\n            tmp.proportion = item / maxData;\n            tmp.position = convertCoordinateOrigin(radius * tmp.proportion * process * Math.cos(tmp.angle), radius * tmp.proportion * process * Math.sin(tmp.angle), center);\n            listItem.data.push(tmp);\n        });\n\n        data.push(listItem);\n    });\n\n    return data;\n}\n\nfunction getPieDataPoints(series) {\n    var process = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    var count = 0;\n    var _start_ = 0;\n    series.forEach(function (item) {\n        item.data = item.data === null ? 0 : item.data;\n        count += item.data;\n    });\n    series.forEach(function (item) {\n        item.data = item.data === null ? 0 : item.data;\r\n\t\tif(count === 0){\r\n\t\t\titem._proportion_ = 1 / series.length;\r\n\t\t}else{\r\n\t\t\titem._proportion_ = item.data / count * process;\r\n\t\t}\n    });\n    series.forEach(function (item) {\n        item._start_ = _start_;\n        _start_ += 2 * item._proportion_ * Math.PI;\n    });\n\n    return series;\n}\n\nfunction getArcbarDataPoints(series,arcbarOption) {\n    var process = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\tif(process==1){\n\t\tprocess=0.999999;\n\t}\n    series.forEach(function (item) {\n        item.data = item.data === null ? 0 : item.data;\n\t\tlet totalAngle;\n\t\tif(arcbarOption.type=='default'){\n\t\t\ttotalAngle=arcbarOption.startAngle-arcbarOption.endAngle+1;\n\t\t}else{\n\t\t\ttotalAngle=2;\n\t\t}\n\t\titem._proportion_ = totalAngle * item.data* process + arcbarOption.startAngle;\n\t\tif (item._proportion_ >= 2) {\n\t\t\titem._proportion_ = item._proportion_ % 2;\n\t\t}\n    });\n    return series;\n}\n\nfunction getGaugeAxisPoints(categories,startAngle,endAngle) {\n\tlet totalAngle=startAngle-endAngle+1;\n\tlet tempStartAngle=startAngle;\n\tfor(let i=0 ; i<categories.length; i++){\n\t\tcategories[i].value = categories[i].value === null ? 0 : categories[i].value;\n\t\tcategories[i]._startAngle_=tempStartAngle;\n\t\tcategories[i]._endAngle_=totalAngle* categories[i].value + startAngle;\n\t\tif (categories[i]._endAngle_ >= 2) {\n\t\t\tcategories[i]._endAngle_ = categories[i]._endAngle_ % 2;\n\t\t}\n\t\ttempStartAngle=categories[i]._endAngle_;\n\t}\n\treturn categories;\n}\n\nfunction getGaugeDataPoints(series,categories,gaugeOption) {\n    var process = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n    series.forEach(function (item) {\n        item.data = item.data === null ? 0 : item.data;\n\t\tif(gaugeOption.pointer.color=='auto'){\n\t\t\tfor(let i=0 ;i<categories.length;i++){\n\t\t\t\tif(item.data<=categories[i].value){\n\t\t\t\t\titem.color=categories[i].color;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\titem.color=gaugeOption.pointer.color;\n\t\t}\n\t\tlet totalAngle=gaugeOption.startAngle-gaugeOption.endAngle+1;\n\t\titem._endAngle_=totalAngle * item.data + gaugeOption.startAngle;\n\t\titem._oldAngle_=gaugeOption.oldAngle;\n\t\tif(gaugeOption.oldAngle<gaugeOption.endAngle){\n\t\t\titem._oldAngle_+=2;\n\t\t}\n\t\tif(item.data>=gaugeOption.oldData){\n\t\t\titem._proportion_ = (item._endAngle_-item._oldAngle_)* process+gaugeOption.oldAngle;\n\t\t}else{\n\t\t\titem._proportion_ =item._oldAngle_- (item._oldAngle_-item._endAngle_)* process;\n\t\t}\n\t\tif (item._proportion_ >= 2) {\n\t\t\titem._proportion_ = item._proportion_ % 2;\n\t\t}\n    });\n    return series;\n}\n\n\nfunction getPieTextMaxLength(series) {\n    series = getPieDataPoints(series);\n    var maxLength = 0;\n    series.forEach(function (item) {\n        var text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\n        maxLength = Math.max(maxLength, measureText(text));\n    });\n\n    return maxLength;\n}\n\nfunction fixColumeData(points, eachSpacing, columnLen, index, config, opts) {\n    return points.map(function (item) {\n        if (item === null) {\n            return null;\n        }\n        item.width = (eachSpacing - 2 * config.columePadding) / columnLen;\n\n        if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\n            // customer column width\n            item.width = Math.min(item.width, +opts.extra.column.width);\n        } else {\n            // default width should less tran 25px\n            // don't ask me why, I don't know\n            item.width = Math.min(item.width, 25);\n        }\n        item.x += (index + 0.5 - columnLen / 2) * item.width;\n\n        return item;\n    });\n}\n\r\nfunction fixColumeMeterData(points, eachSpacing, columnLen, index, config, opts, border) {\n    return points.map(function (item) {\n        if (item === null) {\n            return null;\n        }\n        item.width = eachSpacing - 2 * config.columePadding;\n\n        if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\n            item.width = Math.min(item.width, +opts.extra.column.width);\n        } else {\n            item.width = Math.min(item.width, 25);\n        }\r\n\t\tif(index>0){\r\n\t\t\titem.width -= 2*border;\r\n\t\t}\n        return item;\n    });\n}\r\n\r\nfunction fixColumeStackData(points, eachSpacing, columnLen, index, config, opts,series) {\r\n\t\n    return points.map(function (item,indexn) {\r\n\t\t\n        if (item === null) {\n            return null;\n        }\n        item.width = eachSpacing - 2 * config.columePadding;\n\n        if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\n            item.width = Math.min(item.width, +opts.extra.column.width);\n        } else {\n            item.width = Math.min(item.width, 25);\n        }\n        return item;\n    });\n}\r\n\nfunction getXAxisPoints(categories, opts, config) {\n    var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n    var spacingValid = opts.width - 2 * config.padding - yAxisTotalWidth;\n    var dataCount = opts.enableScroll ? Math.min(opts.xAxis.itemCount, categories.length) : categories.length;\n    var eachSpacing = spacingValid / dataCount;\n\n    var xAxisPoints = [];\n    var startX = config.padding + yAxisTotalWidth;\n    var endX = opts.width - config.padding;\n    categories.forEach(function (item, index) {\n        xAxisPoints.push(startX + index * eachSpacing);\n    });\n    if (opts.enableScroll === true) {\n        xAxisPoints.push(startX + categories.length * eachSpacing);\n    } else {\n        xAxisPoints.push(endX);\n    }\n\n    return { xAxisPoints: xAxisPoints, startX: startX, endX: endX, eachSpacing: eachSpacing };\n}\n\nfunction getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\n    var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\n\n    var points = [];\n    var validHeight = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n    data.forEach(function (item, index) {\n        if (item === null) {\n            points.push(null);\n        } else {\n\t\t\tvar cPoints = [];\n\t\t\titem.forEach(function (items, indexs) {\n\t\t\t\t var point = {};\n\t\t\t\t point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\n\t\t\t\t var value = items.value || items;\n\t\t\t\t var height = validHeight * (value - minRange) / (maxRange - minRange);\n\t\t\t\t height *= process;\n\t\t\t\t point.y = opts.height - config.xAxisHeight - config.legendHeight - Math.round(height) - config.padding;\n\t\t\t\t cPoints.push(point);\n\t\t\t});\n            points.push(cPoints);\n        }\n    });\n\n    return points;\n}\n\nfunction getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\n    var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\n\n    var points = [];\n    var validHeight = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n    data.forEach(function (item, index) {\n        if (item === null) {\n            points.push(null);\n        } else {\n            var point = {};\n\t\t\tpoint.color = item.color;\n            point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\n\t\t\tvar value = item;\r\n\t\t\tif(typeof item === 'object' && item !== null) {\r\n\t\t\t\tvalue = item.value\r\n\t\t\t}\n            var height = validHeight * (value - minRange) / (maxRange - minRange);\n            height *= process;\n            point.y = opts.height - config.xAxisHeight - config.legendHeight - Math.round(height) - config.padding;\n            points.push(point);\n        }\n    });\n\n    return points;\n}\n\r\nfunction getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config,seriesIndex, stackSeries) {\n    var process = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 1;\n    var points = [];\n    var validHeight = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\r\n\t\n    data.forEach(function (item, index) {\n        if (item === null) {\n            points.push(null);\n        } else {\n            var point = {};\n\t\t\tpoint.color = item.color;\n            point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\n\t\t\t\r\n\t\t\tif(seriesIndex>0){\r\n\t\t\t\tvar value=0;\r\n\t\t\t\tfor(let i=0;i<=seriesIndex;i++){\r\n\t\t\t\t\tvalue+=stackSeries[i].data[index];\r\n\t\t\t\t}\r\n\t\t\t\tvar value0 = value-item;\r\n\t\t\t\tvar height = validHeight * (value - minRange) / (maxRange - minRange);\r\n\t\t\t\tvar height0 = validHeight * (value0 - minRange) / (maxRange - minRange);\r\n\t\t\t}else{\r\n\t\t\t\tvar value = item;\r\n\t\t\t\tvar height = validHeight * (value - minRange) / (maxRange - minRange);\r\n\t\t\t\tvar height0 = 0;\r\n\t\t\t}\r\n\t\t\tvar heightc=height0;\n            height *= process;\r\n\t\t\theightc *= process;\r\n\t\t\tpoint.y = opts.height - config.xAxisHeight - config.legendHeight - Math.round(height) - config.padding;\r\n\t\t\tpoint.y0 = opts.height - config.xAxisHeight - config.legendHeight - Math.round(heightc) - config.padding;\n            points.push(point);\n        }\n    });\n\n    return points;\n}\r\n\nfunction getYAxisTextList(series, opts, config ,stack) {\r\n\tvar data;\r\n\tif(stack=='stack'){\r\n\t\t//data = dataCombine(series);\r\n\t\tdata = dataCombineStack(series);\r\n\t}else{\r\n\t\tdata = dataCombine(series);\r\n\t}\r\n\t\n\tvar sorted = [];\n    // remove null from data\n    data = data.filter(function (item) {\n        //return item !== null;\n\t\tif(typeof item === 'object' && item !== null) {\n\t\t\t//判断是否为数组\n\t\t\tif(item.constructor == Array){\n\t\t\t\treturn item !== null;\n\t\t\t}else{\n\t\t\t\treturn item.value !== null;\n\t\t\t}\n        } else {\n            return item !== null;\n        }\n    });\n    //var minData = Math.min.apply(this, data);\n    //var maxData = Math.max.apply(this, data);\n\tdata.map((item)=>{\n\t\tif(typeof item === 'object') {\n\t\t\tif(item.constructor == Array){\n\t\t\t\titem.map((subitem)=>{\n\t\t\t\t\tsorted.push(subitem);\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tsorted.push(item.value);\n\t\t\t}\n\t\t} else {\n\t\t    sorted.push(item);\n\t\t}\n        //typeof item === 'object' ? sorted.push(item.value) : sorted.push(item)\n    })\n\tvar minData = 0;\n\tvar maxData = 0;\n\tif(sorted.length>0){\n\t\tminData = Math.min.apply(this, sorted);\n\t\tmaxData = Math.max.apply(this, sorted);\n\t}\n    if (typeof opts.yAxis.min === 'number') {\n       minData = Math.min(opts.yAxis.min, minData);\n    }\n    if (typeof opts.yAxis.max === 'number') {\n        maxData = Math.max(opts.yAxis.max, maxData);\n    }\n\n    // fix issue https://github.com/xiaolin3303/wx-charts/issues/9\n    if (minData === maxData) {\n        var rangeSpan = maxData || 10;\n        //minData -= rangeSpan;\n        maxData += rangeSpan;\n    }\n\n    var dataRange = getDataRange(minData, maxData);\n    var minRange = dataRange.minRange;\n    var maxRange = dataRange.maxRange;\n\n    var range = [];\n    var eachRange = (maxRange - minRange) / config.yAxisSplit;\n\n    for (var i = 0; i <= config.yAxisSplit; i++) {\n        range.push(minRange + eachRange * i);\n    }\n    return range.reverse();\n}\n\nfunction calYAxisData(series, opts, config) {\r\n\t//堆叠图重算Y轴\r\n\tvar columnstyle=assign({},opts.extra.column||{\"type\":\"\"});\r\n\t\n    var ranges = getYAxisTextList(series, opts, config, columnstyle.type);\n    var yAxisWidth = config.yAxisWidth;\n    var rangesFormat = ranges.map(function (item) {\n        item = util.toFixed(item, 2);\n        item = opts.yAxis.format ? opts.yAxis.format(Number(item)) : item;\n        yAxisWidth = Math.max(yAxisWidth, measureText(item) + 5);\n        return item;\n    });\n    if (opts.yAxis.disabled === true) {\n        yAxisWidth = 0;\n    }\n\n    return { rangesFormat: rangesFormat, ranges: ranges, yAxisWidth: yAxisWidth };\n}\n\r\nfunction calTooltipYAxisData(point,series, opts, config, eachSpacing) {\n    var ranges = getYAxisTextList(series, opts, config);\r\n\tvar spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\r\n\tlet maxVal=ranges[0];\r\n\tlet minVal=ranges[ranges.length-1];\r\n\tlet minAxis=config.padding;\r\n\tlet maxAxis=config.padding+spacingValid;\r\n\tlet item=maxVal-(maxVal-minVal)*(point-minAxis)/(maxAxis-minAxis);\r\n\titem = opts.yAxis.format ? opts.yAxis.format(Number(item)) : item;\n    return item;\n}\r\n\r\nfunction contextRotate(context,opts) {\r\n\tif(opts.rotateLock!==true){\r\n\t\tcontext.translate(opts.height, 0);\r\n\t\tcontext.rotate(90 * Math.PI / 180);\r\n\t}else if(opts._rotate_!==true){\r\n\t\tcontext.translate(opts.height, 0);\r\n\t\tcontext.rotate(90 * Math.PI / 180);\r\n\t\topts._rotate_=true;\r\n\t}\r\n}\r\n\t\nfunction drawPointShape(points, color, shape, context,opts) {\n    context.beginPath();\n    context.setStrokeStyle(\"#ffffff\");\n    context.setLineWidth(1*opts.pixelRatio);\n    context.setFillStyle(color);\n    if (shape === 'diamond') {\n        points.forEach(function (item, index) {\n            if (item !== null) {\n                context.moveTo(item.x, item.y - 4.5);\n                context.lineTo(item.x - 4.5, item.y);\n                context.lineTo(item.x, item.y + 4.5);\n                context.lineTo(item.x + 4.5, item.y);\n                context.lineTo(item.x, item.y - 4.5);\n            }\n        });\n    } else if (shape === 'circle') {\n        points.forEach(function (item, index) {\n            if (item !== null) {\n                context.moveTo(item.x + 3.5*opts.pixelRatio, item.y);\n                context.arc(item.x, item.y, 4*opts.pixelRatio, 0, 2 * Math.PI, false);\n            }\n        });\n    } else if (shape === 'rect') {\n        points.forEach(function (item, index) {\n            if (item !== null) {\n                context.moveTo(item.x - 3.5, item.y - 3.5);\n                context.rect(item.x - 3.5, item.y - 3.5, 7, 7);\n            }\n        });\n    } else if (shape === 'triangle') {\n        points.forEach(function (item, index) {\n            if (item !== null) {\n                context.moveTo(item.x, item.y - 4.5);\n                context.lineTo(item.x - 4.5, item.y + 4.5);\n                context.lineTo(item.x + 4.5, item.y + 4.5);\n                context.lineTo(item.x, item.y - 4.5);\n            }\n        });\n    }\n    context.closePath();\n    context.fill();\n    context.stroke();\n}\n\nfunction drawRingTitle(opts, config, context) {\n    var titlefontSize = opts.title.fontSize || config.titleFontSize;\n    var subtitlefontSize = opts.subtitle.fontSize || config.subtitleFontSize;\n    var title = opts.title.name || '';\n    var subtitle = opts.subtitle.name || '';\n    var titleFontColor = opts.title.color || config.titleColor;\n    var subtitleFontColor = opts.subtitle.color || config.subtitleColor;\n    var titleHeight = title ? titlefontSize : 0;\n    var subtitleHeight = subtitle ? subtitlefontSize : 0;\n    var margin = 5;\n    if (subtitle) {\n        var textWidth = measureText(subtitle, subtitlefontSize);\n        var startX = (opts.width - textWidth) / 2 + (opts.subtitle.offsetX || 0);\n        var startY = ((opts.height - config.legendHeight + subtitlefontSize) / 2 )+ (opts.subtitle.offsetY || 0);\n        if (title) {\n            startY -= (titleHeight + margin) / 2 ;\n        }\n        context.beginPath();\n        context.setFontSize(subtitlefontSize);\n        context.setFillStyle(subtitleFontColor);\n        context.fillText(subtitle, startX, startY);\n        context.closePath();\n        context.stroke();\n    }\n    if (title) {\n        var _textWidth = measureText(title, titlefontSize);\n        var _startX = (opts.width - _textWidth) / 2 + (opts.title.offsetX || 0);\n        var _startY = ((opts.height - config.legendHeight + titlefontSize) / 2 ) + (opts.title.offsetY || 0);\n        if (subtitle) {\n            _startY += (subtitleHeight + margin) / 2;\n        }\n        context.beginPath();\n        context.setFontSize(titlefontSize);\n        context.setFillStyle(titleFontColor);\n        context.fillText(title, _startX, _startY);\n        context.closePath();\n        context.stroke();\n    }\n}\n\nfunction drawPointText(points, series, config, context) {\n    // 绘制数据文案\n    var data = series.data;\n\n    \n    points.forEach(function (item, index) {\n        if (item !== null) {\n            //var formatVal = series.format ? series.format(data[index]) : data[index];\n\t\t\tcontext.beginPath();\n\t\t\tcontext.setFontSize(config.fontSize);\n\t\t\tcontext.setFillStyle('#666666');\n\t\t\tvar value = data[index]\r\n\t\t\tif(typeof data[index] === 'object' && data[index] !== null) {\r\n\t\t\t\tvalue = data[index].value\r\n\t\t\t}\n            var formatVal = series.format ? series.format(value) : value;\n            context.fillText(formatVal, item.x - measureText(formatVal) / 2, item.y - 2);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n        }\n    });\n   \n}\n\nfunction drawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context) {\n    radius -= gaugeOption.width/2+config.gaugeLabelTextMargin;\n    \n\tlet totalAngle=gaugeOption.startAngle-gaugeOption.endAngle+1;\n\tlet splitAngle=totalAngle/gaugeOption.splitLine.splitNumber;\n\tlet totalNumber=gaugeOption.endNumber-gaugeOption.startNumber;\n\tlet splitNumber=totalNumber/gaugeOption.splitLine.splitNumber;\n\tlet nowAngle=gaugeOption.startAngle;\n\tlet nowNumber=gaugeOption.startNumber;\n\tfor(let i=0;i<gaugeOption.splitLine.splitNumber+1;i++){\n\t\tvar pos = {\n\t\t    x: radius * Math.cos(nowAngle*Math.PI),\n\t\t    y: radius * Math.sin(nowAngle*Math.PI)\n\t\t};\n\t\tpos.x+=centerPosition.x-measureText(nowNumber)/2;\n\t\tpos.y+=centerPosition.y;\n\t\tvar startX = pos.x;\n\t\tvar startY = pos.y;\n\t\t\n\t\tcontext.beginPath();\n\t\tcontext.setFontSize(config.fontSize);\n\t\tcontext.setFillStyle(gaugeOption.labelColor || '#666666');\n\t\tcontext.fillText(nowNumber, startX, startY + config.fontSize / 2);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n\t\t\n\t\tnowAngle+=splitAngle;\n\t\tif(nowAngle>=2){\n\t\t\tnowAngle=nowAngle % 2;\n\t\t}\n\t\tnowNumber+=splitNumber;\n\t}\n\t\n}\n\nfunction drawRadarLabel(angleList, radius, centerPosition, opts, config, context) {\n    var radarOption = opts.extra.radar || {};\n    radius += config.radarLabelTextMargin;\n    \n    angleList.forEach(function (angle, index) {\n        var pos = {\n            x: radius * Math.cos(angle),\n            y: radius * Math.sin(angle)\n        };\n        var posRelativeCanvas = convertCoordinateOrigin(pos.x, pos.y, centerPosition);\n        var startX = posRelativeCanvas.x;\n        var startY = posRelativeCanvas.y;\n        if (util.approximatelyEqual(pos.x, 0)) {\n            startX -= measureText(opts.categories[index] || '') / 2;\n        } else if (pos.x < 0) {\n            startX -= measureText(opts.categories[index] || '');\n        }\n\t\tcontext.beginPath();\n\t\tcontext.setFontSize(config.fontSize);\n\t\tcontext.setFillStyle(radarOption.labelColor || '#666666');\n        context.fillText(opts.categories[index] || '', startX, startY + config.fontSize / 2);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n    });\n    \n}\n\nfunction drawPieText(series, opts, config, context, radius, center) {\n    var lineRadius = radius + config.pieChartLinePadding;\n    var textObjectCollection = [];\n    var lastTextObject = null;\n\n    var seriesConvert = series.map(function (item) {\n        var arc = 2 * Math.PI - (item._start_ + 2 * Math.PI * item._proportion_ / 2);\n        var text = item.format ? item.format(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\n        var color = item.color;\n        return { arc: arc, text: text, color: color };\n    });\n    seriesConvert.forEach(function (item) {\n        // line end\n        var orginX1 = Math.cos(item.arc) * lineRadius;\n        var orginY1 = Math.sin(item.arc) * lineRadius;\n\n        // line start\n        var orginX2 = Math.cos(item.arc) * radius;\n        var orginY2 = Math.sin(item.arc) * radius;\n\n        // text start\n        var orginX3 = orginX1 >= 0 ? orginX1 + config.pieChartTextPadding : orginX1 - config.pieChartTextPadding;\n        var orginY3 = orginY1;\n\n        var textWidth = measureText(item.text);\n        var startY = orginY3;\n\n        if (lastTextObject && util.isSameXCoordinateArea(lastTextObject.start, { x: orginX3 })) {\n            if (orginX3 > 0) {\n                startY = Math.min(orginY3, lastTextObject.start.y);\n            } else if (orginX1 < 0) {\n                startY = Math.max(orginY3, lastTextObject.start.y);\n            } else {\n                if (orginY3 > 0) {\n                    startY = Math.max(orginY3, lastTextObject.start.y);\n                } else {\n                    startY = Math.min(orginY3, lastTextObject.start.y);\n                }\n            }\n        }\n\n        if (orginX3 < 0) {\n            orginX3 -= textWidth;\n        }\n\n        var textObject = {\n            lineStart: {\n                x: orginX2,\n                y: orginY2\n            },\n            lineEnd: {\n                x: orginX1,\n                y: orginY1\n            },\n            start: {\n                x: orginX3,\n                y: startY\n            },\n            width: textWidth,\n            height: config.fontSize,\n            text: item.text,\n            color: item.color\n        };\n\n        lastTextObject = avoidCollision(textObject, lastTextObject);\n        textObjectCollection.push(lastTextObject);\n    });\n\n    textObjectCollection.forEach(function (item) {\n        var lineStartPoistion = convertCoordinateOrigin(item.lineStart.x, item.lineStart.y, center);\n        var lineEndPoistion = convertCoordinateOrigin(item.lineEnd.x, item.lineEnd.y, center);\n        var textPosition = convertCoordinateOrigin(item.start.x, item.start.y, center);\n        context.setLineWidth(1*opts.pixelRatio);\n        context.setFontSize(config.fontSize);\n        context.beginPath();\n        context.setStrokeStyle(item.color);\n        context.setFillStyle(item.color);\n        context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\n        var curveStartX = item.start.x < 0 ? textPosition.x + item.width : textPosition.x;\n        var textStartX = item.start.x < 0 ? textPosition.x - 5 : textPosition.x + 5;\n        context.quadraticCurveTo(lineEndPoistion.x, lineEndPoistion.y, curveStartX, textPosition.y);\n        context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\n        context.stroke();\n        context.closePath();\n        context.beginPath();\n        context.moveTo(textPosition.x + item.width, textPosition.y);\n        context.arc(curveStartX, textPosition.y, 2, 0, 2 * Math.PI);\n        context.closePath();\n        context.fill();\n        context.beginPath();\n\t\tcontext.setFontSize(config.fontSize);\n        context.setFillStyle('#666666');\n        context.fillText(item.text, textStartX, textPosition.y + 3);\n        context.closePath();\n        context.stroke();\n        context.closePath();\n    });\n}\n\nfunction drawToolTipSplitLine(offsetX, opts, config, context) {\r\n\tvar toolTipOption = opts.extra.tooltip || {};\r\n\ttoolTipOption.gridType=toolTipOption.gridType==undefined? 'solid':toolTipOption.gridType;\r\n\ttoolTipOption.dashLength=toolTipOption.dashLength==undefined? 4:toolTipOption.dashLength;\n    var startY = config.padding;\n    var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\r\n\r\n\tif(toolTipOption.gridType=='dash'){\r\n\t\tcontext.setLineDash([toolTipOption.dashLength,toolTipOption.dashLength]);\r\n\t}\n    context.beginPath();\r\n\tcontext.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\r\n\tcontext.setLineWidth(1*opts.pixelRatio);\n    context.moveTo(offsetX, startY);\n    context.lineTo(offsetX, endY);\n    context.closePath();\n    context.stroke();\r\n\tcontext.setLineDash([]);\r\n\t\r\n\tif(toolTipOption.xAxisLabel){\r\n\t\tlet lableText = opts.categories[opts.tooltip.index];\r\n\t\tcontext.setFontSize(config.fontSize);\r\n\t\tlet textWidth = context.measureText(lableText).width;\r\n\t\t\r\n\t\tlet textX = offsetX - config.toolTipPadding - 0.5 * textWidth ;\r\n\t\tlet textY = endY;\r\n\t\tcontext.beginPath();\r\n\t\tcontext.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\r\n\t\tcontext.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\r\n\t\tcontext.setLineWidth(1*opts.pixelRatio);\r\n\t\tcontext.rect(textX, textY, textWidth + 2 * config.toolTipPadding , config.fontSize + 2 * config.toolTipPadding);\r\n\t\tcontext.closePath();\r\n\t\tcontext.stroke();\r\n\t\tcontext.fill();\r\n\t\t\r\n\t\tcontext.beginPath();\r\n\t\tcontext.setFontSize(config.fontSize);\r\n\t\tcontext.setFillStyle(toolTipOption.labelFontColor || config.fontColor);\r\n\t\tcontext.fillText(lableText, textX+2*config.toolTipPadding, textY+config.toolTipPadding+config.fontSize);\r\n\t\tcontext.closePath();\r\n\t\tcontext.stroke();\r\n\t}\n}\n\r\nfunction drawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints) {\r\n\tvar toolTipOption = opts.extra.tooltip || {};\r\n\ttoolTipOption.gridType=toolTipOption.gridType==undefined? 'solid':toolTipOption.gridType;\r\n\ttoolTipOption.dashLength=toolTipOption.dashLength==undefined? 4:toolTipOption.dashLength;\r\n\tvar startX = config.padding + config.yAxisWidth + config.yAxisTitleWidth;\n\tvar endX = opts.width-config.padding;\r\n\t\r\n\tif(toolTipOption.gridType=='dash'){\r\n\t\tcontext.setLineDash([toolTipOption.dashLength,toolTipOption.dashLength]);\r\n\t}\n    context.beginPath();\r\n\tcontext.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\r\n\tcontext.setLineWidth(1*opts.pixelRatio);\r\n\tcontext.moveTo(startX, opts.tooltip.offset.y);\r\n\tcontext.lineTo(endX, opts.tooltip.offset.y);\n    context.closePath();\n    context.stroke();\r\n\tcontext.setLineDash([]);\r\n\t\r\n\tif(toolTipOption.yAxisLabel){\r\n\t\t\r\n\t\tlet lableText = calTooltipYAxisData(opts.tooltip.offset.y,opts.series, opts, config,eachSpacing);\r\n\t\tcontext.setFontSize(config.fontSize);\r\n\t\tlet textWidth = context.measureText(lableText).width;\r\n\t\t\r\n\t\tlet textX = startX - 2*config.toolTipPadding - textWidth ;\r\n\t\tlet textY = opts.tooltip.offset.y;\r\n\t\tcontext.beginPath();\r\n\t\tcontext.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\r\n\t\tcontext.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\r\n\t\tcontext.setLineWidth(1*opts.pixelRatio);\r\n\t\tcontext.rect(textX, textY-0.5*config.fontSize-config.toolTipPadding, textWidth + 2 * config.toolTipPadding , config.fontSize + 2 * config.toolTipPadding);\r\n\t\tcontext.closePath();\r\n\t\tcontext.stroke();\r\n\t\tcontext.fill();\r\n\t\t\r\n\t\tcontext.beginPath();\r\n\t\tcontext.setFontSize(config.fontSize);\r\n\t\tcontext.setFillStyle(toolTipOption.labelFontColor || config.fontColor);\r\n\t\tcontext.fillText(lableText, textX+config.toolTipPadding, textY+0.5*config.fontSize);\r\n\t\tcontext.closePath();\r\n\t\tcontext.stroke();\r\n\t}\n}\n\r\n\r\nfunction drawToolTipSplitArea(offsetX, opts, config, context, eachSpacing) {\r\n\tvar toolTipOption = opts.extra.tooltip || {activeBgColor :'#000000',activeBgOpacity :0.08};\r\n\ttoolTipOption.activeBgColor = toolTipOption.activeBgColor? toolTipOption.activeBgColor:'#000000';\r\n\ttoolTipOption.activeBgOpacity = toolTipOption.activeBgOpacity? toolTipOption.activeBgOpacity:0.08;\n    var startY = config.padding;\n    var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n    context.beginPath();\r\n\tcontext.setFillStyle(hexToRgb(toolTipOption.activeBgColor, toolTipOption.activeBgOpacity));\r\n\tcontext.rect(offsetX-eachSpacing/2, startY, eachSpacing, endY-startY);\r\n\tcontext.closePath();\r\n\tcontext.fill();\n}\r\n\nfunction drawToolTip(textList, offset, opts, config, context, eachSpacing, xAxisPoints) {\r\n\tvar toolTipOption = opts.extra.tooltip || {bgColor:'#000000',bgOpacity :0.7,fontColor:'#FFFFFF'};\r\n\ttoolTipOption.bgColor = toolTipOption.bgColor? toolTipOption.bgColor:'#000000';\r\n\ttoolTipOption.bgOpacity = toolTipOption.bgOpacity? toolTipOption.bgOpacity:0.7;\r\n\ttoolTipOption.fontColor  = toolTipOption.fontColor ? toolTipOption.fontColor :'#FFFFFF';\n    var legendWidth = 4*opts.pixelRatio;\n    var legendMarginRight = 5*opts.pixelRatio;\n    var arrowWidth = 8*opts.pixelRatio;\n    var isOverRightBorder = false;\r\n\tif(opts.type=='line' || opts.type=='area' ||opts.type=='candle' || opts.type=='mix'){\r\n\t\tdrawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\r\n\t}\r\n\t\n    offset = assign({\n        x: 0,\n        y: 0\n    }, offset);\n    offset.y -= 8*opts.pixelRatio;\n    var textWidth = textList.map(function (item) {\n        return measureText(item.text);\n    });\n\n    var toolTipWidth = legendWidth + legendMarginRight + 4 * config.toolTipPadding + Math.max.apply(null, textWidth);\n    var toolTipHeight = 2 * config.toolTipPadding + textList.length * config.toolTipLineHeight;\n\n    // if beyond the right border\n    if (offset.x - Math.abs(opts._scrollDistance_) + arrowWidth + toolTipWidth > opts.width) {\n        isOverRightBorder = true;\n    }\n\n    // draw background rect\n    context.beginPath();\n    context.setFillStyle(hexToRgb(toolTipOption.bgColor || config.toolTipBackground, toolTipOption.bgOpacity || config.toolTipOpacity));\n    if (isOverRightBorder) {\n        context.moveTo(offset.x, offset.y + 10*opts.pixelRatio);\n        context.lineTo(offset.x - arrowWidth, offset.y + 10*opts.pixelRatio - 5*opts.pixelRatio);\n        context.lineTo(offset.x - arrowWidth, offset.y);\n        context.lineTo(offset.x - arrowWidth - Math.round(toolTipWidth), offset.y);\n        context.lineTo(offset.x - arrowWidth - Math.round(toolTipWidth), offset.y+toolTipHeight);\n        context.lineTo(offset.x - arrowWidth, offset.y+toolTipHeight);\n        context.lineTo(offset.x - arrowWidth, offset.y + 10*opts.pixelRatio + 5*opts.pixelRatio);\n        context.lineTo(offset.x, offset.y + 10*opts.pixelRatio);\n    } else {\n        context.moveTo(offset.x, offset.y + 10*opts.pixelRatio);\n        context.lineTo(offset.x + arrowWidth, offset.y + 10*opts.pixelRatio - 5*opts.pixelRatio);\n\t\tcontext.lineTo(offset.x + arrowWidth, offset.y);\n\t\tcontext.lineTo(offset.x + arrowWidth + Math.round(toolTipWidth), offset.y);\n\t\tcontext.lineTo(offset.x + arrowWidth + Math.round(toolTipWidth), offset.y+toolTipHeight);\n\t\tcontext.lineTo(offset.x + arrowWidth, offset.y+toolTipHeight);\n        context.lineTo(offset.x + arrowWidth, offset.y + 10*opts.pixelRatio + 5*opts.pixelRatio);\n        context.lineTo(offset.x, offset.y + 10*opts.pixelRatio);\n    }\n\n    context.closePath();\n    context.fill();\n\n    // draw legend\n    textList.forEach(function (item, index) {\r\n\t\tif(item.color !== null){\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.setFillStyle(item.color);\r\n\t\t\tvar startX = offset.x + arrowWidth + 2 * config.toolTipPadding;\r\n\t\t\tvar startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding + 1;\r\n\t\t\tif (isOverRightBorder) {\r\n\t\t\t    startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding;\r\n\t\t\t}\r\n\t\t\tcontext.fillRect(startX, startY, legendWidth, config.fontSize);\r\n\t\t\tcontext.closePath();\r\n\t\t}\n    });\n\n    // draw text list\n    \n    textList.forEach(function (item, index) {\n        var startX = offset.x + arrowWidth + 2 * config.toolTipPadding + legendWidth + legendMarginRight;\n        if (isOverRightBorder) {\n            startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding + +legendWidth + legendMarginRight;\n        }\n        var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding;\n\t\tcontext.beginPath();\n\t\tcontext.setFontSize(config.fontSize);\n\t\tcontext.setFillStyle(toolTipOption.fontColor);\n        context.fillText(item.text, startX, startY + config.fontSize);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n    });\n}\n\nfunction drawYAxisTitle(title, opts, config, context) {\n    var startX = config.xAxisHeight + (opts.height - config.xAxisHeight - measureText(title)) / 2;\n    context.save();\n    context.beginPath();\n    context.setFontSize(config.fontSize);\n    context.setFillStyle(opts.yAxis.titleFontColor || '#333333');\n    context.translate(0, opts.height);\n    context.rotate(-90 * Math.PI / 180);\n    context.fillText(title, startX, config.padding + 0.5 * config.fontSize);\n    context.closePath();\n    context.stroke();\n    context.restore();\n}\n\nfunction drawColumnDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\tvar columnOption = opts.extra.column || {type:{},meter:{}};\r\n\tcolumnOption.type=columnOption.type==undefined? 'group':columnOption.type;\r\n\tcolumnOption.meter=columnOption.meter||{}\r\n\tcolumnOption.meter.border=columnOption.meter.border==undefined? 4:columnOption.meter.border;\r\n\tcolumnOption.meter.fillColor=columnOption.meter.fillColor==undefined? '#FFFFFF':columnOption.meter.fillColor;\n    var _calYAxisData = calYAxisData(series, opts, config),\n        ranges = _calYAxisData.ranges;\r\n\t\t\n    var _getXAxisPoints = getXAxisPoints(opts.categories, opts, config),\n        xAxisPoints = _getXAxisPoints.xAxisPoints,\n        eachSpacing = _getXAxisPoints.eachSpacing;\n\n    var minRange = ranges.pop();\n    var maxRange = ranges.shift();\r\n\tvar calPoints = [];\r\n\t\n    context.save();\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n\tif (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\r\n\t    drawToolTipSplitArea(opts.tooltip.offset.x, opts, config, context, eachSpacing);\r\n\t}\r\n\t\n    series.forEach(function (eachSeries, seriesIndex) {\n        var data = eachSeries.data;\n\t\tswitch (columnOption.type){\r\n\t\tcase 'group':\r\n\t\t\tvar points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n\t\t\tvar tooltipPoints = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series,process);\r\n\t\t\tcalPoints.push(tooltipPoints);\r\n\t\t\tpoints = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\tif (item !== null) {\r\n\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\tcontext.setFillStyle(item.color || eachSeries.color);\r\n\t\t\t\t\tvar startX = item.x - item.width / 2 + 1;\r\n\t\t\t\t\tvar height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\r\n\t\t\t\t\tcontext.moveTo(startX, item.y);\r\n\t\t\t\t\tcontext.fillRect(startX, item.y, item.width - 2, height);\r\n\t\t\t\t\tcontext.closePath();\r\n\t\t\t\t\tcontext.fill();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\t\tcase 'stack':\r\n\t\t\t// 绘制堆叠数据图\n\t\t\tvar points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series,process);\r\n\t\t\tcalPoints.push(points);\r\n\t\t\tpoints = fixColumeStackData(points, eachSpacing, series.length, seriesIndex, config, opts,series);\r\n\t\t\t\r\n\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\tif (item !== null) {\r\n\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\tcontext.setFillStyle(item.color || eachSeries.color);\r\n\t\t\t\t\tvar startX = item.x - item.width / 2 + 1;\r\n\t\t\t\t\tvar height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\r\n\t\t\t\t\tvar height0 = opts.height - item.y0 - config.padding - config.xAxisHeight - config.legendHeight;\r\n\t\t\t\t\tif(seriesIndex>0){\r\n\t\t\t\t\t\theight -= height0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext.moveTo(startX, item.y);\r\n\t\t\t\t\tcontext.fillRect(startX, item.y, item.width - 2, height);\r\n\t\t\t\t\tcontext.closePath();\r\n\t\t\t\t\tcontext.fill();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\t\tcase 'meter':\r\n\t\t// 绘制温度计数据图\r\n\t\t\tvar points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n\t\t\tcalPoints.push(points);\r\n\t\t\tpoints = fixColumeMeterData(points, eachSpacing, series.length, seriesIndex, config, opts, columnOption.meter.border);\r\n\t\t\tif(seriesIndex==0){\r\n\t\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\t\tif (item !== null) {\r\n\t\t\t\t\t\t//画背景颜色\r\n\t\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\t\tcontext.setFillStyle(columnOption.meter.fillColor);\r\n\t\t\t\t\t\tvar startX = item.x - item.width / 2 + 1;\r\n\t\t\t\t\t\tvar height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\r\n\t\t\t\t\t\tcontext.moveTo(startX, item.y);\r\n\t\t\t\t\t\tcontext.fillRect(startX, item.y, item.width - 2, height);\r\n\t\t\t\t\t\tcontext.closePath();\r\n\t\t\t\t\t\tcontext.fill();\r\n\t\t\t\t\t\t//画边框线\r\n\t\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\t\tcontext.setStrokeStyle(eachSeries.color);\r\n\t\t\t\t\t\tcontext.setLineWidth(columnOption.meter.border*opts.pixelRatio);\r\n\t\t\t\t\t\tcontext.moveTo(startX+columnOption.meter.border*0.5, item.y+height);\r\n\t\t\t\t\t\tcontext.lineTo(startX+columnOption.meter.border*0.5, item.y+columnOption.meter.border*0.5);\r\n\t\t\t\t\t\tcontext.lineTo(startX+item.width-columnOption.meter.border, item.y+columnOption.meter.border*0.5);\r\n\t\t\t\t\t\tcontext.lineTo(startX+item.width-columnOption.meter.border, item.y+height);\r\n\t\t\t\t\t\tcontext.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\t\tif (item !== null) {\r\n\t\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\t\tcontext.setFillStyle(item.color || eachSeries.color);\r\n\t\t\t\t\t\tvar startX = item.x - item.width / 2 + 1;\r\n\t\t\t\t\t\tvar height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\r\n\t\t\t\t\t\tcontext.moveTo(startX, item.y);\r\n\t\t\t\t\t\tcontext.rect(startX, item.y, item.width - 2, height);\r\n\t\t\t\t\t\tcontext.closePath();\r\n\t\t\t\t\t\tcontext.fill();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\n    });\r\n\tif (opts.dataLabel !== false && process === 1) {\r\n\t    series.forEach(function (eachSeries, seriesIndex) {\r\n\t        var data = eachSeries.data;\r\n\t\t\tswitch (columnOption.type){\r\n\t\t\t\tcase 'group':\r\n\t\t\t\tvar points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n\t\t\t\tpoints = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n\t\t\t\t\r\n\t\t\t\tdrawPointText(points, eachSeries, config, context);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'stack':\r\n\t\t\t\tvar points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series,process);\r\n\t\t\t\tdrawPointText(points, eachSeries, config, context);\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'meter':\r\n\t\t\t\tvar points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n\t\t\t\tdrawPointText(points, eachSeries, config, context);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t    });\r\n\t}\r\n\t\n    context.restore();\r\n\t\n    return {\n        xAxisPoints: xAxisPoints,\r\n\t\tcalPoints: calPoints,\n        eachSpacing: eachSpacing\n    };\n}\n\nfunction drawCandleDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\tvar candleOption = opts.extra.candle || {color:{},average:{}};\n\tcandleOption.color.upLine=candleOption.color.upLine? candleOption.color.upLine: '#f04864';\n\tcandleOption.color.upFill=candleOption.color.upFill? candleOption.color.upFill: '#f04864';\n\tcandleOption.color.downLine=candleOption.color.downLine? candleOption.color.downLine: '#2fc25b';\n\tcandleOption.color.downFill=candleOption.color.downFill? candleOption.color.downFill: '#2fc25b';\n\tcandleOption.average.show = candleOption.average.show===true? true : false;\n\tcandleOption.average.name = candleOption.average.name? candleOption.average.name : [];\n\tcandleOption.average.day = candleOption.average.day? candleOption.average.day : [];\n\tcandleOption.average.color = candleOption.average.color? candleOption.average.color : ['#1890ff', '#2fc25b', '#facc14', '#f04864', '#8543e0', '#90ed7d'];\n\topts.extra.candle=candleOption;\n\t\n    var _calYAxisData5 = calYAxisData(series, opts, config),\n        ranges = _calYAxisData5.ranges;\n\t\t\n    var _getXAxisPoints5 = getXAxisPoints(opts.categories, opts, config),\n        xAxisPoints = _getXAxisPoints5.xAxisPoints,\n        eachSpacing = _getXAxisPoints5.eachSpacing;\n\n    var minRange = ranges.pop();\n    var maxRange = ranges.shift();\n    var calPoints = [];\n\n    context.save();\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n\n    series.forEach(function (eachSeries, seriesIndex) {\n        var data = eachSeries.data;\n        var points = getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n        calPoints.push(points);\n        var splitPointList = splitPoints(points);\n\t\tsplitPointList=splitPointList[0];\n\t\t\n        splitPointList.forEach(function (points, index) {\n\t\t\tcontext.beginPath();\n\t\t\t//如果上涨\n\t\t\tif(data[index][1]-data[index][0]>0){\n\t\t\t\tcontext.setStrokeStyle(candleOption.color.upLine);\n\t\t\t\tcontext.setFillStyle(candleOption.color.upFill);\n\t\t\t\tcontext.setLineWidth(1*opts.pixelRatio);\n\t\t\t\tcontext.moveTo(points[3].x, points[3].y);//顶点\n\t\t\t\tcontext.lineTo(points[1].x, points[1].y);//收盘中间点\n\t\t\t\tcontext.lineTo(points[1].x-eachSpacing/4, points[1].y);//收盘左侧点\n\t\t\t\tcontext.lineTo(points[0].x-eachSpacing/4, points[0].y);//开盘左侧点\n\t\t\t\tcontext.lineTo(points[0].x, points[0].y);//开盘中间点\n\t\t\t\tcontext.lineTo(points[2].x, points[2].y);//底点\n\t\t\t\tcontext.lineTo(points[0].x, points[0].y);//开盘中间点\n\t\t\t\tcontext.lineTo(points[0].x+eachSpacing/4, points[0].y);//开盘右侧点\n\t\t\t\tcontext.lineTo(points[1].x+eachSpacing/4, points[1].y);//收盘右侧点\n\t\t\t\tcontext.lineTo(points[1].x, points[1].y);//收盘中间点\n\t\t\t\tcontext.moveTo(points[3].x, points[3].y);//顶点\n\t\t\t}else{\n\t\t\t\tcontext.setStrokeStyle(candleOption.color.downLine);\n\t\t\t\tcontext.setFillStyle(candleOption.color.downFill);\n\t\t\t\tcontext.setLineWidth(1*opts.pixelRatio);\n\t\t\t\tcontext.moveTo(points[3].x, points[3].y);//顶点\n\t\t\t\tcontext.lineTo(points[0].x, points[0].y);//开盘中间点\n\t\t\t\tcontext.lineTo(points[0].x-eachSpacing/4, points[0].y);//开盘左侧点\n\t\t\t\tcontext.lineTo(points[1].x-eachSpacing/4, points[1].y);//收盘左侧点\n\t\t\t\tcontext.lineTo(points[1].x, points[1].y);//收盘中间点\n\t\t\t\tcontext.lineTo(points[2].x, points[2].y);//底点\n\t\t\t\tcontext.lineTo(points[1].x, points[1].y);//收盘中间点\n\t\t\t\tcontext.lineTo(points[1].x+eachSpacing/4, points[1].y);//收盘右侧点\n\t\t\t\tcontext.lineTo(points[0].x+eachSpacing/4, points[0].y);//开盘右侧点\n\t\t\t\tcontext.lineTo(points[0].x, points[0].y);//开盘中间点\n\t\t\t\tcontext.moveTo(points[3].x, points[3].y);//顶点\n\t\t\t}\n\t\t\tcontext.closePath();\n\t\t\tcontext.fill();\n\t\t\tcontext.stroke();\n        });\n    });\n\n    context.restore();\n\t\n\t//画均线\n\tif(candleOption.average.show){\n\t\t\n\t}\n\n    return {\n        xAxisPoints: xAxisPoints,\n        calPoints: calPoints,\n        eachSpacing: eachSpacing\n    };\n}\n\nfunction drawAreaDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\tvar areaOption = opts.extra.area || {type:'straight',opacity:0.5,addLine:false,width:2};\r\n\tareaOption.type = areaOption.type? areaOption.type: 'straight';\r\n\tareaOption.opacity = areaOption.opacity? areaOption.opacity: 0.2;\r\n\tareaOption.addLine = areaOption.addLine==true? true: false;\r\n\tareaOption.width = areaOption.width? areaOption.width: 2;\n    var _calYAxisData2 = calYAxisData(series, opts, config),\n        ranges = _calYAxisData2.ranges;\n\n    var _getXAxisPoints2 = getXAxisPoints(opts.categories, opts, config),\n        xAxisPoints = _getXAxisPoints2.xAxisPoints,\n        eachSpacing = _getXAxisPoints2.eachSpacing;\n\n    var minRange = ranges.pop();\n    var maxRange = ranges.shift();\n    var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n    var calPoints = [];\n\n    context.save();\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n\n    if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n        drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n    }\n\t\n\t\n    series.forEach(function (eachSeries, seriesIndex) {\n        var data = eachSeries.data;\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n        calPoints.push(points);\n\n        var splitPointList = splitPoints(points);\n\n        splitPointList.forEach(function (points) {\n            // 绘制区域数据\n            context.beginPath();\n            context.setStrokeStyle(hexToRgb(eachSeries.color, areaOption.opacity));\n            context.setFillStyle(hexToRgb(eachSeries.color, areaOption.opacity));\n            context.setLineWidth(areaOption.width*opts.pixelRatio);\n            if (points.length > 1) {\n                var firstPoint = points[0];\n                var lastPoint = points[points.length - 1];\n\n                context.moveTo(firstPoint.x, firstPoint.y);\n                if (areaOption.type === 'curve') {\n                    points.forEach(function (item, index) {\n                        if (index > 0) {\n                            var ctrlPoint = createCurveControlPoints(points, index - 1);\n                            context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n                        }\n                    });\n                } else {\n                    points.forEach(function (item, index) {\n                        if (index > 0) {\n                            context.lineTo(item.x, item.y);\n                        }\n                    });\n                }\n\n                context.lineTo(lastPoint.x, endY);\n                context.lineTo(firstPoint.x, endY);\n                context.lineTo(firstPoint.x, firstPoint.y);\n            } else {\n                var item = points[0];\n                context.moveTo(item.x - eachSpacing / 2, item.y);\n                context.lineTo(item.x + eachSpacing / 2, item.y);\n                context.lineTo(item.x + eachSpacing / 2, endY);\n                context.lineTo(item.x - eachSpacing / 2, endY);\n                context.moveTo(item.x - eachSpacing / 2, item.y);\n            }\n            context.closePath();\n            context.fill();\n\t\t\t\n\t\t\t\n\t\t\t//画连线\r\n\t\t\tif(areaOption.addLine){\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.setStrokeStyle(eachSeries.color);\r\n\t\t\t\tcontext.setLineWidth(areaOption.width * opts.pixelRatio);\r\n\t\t\t\tif (points.length === 1) {\r\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t\tcontext.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t\tif (areaOption.type === 'curve') {\r\n\t\t\t\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\t\tvar ctrlPoint = createCurveControlPoints(points, index - 1);\r\n\t\t\t\t\t\t\t\tcontext.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\t\tcontext.lineTo(item.x, item.y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t}\n\t\t});\t\n\t\t\n\t\t//画点\n        if (opts.dataPointShape !== false) {\n            var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n            drawPointShape(points, eachSeries.color, shape, context,opts);\n        }\n\t\t\n    });\n    if (opts.dataLabel !== false && process === 1) {\n        series.forEach(function (eachSeries, seriesIndex) {\n            var data = eachSeries.data;\n            var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n            drawPointText(points, eachSeries, config, context);\n        });\n    }\n\n    context.restore();\n\n    return {\n        xAxisPoints: xAxisPoints,\n        calPoints: calPoints,\n        eachSpacing: eachSpacing\n    };\n}\n\nfunction drawLineDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\tvar lineOption = opts.extra.line || {type:'straight',width:2};\r\n\tlineOption.type = lineOption.type? lineOption.type: 'straight';\r\n\tlineOption.width = lineOption.width? lineOption.width: 2;\n    var _calYAxisData3 = calYAxisData(series, opts, config),\n        ranges = _calYAxisData3.ranges;\n\n    var _getXAxisPoints3 = getXAxisPoints(opts.categories, opts, config),\n        xAxisPoints = _getXAxisPoints3.xAxisPoints,\n        eachSpacing = _getXAxisPoints3.eachSpacing;\n\n    var minRange = ranges.pop();\n    var maxRange = ranges.shift();\n    var calPoints = [];\n\n    context.save();\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n\n    if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n        drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n    }\n\n    series.forEach(function (eachSeries, seriesIndex) {\n        var data = eachSeries.data;\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n        calPoints.push(points);\n        var splitPointList = splitPoints(points);\n\n        splitPointList.forEach(function (points, index) {\n            context.beginPath();\n            context.setStrokeStyle(eachSeries.color);\n            context.setLineWidth(lineOption.width*opts.pixelRatio);\n            if (points.length === 1) {\n                context.moveTo(points[0].x, points[0].y);\n                context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\n            } else {\n                context.moveTo(points[0].x, points[0].y);\n                if (lineOption.type === 'curve') {\n                    points.forEach(function (item, index) {\n                        if (index > 0) {\n                            var ctrlPoint = createCurveControlPoints(points, index - 1);\n                            context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n                        }\n                    });\n                } else {\n                    points.forEach(function (item, index) {\n                        if (index > 0) {\n                            context.lineTo(item.x, item.y);\n                        }\n                    });\n                }\n                context.moveTo(points[0].x, points[0].y);\n            }\n            context.closePath();\n            context.stroke();\n        });\n\n        if (opts.dataPointShape !== false) {\n            var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n            drawPointShape(points, eachSeries.color, shape, context,opts);\n        }\n    });\n    if (opts.dataLabel !== false && process === 1) {\n        series.forEach(function (eachSeries, seriesIndex) {\n            var data = eachSeries.data;\n            var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n            drawPointText(points, eachSeries, config, context);\n        });\n    }\n\n    context.restore();\n\n    return {\n        xAxisPoints: xAxisPoints,\n        calPoints: calPoints,\n        eachSpacing: eachSpacing\n    };\n}\n\r\nfunction drawMixDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    var _calYAxisData6 = calYAxisData(series, opts, config),\n        ranges = _calYAxisData6.ranges;\n\n    var _getXAxisPoints6 = getXAxisPoints(opts.categories, opts, config),\n        xAxisPoints = _getXAxisPoints6.xAxisPoints,\n        eachSpacing = _getXAxisPoints6.eachSpacing;\n\n    var minRange = ranges.pop();\n    var maxRange = ranges.shift();\r\n\tvar endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n    var calPoints = [];\n\t\r\n\tvar columnIndex=0;\r\n\tvar columnLength=0;\r\n\tseries.forEach(function (eachSeries, seriesIndex) {\r\n\t\tif(eachSeries.type=='column'){\r\n\t\t\tcolumnLength+=1;\r\n\t\t}\r\n\t});\n    context.save();\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n\n    if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n        drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\n    }\n\n    series.forEach(function (eachSeries, seriesIndex) {\n        var data = eachSeries.data;\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\n        calPoints.push(points);\n        \r\n\t\t// 绘制柱状数据图\r\n\t\tif(eachSeries.type=='column'){\r\n\t\t\tpoints = fixColumeData(points, eachSpacing, columnLength , columnIndex, config, opts);\r\n\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t    if (item !== null) {\r\n\t\t\t\t\tcontext.beginPath();\r\n\t\t\t\t\tcontext.setFillStyle(item.color || eachSeries.color);\r\n\t\t\t        var startX = item.x - item.width / 2 + 1;\r\n\t\t\t        var height = opts.height - item.y - config.padding - config.xAxisHeight - config.legendHeight;\r\n\t\t\t        context.moveTo(startX, item.y);\r\n\t\t\t        context.rect(startX, item.y, item.width - 2, height);\r\n\t\t\t\t\tcontext.closePath();\r\n\t\t\t\t\tcontext.fill();\r\n\t\t\t    }\r\n\t\t\t});\r\n\t\t\tcolumnIndex+=1;\r\n\t\t}\r\n\t\t\r\n\t\t//绘制区域图数据\r\n\t\t\r\n\t\tif(eachSeries.type=='area'){\r\n\t\t\tvar splitPointList = splitPoints(points);\r\n\t\t\tsplitPointList.forEach(function (points) {\r\n\t\t\t\t// 绘制区域数据\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.setStrokeStyle(eachSeries.color);\r\n\t\t\t\tcontext.setFillStyle(eachSeries.color);\r\n\t\t\t\tcontext.setGlobalAlpha(0.2);\r\n\t\t\t\tcontext.setLineWidth(2*opts.pixelRatio);\r\n\t\t\t\tif (points.length > 1) {\r\n\t\t\t\t\tvar firstPoint = points[0];\r\n\t\t\t\t\tvar lastPoint = points[points.length - 1];\r\n\t\t\t\t\tcontext.moveTo(firstPoint.x, firstPoint.y);\r\n\t\t\t\t\tif (eachSeries.style === 'curve') {\r\n\t\t\t\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\t\tvar ctrlPoint = createCurveControlPoints(points, index - 1);\r\n\t\t\t\t\t\t\t\tcontext.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpoints.forEach(function (item, index) {\r\n\t\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\t\tcontext.lineTo(item.x, item.y);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontext.lineTo(lastPoint.x, endY);\r\n\t\t\t\t\tcontext.lineTo(firstPoint.x, endY);\r\n\t\t\t\t\tcontext.lineTo(firstPoint.x, firstPoint.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar item = points[0];\r\n\t\t\t\t\tcontext.moveTo(item.x - eachSpacing / 2, item.y);\r\n\t\t\t\t\tcontext.lineTo(item.x + eachSpacing / 2, item.y);\r\n\t\t\t\t\tcontext.lineTo(item.x + eachSpacing / 2, endY);\r\n\t\t\t\t\tcontext.lineTo(item.x - eachSpacing / 2, endY);\r\n\t\t\t\t\tcontext.moveTo(item.x - eachSpacing / 2, item.y);\r\n\t\t\t\t}\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.fill();\r\n\t\t\t\tcontext.setGlobalAlpha(1);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t// 绘制折线数据图\r\n\t\tif(eachSeries.type=='line'){\r\n\t\t\tvar splitPointList = splitPoints(points);\n\t\t\tsplitPointList.forEach(function (points, index) {\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.setStrokeStyle(eachSeries.color);\n\t\t\t\tcontext.setLineWidth(2*opts.pixelRatio);\n\t\t\t\tif (points.length === 1) {\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\n\t\t\t\t\tcontext.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\n\t\t\t\t} else {\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\n\t\t\t\t\tif (eachSeries.style=='curve') {\n\t\t\t\t\t\tpoints.forEach(function (item, index) {\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\tvar ctrlPoint = createCurveControlPoints(points, index - 1);\n\t\t\t\t\t\t\t\tcontext.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpoints.forEach(function (item, index) {\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\tcontext.lineTo(item.x, item.y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\n\t\t\t\t}\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t});\n\t\t}\r\n\t\t\r\n\t\t// 绘制点数据图\r\n\t\tif(eachSeries.type=='point'){\r\n\t\t\tvar splitPointList = splitPoints(points);\r\n\t\t\tsplitPointList.forEach(function (points, index) {\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.setStrokeStyle(eachSeries.color);\r\n\t\t\t\tcontext.setLineWidth(2*opts.pixelRatio);\r\n\t\t\t\tcontext.moveTo(points[0].x, points[0].y);\r\n\t\t\t\tcontext.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\n        if (opts.dataPointShape !== false && eachSeries.type!=='column') {\n            var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n            drawPointShape(points, eachSeries.color, shape, context,opts);\n        }\n    });\n    if (opts.dataLabel !== false && process === 1) {\r\n\t\tvar columnIndex=0;\n        series.forEach(function (eachSeries, seriesIndex) {\n            var data = eachSeries.data;\r\n\t\t\tvar points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n\t\t\tif(eachSeries.type!=='column'){\r\n\t\t\t\tdrawPointText(points, eachSeries, config, context);\r\n\t\t\t}else{\r\n\t\t\t\tpoints = fixColumeData(points, eachSpacing, columnLength, columnIndex, config, opts);\r\n\t\t\t\tdrawPointText(points, eachSeries, config, context);\r\n\t\t\t\tcolumnIndex+=1;\r\n\t\t\t}\n            \n        });\n    }\n\n    context.restore();\n\n    return {\n        xAxisPoints: xAxisPoints,\n        calPoints: calPoints,\n        eachSpacing: eachSpacing\n    };\n}\n\nfunction drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints) {\r\n\tvar toolTipOption = opts.extra.tooltip || {};\r\n\tif(toolTipOption.horizentalLine && opts.tooltip && process === 1 && (opts.type=='line' || opts.type=='area' || opts.type=='column' || opts.type=='candle' || opts.type=='mix')){\r\n\t\tdrawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints)\r\n\t}\n    context.save();\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n    if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\n        drawToolTip(opts.tooltip.textList, opts.tooltip.offset, opts, config, context, eachSpacing, xAxisPoints);\n    }\n    context.restore();\r\n\t\n}\n\nfunction drawXAxis(categories, opts, config, context) {\n\t\n    var _getXAxisPoints4 = getXAxisPoints(categories, opts, config),\n        xAxisPoints = _getXAxisPoints4.xAxisPoints,\n        startX = _getXAxisPoints4.startX,\n        endX = _getXAxisPoints4.endX,\n        eachSpacing = _getXAxisPoints4.eachSpacing;\n\n    var startY = opts.height - config.padding - config.xAxisHeight - config.legendHeight;\n    var endY = config.padding;\n\n\n\t//绘制滚动条\n\tif(opts.enableScroll && opts.xAxis.scrollShow){\n\t\tvar scrollY=opts.height - config.padding - config.legendHeight + 6*opts.pixelRatio;\n\t\tvar scrollScreenWidth=endX-startX;\n\t\tvar scrollTotalWidth=eachSpacing*(xAxisPoints.length-1);\n\t\tvar scrollWidth=scrollScreenWidth*scrollScreenWidth/scrollTotalWidth;\n\t\tvar scrollLeft=0;\n\t\tif (opts._scrollDistance_){\n\t\t\tscrollLeft=-opts._scrollDistance_*(scrollScreenWidth)/scrollTotalWidth;\n\t\t}\n\t\tcontext.beginPath();\n\t\tcontext.setLineCap('round');\n\t\tcontext.setLineWidth(6*opts.pixelRatio);\n\t\tcontext.setStrokeStyle(opts.xAxis.scrollBackgroundColor || \"#EFEBEF\");\n\t\tcontext.moveTo(startX, scrollY);\n\t\tcontext.lineTo(endX, scrollY);\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\t\tcontext.beginPath();\n\t\tcontext.setLineCap('round');\n\t\tcontext.setLineWidth(6*opts.pixelRatio);\n\t\tcontext.setStrokeStyle(opts.xAxis.scrollColor ||\"#A6A6A6\");\n\t\tcontext.moveTo(startX+scrollLeft, scrollY);\n\t\tcontext.lineTo(startX+scrollLeft+scrollWidth, scrollY);\n\t\tcontext.stroke();\r\n\t\tcontext.setLineCap('butt');\n\t\tcontext.closePath();\n\t}\n\t\n    context.save();\n\t\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n\n    context.beginPath();\n    context.setStrokeStyle(opts.xAxis.gridColor || \"#cccccc\");\n\tcontext.setLineCap('butt');\n\tcontext.setLineWidth(1*opts.pixelRatio);\n\tif(opts.xAxis.gridType=='dash'){\n\t\tcontext.setLineDash([opts.xAxis.dashLength,opts.xAxis.dashLength]);\n\t}\n    if (opts.xAxis.disableGrid !== true) {\n        if (opts.xAxis.type === 'calibration') {\n            xAxisPoints.forEach(function (item, index) {\n                if (index > 0) {\n                    context.moveTo(item - eachSpacing / 2, startY);\n                    context.lineTo(item - eachSpacing / 2, startY + 4*opts.pixelRatio);\n                }\n            });\n        } else {\n            xAxisPoints.forEach(function (item, index) {\n                context.moveTo(item, startY);\n                context.lineTo(item, endY);\n            });\n        }\n    }\n    context.closePath();\n    context.stroke();\n\tcontext.setLineDash([]);\n\r\n\t//不绘制X轴\r\n\tif (opts.xAxis.disabled !== true) {\n\t\t// 对X轴列表做抽稀处理\n\t\tvar validWidth = opts.width - 2 * config.padding - config.yAxisWidth - config.yAxisTitleWidth;\n\t\tvar maxXAxisListLength = Math.min(categories.length, Math.ceil(validWidth / config.fontSize / 1.5));\n\t\tvar ratio = Math.ceil(categories.length / maxXAxisListLength);\n\t\tcategories = categories.map(function (item, index) {\n\t\t\treturn index % ratio !== 0 ? '' : item;\n\t\t});\n\n\t\tif (config._xAxisTextAngle_ === 0) {\n\t\t\tcategories.forEach(function (item, index) {\n\t\t\t\tvar offset = eachSpacing / 2 - measureText(item) / 2;\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.setFontSize(config.fontSize);\n\t\t\t\tcontext.setFillStyle(opts.xAxis.fontColor || '#666666');\n\t\t\t\tcontext.fillText(item, xAxisPoints[index] + offset, startY + config.fontSize + 5);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t});\n\t\t\t\n\t\t} else {\n\t\t\tcategories.forEach(function (item, index) {\n\t\t\t\tcontext.save();\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.setFontSize(config.fontSize);\n\t\t\t\tcontext.setFillStyle(opts.xAxis.fontColor || '#666666');\n\t\t\t\tvar textWidth = measureText(item);\n\t\t\t\tvar offset = eachSpacing / 2 - textWidth;\n\n\t\t\t\tvar _calRotateTranslate = calRotateTranslate(xAxisPoints[index] + eachSpacing / 2, startY + config.fontSize / 2 + 5, opts.height),\n\t\t\t\t\ttransX = _calRotateTranslate.transX,\n\t\t\t\t\ttransY = _calRotateTranslate.transY;\n\n\t\t\t\tcontext.rotate(-1 * config._xAxisTextAngle_);\n\t\t\t\tcontext.translate(transX, transY);\n\t\t\t\tcontext.fillText(item, xAxisPoints[index] + offset, startY + config.fontSize + 5);\n\t\t\t\tcontext.closePath();\n\t\t\t\tcontext.stroke();\n\t\t\t\tcontext.restore();\n\t\t\t});\n\t\t}\n\t}\t\n    context.restore();\n\n}\n\nfunction drawYAxisGrid(categories,opts, config, context) {\n\tif (opts.yAxis.disableGrid === true) {\n        return;\n    }\n    var spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n    var eachSpacing = Math.floor(spacingValid / config.yAxisSplit);\n    var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n    var startX = config.padding + yAxisTotalWidth;\n\tvar _getXAxisPoints4 = getXAxisPoints(categories, opts, config),\n\t    xAxisPoints = _getXAxisPoints4.xAxisPoints,\n\t    xAxiseachSpacing = _getXAxisPoints4.eachSpacing;\n\tvar TotalWidth=xAxiseachSpacing*(xAxisPoints.length-1);\n\tvar endX = startX+TotalWidth;\n\t\n    var points = [];\n    for (var i = 0; i < config.yAxisSplit; i++) {\n        points.push(config.padding + eachSpacing * i);\n    }\n    points.push(config.padding + eachSpacing * config.yAxisSplit + 2);\n\n\tcontext.save();\n    if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\n        context.translate(opts._scrollDistance_, 0);\n    }\n\t\n\tif(opts.yAxis.gridType=='dash'){\n\t\tcontext.setLineDash([opts.yAxis.dashLength,opts.yAxis.dashLength]);\n\t}\n    context.beginPath();\n    context.setStrokeStyle(opts.yAxis.gridColor || \"#cccccc\");\n\t\n    context.setLineWidth(1*opts.pixelRatio);\n    points.forEach(function (item, index) {\n        context.moveTo(startX, item);\n        context.lineTo(endX, item);\n    });\n    context.closePath();\n    context.stroke();\n\tcontext.setLineDash([]);\n\t\n\tcontext.restore();\n}\n\nfunction drawYAxis(series, opts, config, context) {\n    if (opts.yAxis.disabled === true) {\n        return;\n    }\n\n    var _calYAxisData4 = calYAxisData(series, opts, config),\n        rangesFormat = _calYAxisData4.rangesFormat;\n\n    var yAxisTotalWidth = config.yAxisWidth + config.yAxisTitleWidth;\n\n    var spacingValid = opts.height - 2 * config.padding - config.xAxisHeight - config.legendHeight;\n    var eachSpacing = Math.floor(spacingValid / config.yAxisSplit);\n    var startX = config.padding + yAxisTotalWidth;\n    var endX = opts.width - config.padding;\n    var endY = opts.height - config.padding - config.xAxisHeight - config.legendHeight+config.xAxisTextPadding;\n\n    // set YAxis background\r\n\tcontext.beginPath();\n    context.setFillStyle(opts.background || '#ffffff');\n    if (opts._scrollDistance_ < 0) {\n        context.fillRect(0, 0, startX, endY + config.xAxisHeight );\n    }\n    context.fillRect(endX, 0, opts.width, endY + config.xAxisHeight );\n\tcontext.closePath();\r\n\tcontext.stroke();\r\n\n    var points = [];\n    for (var i = 0; i <= config.yAxisSplit; i++) {\n        points.push(config.padding + eachSpacing * i);\n    }\n    \n    \n    rangesFormat.forEach(function (item, index) {\n        var pos = points[index] ? points[index] : endY;\n\t\tcontext.beginPath();\n\t\tcontext.setFontSize(config.fontSize);\n\t\tcontext.setFillStyle(opts.yAxis.fontColor || '#666666');\n        context.fillText(item, config.padding + config.yAxisTitleWidth, pos + config.fontSize / 2);\n\t\tcontext.closePath();\n\t\tcontext.stroke();\n    });\n    \n\n    if (opts.yAxis.title) {\n        drawYAxisTitle(opts.yAxis.title, opts, config, context);\n    }\n}\n\nfunction drawLegend(series, opts, config, context) {\n    if (opts.legend===false) {\n        return;\n    }\n    // each legend shape width 15px\n    // the spacing between shape and text in each legend is the `padding`\n    // each legend spacing is the `padding`\n    // legend margin top `config.padding`\n\n    var _calLegendData = calLegendData(series, opts, config),\n        legendList = _calLegendData.legendList;\n\n    var padding = 5*opts.pixelRatio;\n    var marginTop = 10*opts.pixelRatio;\n    var shapeWidth = 15*opts.pixelRatio;\n    legendList.forEach(function (itemList, listIndex) {\n        var width = 0;\n        itemList.forEach(function (item) {\n            item.name = item.name || 'undefined';\n            width += 3 * padding + measureText(item.name) + shapeWidth;\n        });\n        var startX = (opts.width - width) / 2 + padding;\n        var startY = opts.height - config.padding - config.legendHeight + listIndex * (config.fontSize + marginTop) + padding + marginTop;\n\n        context.setFontSize(config.fontSize);\n        itemList.forEach(function (item) {\n            switch (opts.type) {\n                case 'line':\n                    context.beginPath();\n                    context.setLineWidth(1*opts.pixelRatio);\n                    context.setStrokeStyle(item.color);\n                    context.setFillStyle(item.color);\n                    context.moveTo(startX + 7.5*opts.pixelRatio, startY + 5*opts.pixelRatio);\n                    context.arc(startX + 7.5*opts.pixelRatio, startY + 5*opts.pixelRatio, 6*opts.pixelRatio, 0, 2 * Math.PI);\r\n                    context.closePath();\n                    context.fill();\r\n                    context.stroke();\n                    break;\n                case 'pie':\n\t\t\t\t\tcontext.beginPath();\n\t\t\t\t\tcontext.setLineWidth(1*opts.pixelRatio);\n\t\t\t\t\tcontext.setStrokeStyle(item.color);\n\t\t\t\t\tcontext.setFillStyle(item.color);\n\t\t\t\t\tcontext.moveTo(startX + 7.5*opts.pixelRatio, startY + 5*opts.pixelRatio);\n\t\t\t\t\tcontext.arc(startX + 7.5*opts.pixelRatio, startY + 5*opts.pixelRatio, 6*opts.pixelRatio, 0, 2 * Math.PI);\r\n\t\t\t\t\tcontext.closePath();\n\t\t\t\t\tcontext.fill();\n\t\t\t\t\tcontext.stroke();\n\t\t\t\t\tbreak;\n                case 'ring':\n                    context.beginPath();\n                    context.setLineWidth(1*opts.pixelRatio);\n                    context.setStrokeStyle(item.color);\n                    context.setFillStyle(item.color);\n                    context.moveTo(startX + 7.5*opts.pixelRatio, startY + 5*opts.pixelRatio);\n                    context.arc(startX + 7.5*opts.pixelRatio, startY + 5*opts.pixelRatio, 6*opts.pixelRatio, 0, 2 * Math.PI);\r\n                    context.closePath();\n                    context.fill();\n                    context.stroke();\n                    break;\n\t\t\t\t//圆弧进度图不显示图例\n\t\t\t\tcase 'gauge':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'arcbar':\n\t\t\t\t\tbreak;\n                default:\n                    context.beginPath();\r\n\t\t\t\t\tcontext.setLineWidth(1*opts.pixelRatio);\r\n\t\t\t\t\tcontext.setStrokeStyle(item.color);\n                    context.setFillStyle(item.color);\n                    context.moveTo(startX, startY);\n                    context.fillRect(startX, startY, 15*opts.pixelRatio, 10*opts.pixelRatio);\n                    context.closePath();\n                    context.fill();\n                    context.stroke();\n            }\n            startX += padding + shapeWidth;\n            context.beginPath();\n\t\t\tcontext.setFontSize(config.fontSize);\n            context.setFillStyle(opts.extra.legendTextColor || '#333333');\n            context.fillText(item.name, startX, startY + 6*opts.pixelRatio+3*opts.pixelRatio);\n            context.closePath();\n            context.stroke();\n            startX += measureText(item.name) + 2 * padding;\n        });\n    });\n}\n\nfunction drawPieDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    var pieOption = opts.extra.pie || {};\n    series = getPieDataPoints(series, process);\n    var centerPosition = {\n        x: opts.width / 2,\n        y: (opts.height - config.legendHeight) / 2\n    };\n    var radius = Math.min(centerPosition.x - config.pieChartLinePadding - config.pieChartTextPadding - config._pieTextMaxLength_, centerPosition.y - config.pieChartLinePadding - config.pieChartTextPadding);\n    if (opts.dataLabel) {\n        radius -= 10;\n    } else {\n        radius -= 2 * config.padding;\n    }\r\n\t\r\n\tvar activeRadius=radius+config.pieChartLinePadding/2;\r\n\t\r\n\t\n    series = series.map(function (eachSeries) {\n        eachSeries._start_ += (pieOption.offsetAngle || 0) * Math.PI / 180;\n        return eachSeries;\n    });\n    series.forEach(function (eachSeries,seriesIndex) {\r\n\t\tif(opts.tooltip){\r\n\t\t\tif(opts.tooltip.index==seriesIndex){\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.setFillStyle(hexToRgb(eachSeries.color, opts.extra.pie.activeOpacity || 0.5));\r\n\t\t\t\tcontext.moveTo(centerPosition.x, centerPosition.y);\r\n\t\t\t\tcontext.arc(centerPosition.x, centerPosition.y, activeRadius, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.fill();\r\n\t\t\t}\r\n\t\t}\n        context.beginPath();\n        context.setLineWidth(2*opts.pixelRatio);\r\n\t\tcontext.lineJoin=\"round\";\n        context.setStrokeStyle('#ffffff');\n        context.setFillStyle(eachSeries.color);\n        context.moveTo(centerPosition.x, centerPosition.y);\n        context.arc(centerPosition.x, centerPosition.y, radius, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\n        context.closePath();\n        context.fill();\n        if (opts.disablePieStroke !== true) {\n            context.stroke();\n        }\n    });\n\n    if (opts.type === 'ring') {\n        var innerPieWidth = radius * 0.6;\n        if (typeof opts.extra.pie.ringWidth === 'number' && opts.extra.pie.ringWidth > 0) {\n            innerPieWidth = Math.max(0, radius - opts.extra.pie.ringWidth);\n        }\n        context.beginPath();\n        context.setFillStyle(opts.background || '#ffffff');\n        context.moveTo(centerPosition.x, centerPosition.y);\n        context.arc(centerPosition.x, centerPosition.y, innerPieWidth, 0, 2 * Math.PI);\n        context.closePath();\n        context.fill();\n    }\n\n    if (opts.dataLabel !== false && process === 1) {\n        // fix https://github.com/xiaolin3303/wx-charts/issues/132\n        var valid = false;\n        for (var i = 0, len = series.length; i < len; i++) {\n            if (series[i].data > 0) {\n                valid = true;\n                break;\n            }\n        }\n\n        if (valid) {\n            drawPieText(series, opts, config, context, radius, centerPosition);\n        }\n    }\n\n    if (process === 1 && opts.type === 'ring') {\n        drawRingTitle(opts, config, context);\n    }\n\n    return {\n        center: centerPosition,\n        radius: radius,\n        series: series\n    };\n}\n\nfunction drawArcbarDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    var arcbarOption = opts.extra.arcbar || {};\n\tarcbarOption.startAngle=arcbarOption.startAngle? arcbarOption.startAngle: 0.75;\n\tarcbarOption.endAngle=arcbarOption.endAngle? arcbarOption.endAngle : 0.25;\n\tarcbarOption.type=arcbarOption.type? arcbarOption.type : 'default';\n\t\n    series = getArcbarDataPoints(series, arcbarOption, process);\n    var centerPosition = {\n        x: opts.width / 2,\n        y: (opts.height) / 2\n    };\n    var radius = Math.min(centerPosition.x , centerPosition.y);\n   \n\tif (typeof arcbarOption.width === 'number' && arcbarOption.width > 0) {\n\t    arcbarOption.width=arcbarOption.width;\n\t}else{\n\t\tarcbarOption.width=12*opts.pixelRatio;\n\t}\n\tradius -= config.padding+arcbarOption.width/2;\n\t\n\t//背景颜色\n\tcontext.setLineWidth(arcbarOption.width); // 设置圆环的宽度\n\tcontext.setStrokeStyle(arcbarOption.backgroundColor || '#E9E9E9'); // 设置圆环的颜色\n\tcontext.setLineCap('round'); // 设置圆环端点的形状\n\tcontext.beginPath(); //开始一个新的路径\n\tif(arcbarOption.type=='default'){\n\t\tcontext.arc(centerPosition.x, centerPosition.y, radius, arcbarOption.startAngle * Math.PI, arcbarOption.endAngle * Math.PI, false);\n\t}else{\n\t\tcontext.arc(centerPosition.x, centerPosition.y, radius, 0, 2 * Math.PI, false);\n\t}\n\t\n\tcontext.stroke(); //对当前路径进行描边\n\t\t\n\t\t\t\n    series.forEach(function (eachSeries) {\n\t\tcontext.setLineWidth(arcbarOption.width);\n\t\tcontext.setStrokeStyle(eachSeries.color);\n\t\tcontext.setLineCap('round');\n\t\tcontext.beginPath();\n\t\tcontext.arc(centerPosition.x, centerPosition.y, radius, arcbarOption.startAngle * Math.PI, eachSeries._proportion_ * Math.PI, false);\n\t\tcontext.stroke();\n\t\t\n    });\n    drawRingTitle(opts, config, context);\n    return {\n        center: centerPosition,\n        radius: radius,\n        series: series\n    };\n}\n\nfunction drawGaugeDataPoints(categories,series, opts, config, context) {\n\tvar process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n\tvar gaugeOption = opts.extra.gauge || {};\n\tgaugeOption.startAngle=gaugeOption.startAngle? gaugeOption.startAngle: 0.75;\n\tif(gaugeOption.oldAngle==undefined){\n\t\tgaugeOption.oldAngle=gaugeOption.startAngle;\n\t}\n\tif(gaugeOption.oldData==undefined){\n\t\tgaugeOption.oldData=0;\n\t}\n\tgaugeOption.endAngle=gaugeOption.endAngle? gaugeOption.endAngle : 0.25;\n\tcategories = getGaugeAxisPoints(categories,gaugeOption.startAngle,gaugeOption.endAngle);\n\tvar centerPosition = {\n\t    x: opts.width / 2,\n\t    y: (opts.height) / 2\n\t};\n\tvar radius = Math.min(centerPosition.x , centerPosition.y);\n\tif (typeof gaugeOption.width === 'number' && gaugeOption.width > 0) {\n\t    gaugeOption.width=gaugeOption.width;\n\t}else{\n\t\tgaugeOption.width=15*opts.pixelRatio;\n\t}\n\tradius -= config.padding+gaugeOption.width/2;\n\tvar innerRadius = radius-gaugeOption.width;\n\t\n\t\n\t\n\t//画背景\n\tcontext.setLineWidth(gaugeOption.width);\n\tcontext.setLineCap('butt'); \n\tcategories.forEach(function (eachCategories) {\n\t\tcontext.beginPath(); \n\t\tcontext.setStrokeStyle(eachCategories.color); \n\t\tcontext.arc(centerPosition.x, centerPosition.y, radius, eachCategories._startAngle_ * Math.PI, eachCategories._endAngle_ * Math.PI, false);\n\t\tcontext.stroke(); \n\t});\n\tcontext.save();\n\t\n\t//画刻度线\n\tlet totalAngle=gaugeOption.startAngle-gaugeOption.endAngle+1;\n\tgaugeOption.splitLine.fixRadius=gaugeOption.splitLine.fixRadius? gaugeOption.splitLine.fixRadius : 0;\n\tgaugeOption.splitLine.splitNumber=gaugeOption.splitLine.splitNumber? gaugeOption.splitLine.splitNumber : 10;\n\tgaugeOption.splitLine.width=gaugeOption.splitLine.width? gaugeOption.splitLine.width : 15*opts.pixelRatio ;\n\tgaugeOption.splitLine.color=gaugeOption.splitLine.color? gaugeOption.splitLine.color : '#FFFFFF';\n\tgaugeOption.splitLine.childNumber=gaugeOption.splitLine.childNumber? gaugeOption.splitLine.childNumber : 5;\n\tgaugeOption.splitLine.childWidth=gaugeOption.splitLine.childWidth? gaugeOption.splitLine.childWidth : 5*opts.pixelRatio;\n\t\n\tlet splitAngle=totalAngle/gaugeOption.splitLine.splitNumber;\n\tlet childAngle=totalAngle/gaugeOption.splitLine.splitNumber/gaugeOption.splitLine.childNumber;\n\tlet startX=-radius-gaugeOption.width*0.5-gaugeOption.splitLine.fixRadius;\n\tlet endX=-radius-gaugeOption.width*0.5-gaugeOption.splitLine.fixRadius+gaugeOption.splitLine.width;\n\tlet childendX=-radius-gaugeOption.width*0.5-gaugeOption.splitLine.fixRadius+gaugeOption.splitLine.childWidth;\n\t\n\tcontext.translate(centerPosition.x, centerPosition.y);\n\tcontext.rotate((gaugeOption.startAngle-1)* Math.PI);\n\t\n\tfor(let i=0 ; i< gaugeOption.splitLine.splitNumber+1; i++){\n\t\tcontext.beginPath();\n\t\tcontext.setStrokeStyle(gaugeOption.splitLine.color);\n\t\tcontext.setLineWidth(2*opts.pixelRatio);\n\t\tcontext.moveTo(startX, 0);\n\t\tcontext.lineTo(endX, 0);\n\t\tcontext.stroke();\n\t\tcontext.rotate(splitAngle* Math.PI);\n\t}\n\tcontext.restore();\n\t\n\tcontext.save();\n\tcontext.translate(centerPosition.x, centerPosition.y);\n\tcontext.rotate((gaugeOption.startAngle-1)* Math.PI);\n\t\n\tfor(let i=0 ; i< gaugeOption.splitLine.splitNumber*gaugeOption.splitLine.childNumber+1; i++){\n\t\tcontext.beginPath();\n\t\tcontext.setStrokeStyle(gaugeOption.splitLine.color);\n\t\tcontext.setLineWidth(1*opts.pixelRatio);\n\t\tcontext.moveTo(startX, 0);\n\t\tcontext.lineTo(childendX, 0);\n\t\tcontext.stroke();\n\t\tcontext.rotate(childAngle* Math.PI);\n\t}\n\tcontext.restore();\n\t\n\t//画指针\n\tgaugeOption.pointer.width=gaugeOption.pointer.width? gaugeOption.pointer.width : 15*opts.pixelRatio;\n\tif (gaugeOption.pointer.color == undefined || gaugeOption.pointer.color == 'auto') {\n\t    gaugeOption.pointer.color == 'auto';\n\t}else{\n\t\tgaugeOption.pointer.color == gaugeOption.pointer.color;\n\t}\n\tseries = getGaugeDataPoints(series,categories,gaugeOption, process);\n\t\n\tseries.forEach(function (eachSeries) {\n\t\tcontext.save();\n\t\tcontext.translate(centerPosition.x, centerPosition.y);\n\t\tcontext.rotate((eachSeries._proportion_-1)* Math.PI);\n\t\tcontext.beginPath();\n\t\tcontext.setFillStyle(eachSeries.color);\n\t\tcontext.moveTo(gaugeOption.pointer.width, 0);\n\t\tcontext.lineTo(0,-gaugeOption.pointer.width/2);\n\t\tcontext.lineTo(-innerRadius,0);\n\t\tcontext.lineTo(0,gaugeOption.pointer.width/2);\n\t\tcontext.lineTo(gaugeOption.pointer.width,0);\n\t\tcontext.closePath();\n\t\tcontext.fill();\n\t\tcontext.beginPath(); \n\t\tcontext.setFillStyle('#FFFFFF');\n\t\tcontext.arc(0, 0, gaugeOption.pointer.width/6, 0,2* Math.PI, false);\n\t\tcontext.fill();\n\t\tcontext.restore();\n\t});\n\t\n\tif (opts.dataLabel !== false) {\n\t\tdrawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context);\n\t}\n\t\n\tdrawRingTitle(opts, config, context);\n\t\n\tif (process === 1 && opts.type === 'gauge') {\n\t\tgaugeOption.oldAngle=series[0]._proportion_;\n\t\tgaugeOption.oldData=series[0].data;\n\t}\n\treturn {\n\t    center: centerPosition,\n\t    radius: radius,\n\t\tinnerRadius:innerRadius,\n\t    categories: categories,\n\t\ttotalAngle:totalAngle\n\t};\n}\n\nfunction drawRadarDataPoints(series, opts, config, context) {\n    var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    var radarOption = opts.extra.radar || {};\n    var coordinateAngle = getRadarCoordinateSeries(opts.categories.length);\n    var centerPosition = {\n        x: opts.width / 2,\n        y: (opts.height - config.legendHeight) / 2\n    };\n\n    var radius = Math.min(centerPosition.x - (getMaxTextListLength(opts.categories) + config.radarLabelTextMargin), centerPosition.y - config.radarLabelTextMargin);\n\n    radius -= config.padding;\n\n    // draw grid\n    context.beginPath();\n    context.setLineWidth(1*opts.pixelRatio);\n    context.setStrokeStyle(radarOption.gridColor || \"#cccccc\");\n    coordinateAngle.forEach(function (angle) {\n        var pos = convertCoordinateOrigin(radius * Math.cos(angle), radius * Math.sin(angle), centerPosition);\n        context.moveTo(centerPosition.x, centerPosition.y);\n        context.lineTo(pos.x, pos.y);\n    });\n    context.stroke();\n    context.closePath();\n\n    // draw split line grid\n\n    var _loop = function _loop(i) {\n        var startPos = {};\n        context.beginPath();\n        context.setLineWidth(1*opts.pixelRatio);\n        context.setStrokeStyle(radarOption.gridColor || \"#cccccc\");\n        coordinateAngle.forEach(function (angle, index) {\n            var pos = convertCoordinateOrigin(radius / config.radarGridCount * i * Math.cos(angle), radius / config.radarGridCount * i * Math.sin(angle), centerPosition);\n            if (index === 0) {\n                startPos = pos;\n                context.moveTo(pos.x, pos.y);\n            } else {\n                context.lineTo(pos.x, pos.y);\n            }\n        });\n        context.lineTo(startPos.x, startPos.y);\n        context.stroke();\n        context.closePath();\n    };\n\n    for (var i = 1; i <= config.radarGridCount; i++) {\n        _loop(i);\n    }\n\n    var radarDataPoints = getRadarDataPoints(coordinateAngle, centerPosition, radius, series, opts, process);\n\t\n    radarDataPoints.forEach(function (eachSeries, seriesIndex) {\n        // 绘制区域数据\n        context.beginPath();\n        context.setFillStyle(eachSeries.color);\n        context.setGlobalAlpha(0.3);\n        eachSeries.data.forEach(function (item, index) {\n            if (index === 0) {\n                context.moveTo(item.position.x, item.position.y);\n            } else {\n                context.lineTo(item.position.x, item.position.y);\n            }\n        });\n        context.closePath();\n        context.fill();\n        context.setGlobalAlpha(1);\n\n        if (opts.dataPointShape !== false) {\n            var shape = config.dataPointShape[seriesIndex % config.dataPointShape.length];\n            var points = eachSeries.data.map(function (item) {\n                return item.position;\n            });\n            drawPointShape(points, eachSeries.color, shape, context,opts);\n        }\n    });\n    // draw label text\n    drawRadarLabel(coordinateAngle, radius, centerPosition, opts, config, context);\n\n    return {\n        center: centerPosition,\n        radius: radius,\n        angleList: coordinateAngle\n    };\n}\n\nfunction drawCanvas(opts, context) {\n    context.draw();\n}\n\nvar Timing = {\n    easeIn: function easeIn(pos) {\n        return Math.pow(pos, 3);\n    },\n\n    easeOut: function easeOut(pos) {\n        return Math.pow(pos - 1, 3) + 1;\n    },\n\n    easeInOut: function easeInOut(pos) {\n        if ((pos /= 0.5) < 1) {\n            return 0.5 * Math.pow(pos, 3);\n        } else {\n            return 0.5 * (Math.pow(pos - 2, 3) + 2);\n        }\n    },\n\n    linear: function linear(pos) {\n        return pos;\n    }\n};\n\nfunction Animation(opts) {\n    this.isStop = false;\n    opts.duration = typeof opts.duration === 'undefined' ? 1000 : opts.duration;\n    opts.timing = opts.timing || 'linear';\n\n    var delay = 17;\n\n    var createAnimationFrame = function createAnimationFrame() {\n\t\t\n        if (typeof requestAnimationFrame !== 'undefined') {\n\t\t\treturn requestAnimationFrame;\n        } else if (typeof setTimeout !== 'undefined') {\n\t\t\t\n            return function (step, delay) {\n                setTimeout(function () {\n                    var timeStamp = +new Date();\n                    step(timeStamp);\n                }, delay);\n            };\n        } else {\n\t\t\t\n            return function (step) {\n                step(null);\n            };\n        }\n    };\n    var animationFrame = createAnimationFrame();\n    var startTimeStamp = null;\n\t\n    var _step = function step(timestamp) {\n\t\t\n        if (timestamp === null || this.isStop === true) {\n            opts.onProcess && opts.onProcess(1);\n            opts.onAnimationFinish && opts.onAnimationFinish();\n            return;\n        }\n        if (startTimeStamp === null) {\n            startTimeStamp = timestamp;\n        }\n        if (timestamp - startTimeStamp < opts.duration) {\n            var process = (timestamp - startTimeStamp) / opts.duration;\n            var timingFunction = Timing[opts.timing];\n            process = timingFunction(process);\n\t\t\t\n            opts.onProcess && opts.onProcess(process);\n            animationFrame(_step, delay);\n        } else {\n            opts.onProcess && opts.onProcess(1);\n            opts.onAnimationFinish && opts.onAnimationFinish();\n        }\n    };\n    _step = _step.bind(this);\n    animationFrame(_step, delay);\n}\n\n// stop animation immediately\n// and tigger onAnimationFinish\nAnimation.prototype.stop = function () {\n    this.isStop = true;\n};\n\nfunction drawCharts(type, opts, config, context) {\n    var _this = this;\n\n    var series = opts.series;\n    var categories = opts.categories;\n    series = fillSeriesColor(series, config);\r\n\tseries = fillSeriesType(series, opts);\r\n\t\n    var _calLegendData = calLegendData(series, opts, config),\n        legendHeight = _calLegendData.legendHeight;\n\n    config.legendHeight = legendHeight;\n\n    var _calYAxisData = calYAxisData(series, opts, config),\n        yAxisWidth = _calYAxisData.yAxisWidth;\n\n    config.yAxisWidth = yAxisWidth;\n    if (categories && categories.length) {\n        var _calCategoriesData = calCategoriesData(categories, opts, config),\n            xAxisHeight = _calCategoriesData.xAxisHeight,\n            angle = _calCategoriesData.angle;\n\n        config.xAxisHeight = xAxisHeight;\n        config._xAxisTextAngle_ = angle;\n    }\n    if (type === 'pie' || type === 'ring') {\n        config._pieTextMaxLength_ = opts.dataLabel === false ? 0 : getPieTextMaxLength(series);\n    }\n\n    var duration = opts.animation ? 1000 : 0;\n    this.animationInstance && this.animationInstance.stop();\r\n\t\r\n\t//先清空画布,不然百度和支付宝ToolTip有重影\r\n\tcontext.clearRect(0, 0, opts.width, opts.height);\r\n\t\r\n\t\n    switch (type) {\n        case 'line':\n            this.animationInstance = new Animation({\n                timing: 'easeIn',\n                duration: duration,\n                onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n                    drawYAxisGrid(categories,opts, config, context);\n                    drawXAxis(categories, opts, config, context);\n                    var _drawLineDataPoints = drawLineDataPoints(series, opts, config, context, process),\n                        xAxisPoints = _drawLineDataPoints.xAxisPoints,\n                        calPoints = _drawLineDataPoints.calPoints,\n                        eachSpacing = _drawLineDataPoints.eachSpacing;\n\n                    _this.chartData.xAxisPoints = xAxisPoints;\n                    _this.chartData.calPoints = calPoints;\n                    _this.chartData.eachSpacing = eachSpacing;\n                    drawLegend(opts.series, opts, config, context);\r\n                    drawYAxis(series, opts, config, context);\r\n\t\t\t\t\tdrawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n                    drawCanvas(opts, context);\n\t\t\t\t\t\n                },\n                onAnimationFinish: function onAnimationFinish() {\n                    _this.event.trigger('renderComplete');\n                }\n            });\n\t\t\t\n            break;\r\n\t\tcase 'mix':\r\n\t\t    this.animationInstance = new Animation({\r\n\t\t        timing: 'easeIn',\r\n\t\t        duration: duration,\r\n\t\t        onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\r\n\t\t            drawYAxisGrid(categories,opts, config, context);\r\n\t\t            drawXAxis(categories, opts, config, context);\r\n\t\t            var _drawMixDataPoints = drawMixDataPoints(series, opts, config, context, process),\r\n\t\t                xAxisPoints = _drawMixDataPoints.xAxisPoints,\r\n\t\t                calPoints = _drawMixDataPoints.calPoints,\r\n\t\t                eachSpacing = _drawMixDataPoints.eachSpacing;\r\n\t\t\r\n\t\t            _this.chartData.xAxisPoints = xAxisPoints;\r\n\t\t            _this.chartData.calPoints = calPoints;\r\n\t\t            _this.chartData.eachSpacing = eachSpacing;\r\n\t\t            drawLegend(opts.series, opts, config, context);\r\n\t\t            drawYAxis(series, opts, config, context);\r\n\t\t\t\t\tdrawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n\t\t            drawCanvas(opts, context);\r\n\t\t        },\r\n\t\t        onAnimationFinish: function onAnimationFinish() {\r\n\t\t            _this.event.trigger('renderComplete');\r\n\t\t        }\r\n\t\t    });\r\n\t\t\t\r\n\t\t    break;\n        case 'column':\n\t\t    this.animationInstance = new Animation({\n                timing: 'easeIn',\n                duration: duration,\n                onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n\t\t\t\t\tdrawYAxisGrid(categories,opts, config, context);\n                    drawXAxis(categories, opts, config, context);\n                    var _drawColumnDataPoints = drawColumnDataPoints(series, opts, config, context, process),\n                        xAxisPoints = _drawColumnDataPoints.xAxisPoints,\r\n\t\t\t\t\t\tcalPoints = _drawColumnDataPoints.calPoints,\n                        eachSpacing = _drawColumnDataPoints.eachSpacing;\n                    _this.chartData.xAxisPoints = xAxisPoints;\r\n\t\t\t\t\t_this.chartData.calPoints = calPoints;\n                    _this.chartData.eachSpacing = eachSpacing;\n                    drawLegend(opts.series, opts, config, context);\r\n                    drawYAxis(series, opts, config, context);\r\n\t\t\t\t\tdrawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n                    drawCanvas(opts, context);\n                },\n                onAnimationFinish: function onAnimationFinish() {\n                    _this.event.trigger('renderComplete');\n                }\n            });\n            break;\n        case 'area':\n            this.animationInstance = new Animation({\n                timing: 'easeIn',\n                duration: duration,\n                onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n\t\t\t\t\tdrawYAxisGrid(categories,opts, config, context);\n                    drawXAxis(categories, opts, config, context);\n                    var _drawAreaDataPoints = drawAreaDataPoints(series, opts, config, context, process),\n                        xAxisPoints = _drawAreaDataPoints.xAxisPoints,\n                        calPoints = _drawAreaDataPoints.calPoints,\n                        eachSpacing = _drawAreaDataPoints.eachSpacing;\n\n                    _this.chartData.xAxisPoints = xAxisPoints;\n                    _this.chartData.calPoints = calPoints;\n                    _this.chartData.eachSpacing = eachSpacing;\n                    drawLegend(opts.series, opts, config, context);\r\n                    drawYAxis(series, opts, config, context);\r\n\t\t\t\t\tdrawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n                    \n                    drawCanvas(opts, context);\n                },\n                onAnimationFinish: function onAnimationFinish() {\n                    _this.event.trigger('renderComplete');\n                }\n            });\n            break;\n        case 'ring':\n        case 'pie':\n            this.animationInstance = new Animation({\n                timing: 'easeInOut',\n                duration: duration,\n                onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n\t\t\t\t\t_this.chartData.pieData = drawPieDataPoints(series, opts, config, context, process);\n                    drawLegend(opts.series, opts, config, context);\r\n\t\t\t\t\tdrawToolTipBridge(opts, config, context, process);\n                    drawCanvas(opts, context);\n                },\n                onAnimationFinish: function onAnimationFinish() {\n                    _this.event.trigger('renderComplete');\n                }\n            });\n            break;\n        case 'radar':\n            this.animationInstance = new Animation({\n                timing: 'easeInOut',\n                duration: duration,\n                onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n\t\t\t\t\t_this.chartData.radarData = drawRadarDataPoints(series, opts, config, context, process);\n                    drawLegend(opts.series, opts, config, context);\n                    drawCanvas(opts, context);\n                },\n                onAnimationFinish: function onAnimationFinish() {\n                    _this.event.trigger('renderComplete');\n                }\n            });\n            break;\n\t\tcase 'arcbar':\n\t\t\tthis.animationInstance = new Animation({\n\t\t\t    timing: 'easeInOut',\n\t\t\t    duration: duration,\n\t\t\t    onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n\t\t\t\t\t_this.chartData.arcbarData = drawArcbarDataPoints(series, opts, config, context, process);\n\t\t\t        drawCanvas(opts, context);\n\t\t\t    },\n\t\t\t    onAnimationFinish: function onAnimationFinish() {\n\t\t\t        _this.event.trigger('renderComplete');\n\t\t\t    }\n\t\t\t});\n\t\t\tbreak;\n\t\tcase 'gauge':\n\t\t\tthis.animationInstance = new Animation({\n\t\t\t    timing: 'easeInOut',\n\t\t\t    duration: duration,\n\t\t\t    onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n\t\t\t\t\t_this.chartData.gaugeData = drawGaugeDataPoints(categories, series,opts, config, context, process);\n\t\t\t        drawCanvas(opts, context);\n\t\t\t    },\n\t\t\t    onAnimationFinish: function onAnimationFinish() {\n\t\t\t        _this.event.trigger('renderComplete');\n\t\t\t    }\n\t\t\t});\n\t\t\tbreak;\n\t\tcase 'candle':\n\t\t    this.animationInstance = new Animation({\n\t\t        timing: 'easeIn',\n\t\t        duration: duration,\n\t\t        onProcess: function onProcess(process) {\r\n\t\t\t\t\tif(opts.rotate){\r\n\t\t\t\t\t\tcontextRotate(context,opts);\r\n\t\t\t\t\t}\n\t\t\t\t\tdrawYAxisGrid(categories,opts, config, context);\n\t\t\t\t\tdrawXAxis(categories, opts, config, context);\n\t\t\t\t\tvar _drawCandleDataPoints = drawCandleDataPoints(series, opts, config, context, process),\n\t\t\t\t\t    xAxisPoints = _drawCandleDataPoints.xAxisPoints,\n\t\t\t\t\t    calPoints = _drawCandleDataPoints.calPoints,\n\t\t\t\t\t    eachSpacing = _drawCandleDataPoints.eachSpacing;\n\t\t\t\t\t\n\t\t\t\t\t_this.chartData.xAxisPoints = xAxisPoints;\n\t\t\t\t\t_this.chartData.calPoints = calPoints;\n\t\t\t\t\t_this.chartData.eachSpacing = eachSpacing;\n\t\t\t\t\tdrawLegend(opts.series, opts, config, context);\r\n\t\t\t\t\tdrawYAxis(series, opts, config, context);\n\t\t\t\t\tdrawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\n\t\t\t\t\tdrawCanvas(opts, context);\n\t\t        },\n\t\t        onAnimationFinish: function onAnimationFinish() {\n\t\t            _this.event.trigger('renderComplete');\n\t\t        }\n\t\t    });\n\t\t    break;\n    }\n}\n\n// simple event implement\n\nfunction Event() {\n\tthis.events = {};\n}\n\nEvent.prototype.addEventListener = function (type, listener) {\n\tthis.events[type] = this.events[type] || [];\n\tthis.events[type].push(listener);\n};\n\nEvent.prototype.trigger = function () {\n\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\targs[_key] = arguments[_key];\n\t}\n\n\tvar type = args[0];\n\tvar params = args.slice(1);\n\tif (!!this.events[type]) {\n\t\tthis.events[type].forEach(function (listener) {\n\t\t\ttry {\n\t\t\t\tlistener.apply(null, params);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t});\n\t}\n};\n\nvar Charts = function Charts(opts) {\n\topts.fontSize=opts.fontSize ? opts.fontSize*opts.pixelRatio : 13*opts.pixelRatio;\n    opts.title = opts.title || {};\n    opts.subtitle = opts.subtitle || {};\n    opts.yAxis = opts.yAxis || {};\n\topts.yAxis.gridType=opts.yAxis.gridType? opts.yAxis.gridType : 'solid';\n\topts.yAxis.dashLength=opts.yAxis.dashLength? opts.yAxis.dashLength : 4*opts.pixelRatio;\n    opts.xAxis = opts.xAxis || {};\n\topts.xAxis.rotateLabel = opts.xAxis.rotateLabel ? true : false;\n\topts.xAxis.type=opts.xAxis.type? opts.xAxis.type : 'calibration';\n\topts.xAxis.gridType=opts.xAxis.gridType? opts.xAxis.gridType : 'solid';\n\topts.xAxis.dashLength=opts.xAxis.dashLength? opts.xAxis.dashLength : 4*opts.pixelRatio;\n\topts.xAxis.itemCount = opts.xAxis.itemCount ? opts.xAxis.itemCount : 5;\n\topts.xAxis.scrollAlign = opts.xAxis.scrollAlign ? opts.xAxis.scrollAlign : 'left';\n    opts.extra = opts.extra || {};\r\n\t\n    opts.legend = opts.legend === false ? false : true;\n\topts.rotate = opts.rotate ? true : false;\n    opts.animation = opts.animation === false ? false : true;\n    var config$$1 = assign({}, config);\n    config$$1.yAxisTitleWidth = opts.yAxis.disabled !== true && opts.yAxis.title ? config$$1.yAxisTitleWidth : 0;\n    if(opts.type == 'pie' || opts.type == 'ring' ){\r\n    \t config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : opts.extra.pie.lableWidth || config$$1.pieChartLinePadding*opts.pixelRatio;\r\n    }\n    config$$1.pieChartTextPadding = opts.dataLabel === false ? 0 : config$$1.pieChartTextPadding*opts.pixelRatio;\n\tconfig$$1.yAxisSplit = opts.yAxis.splitNumber? opts.yAxis.splitNumber : config.yAxisSplit;\n\t//屏幕旋转\n\tconfig$$1.rotate=opts.rotate;\n\tif(opts.rotate){\n\t\tlet tempWidth=opts.width;\n\t\tlet tempHeight=opts.height;\n\t\topts.width=tempHeight;\n\t\topts.height=tempWidth;\n\t}\n\t\n\t//适配H5高分屏\n\tconfig$$1.yAxisWidth=config.yAxisWidth*opts.pixelRatio;\n\tconfig$$1.xAxisHeight=config.xAxisHeight*opts.pixelRatio;\n\tif(opts.enableScroll && opts.xAxis.scrollShow){\n\t\tconfig$$1.xAxisHeight+=6*opts.pixelRatio;\n\t}\n\tconfig$$1.xAxisLineHeight=config.xAxisLineHeight*opts.pixelRatio;\n\tconfig$$1.legendHeight=config.legendHeight*opts.pixelRatio;\n\t//config$$1.yAxisTitleWidth=config.yAxisTitleWidth*opts.pixelRatio;\n\tconfig$$1.padding=config.padding*opts.pixelRatio;\n\tconfig$$1.fontSize=opts.fontSize;\n\tconfig$$1.titleFontSize=config.titleFontSize*opts.pixelRatio;\n\tconfig$$1.subtitleFontSize=config.subtitleFontSize*opts.pixelRatio;\n\tconfig$$1.toolTipPadding=config.toolTipPadding*opts.pixelRatio;\n\tconfig$$1.toolTipLineHeight=config.toolTipLineHeight*opts.pixelRatio;\n\tconfig$$1.columePadding=config.columePadding*opts.pixelRatio;\n\t//config$$1.xAxisTextPadding=config.xAxisTextPadding*opts.pixelRatio;\n\t\n\t//向配置中传入当前pixelRatio及字体大小\n\tconfig.pixelRatio=opts.pixelRatio;\n\tconfig.fontSize=opts.fontSize;\n\tconfig.rotate=opts.rotate;\n\t\n    this.opts = opts;\n    this.config = config$$1;\n\topts.$this = opts.$this? opts.$this : this;\n    this.context = uni.createCanvasContext(opts.canvasId, opts.$this);\n    // store calcuated chart data\n    // such as chart point coordinate\n    this.chartData = {};\n    this.event = new Event();\n\t\n    this.scrollOption = {\n        currentOffset: 0,\n        startTouchX: 0,\n        distance: 0\n    };\n\t\n\t//计算右对齐偏移距离\n\tif(opts.enableScroll && opts.xAxis.scrollAlign=='right'){\n\t\tlet _calYAxisData = calYAxisData(opts.series, opts, config$$1),\n\t\t    yAxisWidth = _calYAxisData.yAxisWidth;\n\t\tconfig$$1.yAxisWidth = yAxisWidth;\n\t\tlet offsetLeft=0;\n\t\tlet _getXAxisPoints0 = getXAxisPoints(opts.categories, opts, config$$1),\n\t\t    xAxisPoints = _getXAxisPoints0.xAxisPoints,\n\t\t    startX = _getXAxisPoints0.startX,\n\t\t    endX = _getXAxisPoints0.endX,\n\t\t    eachSpacing = _getXAxisPoints0.eachSpacing;\n\t\tlet totalWidth=eachSpacing*(xAxisPoints.length-1);\n\t\tlet screenWidth=endX-startX;\n\t\toffsetLeft=screenWidth-totalWidth;\n\t\tthis.scrollOption = {\n\t\t    currentOffset: offsetLeft,\n\t\t    startTouchX: offsetLeft,\n\t\t    distance: 0\n\t\t};\n\t\topts._scrollDistance_= offsetLeft;\n\t}\n\t\n    drawCharts.call(this, opts.type, opts, config$$1, this.context);\n};\n\nCharts.prototype.updateData = function () {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.opts.series = data.series || this.opts.series;\n    this.opts.categories = data.categories || this.opts.categories;\r\n\tlet scrollPosition = data.scrollPosition || 'current';\r\n\tswitch (scrollPosition) {\r\n\t    case 'current':\r\n\t\t\tthis.opts._scrollDistance_= this.scrollOption.currentOffset;\r\n\t\t\tbreak;\r\n\t\tcase 'left':\r\n\t\t\tthis.opts._scrollDistance_= 0;\r\n\t\t\tthis.scrollOption = {\r\n\t\t\t    currentOffset: 0,\r\n\t\t\t    startTouchX: 0,\r\n\t\t\t    distance: 0\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\t\tcase 'right':\r\n\t\t\tlet _calYAxisData = calYAxisData(this.opts.series, this.opts, this.config),\n\t\t\t\tyAxisWidth = _calYAxisData.yAxisWidth;\n\t\t\tthis.config.yAxisWidth = yAxisWidth;\n\t\t\tlet offsetLeft=0;\n\t\t\tlet _getXAxisPoints0 = getXAxisPoints(this.opts.categories, this.opts, this.config),\n\t\t\t\txAxisPoints = _getXAxisPoints0.xAxisPoints,\n\t\t\t\tstartX = _getXAxisPoints0.startX,\n\t\t\t\tendX = _getXAxisPoints0.endX,\n\t\t\t\teachSpacing = _getXAxisPoints0.eachSpacing;\n\t\t\tlet totalWidth=eachSpacing*(xAxisPoints.length-1);\n\t\t\tlet screenWidth=endX-startX;\n\t\t\toffsetLeft=screenWidth-totalWidth;\n\t\t\tthis.scrollOption = {\n\t\t\t\tcurrentOffset: offsetLeft,\n\t\t\t\tstartTouchX: offsetLeft,\n\t\t\t\tdistance: 0\n\t\t\t};\n\t\t\tthis.opts._scrollDistance_= offsetLeft;\r\n\t\t\tbreak;\r\n\t}\r\n\tlet animation= data.animation==undefined? this.opts.animation:data.animation;\n\tthis.opts.animation = animation;\n    this.opts.title = assign({}, this.opts.title, data.title || {});\n    this.opts.subtitle = assign({}, this.opts.subtitle, data.subtitle || {});\n    drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\n};\n\r\nCharts.prototype.zoom = function () {\n    var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.opts.xAxis.itemCount;\r\n\tif(this.opts.enableScroll!==true){\r\n\t\tconsole.log('请启用滚动条后使用！')\r\n\t\treturn;\r\n\t}\r\n\tthis.opts.animation=false;\n    this.opts.xAxis.itemCount = val.itemCount;\n    drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\n};\r\n\nCharts.prototype.stopAnimation = function () {\n    this.animationInstance && this.animationInstance.stop();\n};\n\nCharts.prototype.addEventListener = function (type, listener) {\n    this.event.addEventListener(type, listener);\n};\n\nCharts.prototype.getCurrentDataIndex = function (e) {\n    var touches= e.mp.changedTouches[0];\n    if (touches) {\n        var _touches$= getTouches(touches, this.opts, e);\n        if (this.opts.type === 'pie' || this.opts.type === 'ring') {\n            return findPieChartCurrentIndex({ x: _touches$.x, y: _touches$.y }, this.chartData.pieData);\n        } else if (this.opts.type === 'radar') {\n            return findRadarChartCurrentIndex({ x: _touches$.x, y: _touches$.y }, this.chartData.radarData, this.opts.categories.length);\n        } else {\n            return findCurrentIndex({ x: _touches$.x, y: _touches$.y }, this.chartData.xAxisPoints, this.opts, this.config, Math.abs(this.scrollOption.currentOffset));\n        }\n    }\n    return -1;\n};\n\nCharts.prototype.showToolTip = function (e) {\n    var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar touches= e.mp.changedTouches[0];\n\tvar _touches$= getTouches(touches, this.opts, e);\n\t\n    if (this.opts.type === 'line' || this.opts.type === 'area' || this.opts.type === 'column') {\n        var index = this.getCurrentDataIndex(e);\n        var currentOffset = this.scrollOption.currentOffset;\n\t\t\n        var opts = assign({}, this.opts, {\n            _scrollDistance_: currentOffset,\n            animation: false\n        });\n        if (index > -1) {\r\n\t\t\t\n            var seriesData = getSeriesDataItem(this.opts.series, index);\n            if (seriesData.length !== 0) {\n                var _getToolTipData = getToolTipData(seriesData, this.chartData.calPoints, index, this.opts.categories, option),\n                    textList = _getToolTipData.textList,\n                    offset = _getToolTipData.offset;\n\t\t\t\toffset.y=_touches$.y;\n                opts.tooltip = {\n                    textList: textList,\n                    offset: offset,\n                    option: option,\r\n\t\t\t\t\tindex: index\n                };\n            }\n        }\n        drawCharts.call(this, opts.type, opts, this.config, this.context);\n    }\r\n\tif (this.opts.type === 'mix') {\r\n\t\t\r\n\t    var index = this.getCurrentDataIndex(e);\r\n\t    var currentOffset = this.scrollOption.currentOffset;\r\n\t\t\r\n\t    var opts = assign({}, this.opts, {\r\n\t        _scrollDistance_: currentOffset,\r\n\t        animation: false\r\n\t    });\r\n\t    if (index > -1) {\r\n\t        var seriesData = getSeriesDataItem(this.opts.series, index);\r\n\t        if (seriesData.length !== 0) {\r\n\t            var _getMixToolTipData = getMixToolTipData(seriesData, this.chartData.calPoints, index, this.opts.categories, option),\r\n\t                textList = _getMixToolTipData.textList,\r\n\t                offset = _getMixToolTipData.offset;\r\n\t\t\t\toffset.y=_touches$.y;\r\n\t            opts.tooltip = {\r\n\t                textList: textList,\r\n\t                offset: offset,\r\n\t                option: option,\r\n\t\t\t\t\tindex: index\r\n\t            };\r\n\t        }\r\n\t    }\r\n\t    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n\t}\n\tif (this.opts.type === 'candle') {\n\t\t\n\t    var index = this.getCurrentDataIndex(e);\n\t    var currentOffset = this.scrollOption.currentOffset;\n\t\t\n\t    var opts = assign({}, this.opts, {\n\t        _scrollDistance_: currentOffset,\n\t        animation: false\n\t    });\n\t    if (index > -1) {\n\t        var seriesData = getSeriesDataItem(this.opts.series, index);\n\t        if (seriesData.length !== 0) {\n\t            var _getToolTipData = getCandleToolTipData(this.opts.series[0].data,seriesData, this.chartData.calPoints, index, this.opts.categories, this.opts.extra.candle, option),\n\t                textList = _getToolTipData.textList,\n\t                offset = _getToolTipData.offset;\n\t\t\t\toffset.y=_touches$.y;\n\t            opts.tooltip = {\n\t                textList: textList,\n\t                offset: offset,\n\t                option: option,\r\n\t\t\t\t\tindex: index\n\t            };\n\t        }\n\t    }\n\t    drawCharts.call(this, opts.type, opts, this.config, this.context);\n\t}\r\n\tif (this.opts.type === 'pie' || this.opts.type === 'ring') {\r\n\t    var index = this.getCurrentDataIndex(e);\r\n\t    var currentOffset = this.scrollOption.currentOffset;\r\n\t\t\r\n\t    var opts = assign({}, this.opts, {\r\n\t        _scrollDistance_: currentOffset,\r\n\t        animation: false\r\n\t    });\r\n\t    if (index > -1) {\r\n\t\t\t\r\n\t        var seriesData = this.opts.series[index];\r\n\t\t\tvar textList =[{\r\n\t\t\t\ttext: option.format ? option.format(seriesData) : seriesData.name + ': ' + seriesData.data,\r\n\t\t\t\tcolor: seriesData.color\r\n\t\t\t}];\r\n\t\t\tvar offset = {x:_touches$.x,y:_touches$.y};\r\n\t\t\t\r\n\t\t\topts.tooltip = {\r\n\t\t\t\ttextList: textList,\r\n\t\t\t\toffset: offset,\r\n\t\t\t\toption: option,\r\n\t\t\t\tindex: index\r\n\t\t\t};\r\n\t    }\r\n\t    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n\t}\n};\n\nCharts.prototype.scrollStart = function (e) {\n\tvar touches= e.mp.changedTouches[0];\r\n\tvar _touches$= getTouches(touches, this.opts, e);\n    if (touches && this.opts.enableScroll === true) {\n\t\tif(touches.x){\n\t\t\tthis.scrollOption.startTouchX = _touches$.x;\n\t\t}else{\n\t\t\tthis.scrollOption.startTouchX = _touches$.clientX;\n\t\t}\n    }\n};\n\nCharts.prototype.scroll = function (e) {\n    // TODO throtting...\r\n\tvar {\r\n\t  disableTouch, throttleTouch, lastMoveTime,\r\n\t} = this;\r\n\tif (disableTouch || !e.mp.changedTouches[0]) return;\r\n\t\r\n\tif (throttleTouch) {\r\n\t  var currMoveTime = Date.now();\r\n\t  if (currMoveTime - lastMoveTime < 240) return;\r\n\t  this.lastMoveTime = currMoveTime;\r\n\t}\r\n\t\n\tvar touches= e.mp.changedTouches[0];\r\n\tvar _touches$= getTouches(touches, this.opts, e);\n    if (touches && this.opts.enableScroll === true) {\n\t\tvar _distance;\n\t\tif(touches.x){\n\t\t\t_distance = _touches$.x - this.scrollOption.startTouchX;\n\t\t}else{\n\t\t\t_distance = _touches$.clientX - this.scrollOption.startTouchX;\n\t\t}\n        var currentOffset = this.scrollOption.currentOffset;\n\n        var validDistance = calValidDistance(currentOffset + _distance, this.chartData, this.config, this.opts);\n\n        this.scrollOption.distance = _distance = validDistance - currentOffset;\n        var opts = assign({}, this.opts, {\n            _scrollDistance_: currentOffset + _distance,\n            animation: false\n        });\n        drawCharts.call(this, opts.type, opts, this.config, this.context);\n    }\n};\n\nCharts.prototype.scrollEnd = function (e) {\n    if (this.opts.enableScroll === true) {\n        var _scrollOption = this.scrollOption,\n            currentOffset = _scrollOption.currentOffset,\n            distance = _scrollOption.distance;\n\n        this.scrollOption.currentOffset = currentOffset + distance;\n        this.scrollOption.distance = 0;\n    }\n};\n\nmodule.exports = Charts;\n"]}]}